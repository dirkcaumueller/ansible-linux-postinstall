%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
\edef\sphinxdqmaybe{\ifdefined\DeclareUnicodeCharacterAsOptional\string"\fi}
  \DeclareUnicodeCharacter{\sphinxdqmaybe00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{\sphinxdqmaybe2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{\sphinxdqmaybe2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{\sphinxdqmaybe2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{\sphinxdqmaybe251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{\sphinxdqmaybe2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}
\addto\captionsenglish{\renewcommand{\contentsname}{Table of Contents:}}

\addto\captionsenglish{\renewcommand{\figurename}{Fig.\@ }}
\makeatletter
\def\fnum@figure{\figurename\thefigure{}}
\makeatother
\addto\captionsenglish{\renewcommand{\tablename}{Table }}
\makeatletter
\def\fnum@table{\tablename\thetable{}}
\makeatother
\addto\captionsenglish{\renewcommand{\literalblockname}{Listing}}

\addto\captionsenglish{\renewcommand{\literalblockcontinuedname}{continued from previous page}}
\addto\captionsenglish{\renewcommand{\literalblockcontinuesname}{continues on next page}}
\addto\captionsenglish{\renewcommand{\sphinxnonalphabeticalgroupname}{Non-alphabetical}}
\addto\captionsenglish{\renewcommand{\sphinxsymbolsname}{Symbols}}
\addto\captionsenglish{\renewcommand{\sphinxnumbersname}{Numbers}}

\addto\extrasenglish{\def\pageautorefname{page}}

\setcounter{tocdepth}{1}



\title{ansible-role-linux-postinstall Documentation}
\date{Jul 01, 2020}
\release{1.14.2}
\author{Vladimir Botka}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}



\chapter{Quick start guide}
\label{\detokenize{qsg:quick-start-guide}}\label{\detokenize{qsg:qg}}\label{\detokenize{qsg::doc}}
For those users who want to quickly try the role this guide provides an example of how to create users, install packages and configure services.
\begin{itemize}
\item {} 
Install the role \sphinxcode{\sphinxupquote{vbotka.linux\_postinstall}}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{shell}\PYG{o}{\PYGZgt{}} \PYG{n}{ansible}\PYG{o}{\PYGZhy{}}\PYG{n}{galaxy} \PYG{n}{install} \PYG{n}{vbotka}\PYG{o}{.}\PYG{n}{linux\PYGZus{}postinstall}
\end{sphinxVerbatim}

\item {} 
Create the playbook \sphinxcode{\sphinxupquote{linux-postinstall.yml}} for single host srv.example.com (2)

\end{itemize}

\fvset{hllines={, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
shell\PYGZgt{} cat linux\PYGZhy{}postinstall.yml
\PYGZhy{} hosts: srv.example.com
  gather\PYGZus{}facts: \PYG{n+nb}{true}
  connection: ssh
  remote\PYGZus{}user: admin
  become: yes
  become\PYGZus{}user: root
  become\PYGZus{}method: sudo
  roles:
    \PYGZhy{} vbotka.linux\PYGZus{}postinstall
\end{sphinxVerbatim}
\sphinxresetverbatimhllines
\begin{itemize}
\item {} 
Create \sphinxcode{\sphinxupquote{host\_vars}} with customized variables.

\end{itemize}

\fvset{hllines={, 2, 3, 4, 5, 6,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
shell\PYGZgt{} ls \PYGZhy{}1 host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}*
host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}common.yml
host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}users.yml
host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}passwords.yml
host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}packages.yml
host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}service.yml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines
\begin{itemize}
\item {} 
To speedup the execution let’s set some variables (2-4) to \sphinxstyleemphasis{false}.

\end{itemize}

\fvset{hllines={, 2, 3, 4,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
shell\PYGZgt{} cat host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}common.yml
lp\PYGZus{}debug: \PYG{n+nb}{false}
lp\PYGZus{}backup\PYGZus{}conf: \PYG{n+nb}{false}
lp\PYGZus{}flavors\PYGZus{}enable: \PYG{n+nb}{false}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines
\begin{itemize}
\item {} 
Create users.

\end{itemize}

\fvset{hllines={, 3, 5,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
shell\PYGZgt{} cat host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}users.yml
lp\PYGZus{}users:
  \PYGZhy{} \PYG{o}{\PYGZob{}}name: ansible,
     shell: /bin/sh\PYG{o}{\PYGZcb{}}
  \PYGZhy{} \PYG{o}{\PYGZob{}}name: admin,
     shell: /bin/bash\PYG{o}{\PYGZcb{}}
lp\PYGZus{}users\PYGZus{}groups:
  \PYGZhy{} \PYG{o}{\PYGZob{}}name: admin,
     groups: \PYG{l+s+s2}{\PYGZdq{}adm, dialout\PYGZdq{}}\PYG{o}{\PYGZcb{}}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines
\begin{itemize}
\item {} 
Configure passwords.

\end{itemize}

\fvset{hllines={, 2, 3, 4, 5,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
shell\PYGZgt{} cat host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}passwords.yml
lp\PYGZus{}passwords: \PYG{n+nb}{true}
lp\PYGZus{}passwordstore: \PYG{n+nb}{true}
lp\PYGZus{}passwordstore\PYGZus{}create: \PYG{n+nb}{false}
lp\PYGZus{}passwordstore\PYGZus{}overwrite: \PYG{n+nb}{false}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines
\begin{itemize}
\item {} 
Install packages and enable autoremove.

\end{itemize}

\fvset{hllines={, 2, 3,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
shell\PYGZgt{} cat host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}packages.yml
lp\PYGZus{}packages\PYGZus{}autoremove: \PYG{n+nb}{true}
lp\PYGZus{}packages\PYGZus{}install:
  \PYGZhy{} ansible
  \PYGZhy{} ansible\PYGZhy{}lint
  \PYGZhy{} ansible\PYGZhy{}tower\PYGZhy{}cli
\end{sphinxVerbatim}
\sphinxresetverbatimhllines
\begin{itemize}
\item {} 
Configure services.

\end{itemize}

\fvset{hllines={, 2, 3,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
shell\PYGZgt{} cat host\PYGZus{}vars/srv.example.com/lp\PYGZhy{}service.yml
lp\PYGZus{}service\PYGZus{}debug: \PYG{n+nb}{true}
lp\PYGZus{}service:
  \PYGZhy{} \PYG{o}{\PYGZob{}}name: ssh, state: started, enabled: true\PYG{o}{\PYGZcb{}}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines
\begin{itemize}
\item {} 
Text syntax and review variables

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{shell}\PYG{o}{\PYGZgt{}} \PYG{n}{ansible}\PYG{o}{\PYGZhy{}}\PYG{n}{playbook} \PYG{n}{linux}\PYG{o}{\PYGZhy{}}\PYG{n}{postinstall}\PYG{o}{.}\PYG{n}{yml} \PYG{o}{\PYGZhy{}}\PYG{n}{e} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{lp\PYGZus{}debug=true}\PYG{l+s+s1}{\PYGZsq{}} \PYG{o}{\PYGZhy{}}\PYG{n}{CD}
\end{sphinxVerbatim}

\item {} 
Install packages

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{shell}\PYG{o}{\PYGZgt{}} \PYG{n}{ansible}\PYG{o}{\PYGZhy{}}\PYG{n}{playbook} \PYG{n}{linux}\PYG{o}{\PYGZhy{}}\PYG{n}{postinstall}\PYG{o}{.}\PYG{n}{yml} \PYG{o}{\PYGZhy{}}\PYG{n}{t} \PYG{n}{lp\PYGZus{}packages}
\end{sphinxVerbatim}

\item {} 
Display variables

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{shell}\PYG{o}{\PYGZgt{}} \PYG{n}{ansible}\PYG{o}{\PYGZhy{}}\PYG{n}{playbook} \PYG{n}{linux}\PYG{o}{\PYGZhy{}}\PYG{n}{postinstall}\PYG{o}{.}\PYG{n}{yml} \PYG{o}{\PYGZhy{}}\PYG{n}{t} \PYG{n}{lp\PYGZus{}debug} \PYG{o}{\PYGZhy{}}\PYG{n}{e} \PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{lp\PYGZus{}debug=true}\PYG{l+s+s1}{\PYGZsq{}}
\end{sphinxVerbatim}

\item {} 
Run the playbook

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{shell}\PYG{o}{\PYGZgt{}} \PYG{n}{ansible}\PYG{o}{\PYGZhy{}}\PYG{n}{playbook} \PYG{n}{linux}\PYG{o}{\PYGZhy{}}\PYG{n}{postinstall}\PYG{o}{.}\PYG{n}{yml}
\end{sphinxVerbatim}

\end{itemize}


\chapter{User’s guide}
\label{\detokenize{guide:user-s-guide}}\label{\detokenize{guide:ug}}\label{\detokenize{guide::doc}}
\begin{sphinxShadowBox}
\sphinxstyletopictitle{Table of Contents}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{guide:id2}}{\hyperref[\detokenize{guide:user-s-guide}]{\sphinxcrossref{User’s guide}}}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{guide:id3}}{\hyperref[\detokenize{guide:introduction}]{\sphinxcrossref{Introduction}}}

\item {} 
\phantomsection\label{\detokenize{guide:id4}}{\hyperref[\detokenize{guide:installation}]{\sphinxcrossref{Installation}}}

\item {} 
\phantomsection\label{\detokenize{guide:id5}}{\hyperref[\detokenize{guide:playbook}]{\sphinxcrossref{Playbook}}}

\item {} 
\phantomsection\label{\detokenize{guide:id6}}{\hyperref[\detokenize{guide:debug}]{\sphinxcrossref{Debug}}}

\item {} 
\phantomsection\label{\detokenize{guide:id7}}{\hyperref[\detokenize{guide:tags}]{\sphinxcrossref{Tags}}}

\item {} 
\phantomsection\label{\detokenize{guide:id8}}{\hyperref[\detokenize{guide:tasks}]{\sphinxcrossref{Tasks}}}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{guide:id9}}{\hyperref[\detokenize{guide:passwords}]{\sphinxcrossref{Passwords}}}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{guide:id10}}{\hyperref[\detokenize{guide:synopsis}]{\sphinxcrossref{Synopsis}}}

\item {} 
\phantomsection\label{\detokenize{guide:id11}}{\hyperref[\detokenize{guide:index-0}]{\sphinxcrossref{Passwordstore}}}

\end{itemize}

\end{itemize}

\item {} 
\phantomsection\label{\detokenize{guide:id12}}{\hyperref[\detokenize{guide:variables}]{\sphinxcrossref{Variables}}}

\item {} 
\phantomsection\label{\detokenize{guide:id13}}{\hyperref[\detokenize{guide:default-variables}]{\sphinxcrossref{Default variables}}}

\item {} 
\phantomsection\label{\detokenize{guide:id14}}{\hyperref[\detokenize{guide:best-practice}]{\sphinxcrossref{Best practice}}}

\end{itemize}

\end{itemize}
\end{sphinxShadowBox}


\section{Introduction}
\label{\detokenize{guide:introduction}}\label{\detokenize{guide:ug-introduction}}\begin{itemize}
\item {} 
Ansible role: \sphinxhref{https://galaxy.ansible.com/vbotka/linux\_postinstall/}{linux\_postinstall}

\item {} 
Supported systems: \sphinxhref{http://releases.ubuntu.com/}{Ubuntu}

\item {} 
Requirements: \sphinxhref{https://galaxy.ansible.com/vbotka/ansible\_lib}{ansible\_lib}

\textless{}TBD\textgreater{}

\end{itemize}


\section{Installation}
\label{\detokenize{guide:installation}}\label{\detokenize{guide:ug-installation}}
The most convenient way how to install an Ansible role is to use
Ansible Galaxy CLI \sphinxcode{\sphinxupquote{ansible-galaxy}}. The utility comes with the
standard Ansible package and provides the user with a simple interface
to the Ansible Galaxy’s services. For example, take a look at the
current status of the role

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} ansible\PYGZhy{}galaxy info vbotka.linux\PYGZus{}postinstall
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

and install it

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 shell\PYGZgt{} ansible\PYGZhy{}galaxy install vbotka.linux\PYGZus{}postinstall
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Install the library of tasks

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 shell\PYGZgt{} ansible\PYGZhy{}galaxy install vbotka.ansible\PYGZus{}lib
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\sphinxstrong{See also:}

\begin{itemize}
\item {} 
To install specific versions from various sources see \sphinxhref{https://galaxy.ansible.com/docs/using/installing.html}{Installing content}.

\item {} 
Take a look at other roles \sphinxcode{\sphinxupquote{shell\textgreater{} ansible-galaxy search -{-}author=vbotka}}

\end{itemize}




\section{Playbook}
\label{\detokenize{guide:playbook}}\label{\detokenize{guide:ug-playbook}}
Below is a simple playbook that calls this role at a single host
srv.example.com (2)

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
shell\PYGZgt{} cat linux\PYGZhy{}postinstall.yml
\PYGZhy{} hosts: srv.example.com
  gather\PYGZus{}facts: \PYG{n+nb}{true}
  connection: ssh
  remote\PYGZus{}user: admin
  become: yes
  become\PYGZus{}user: root
  become\PYGZus{}method: sudo
  roles:
    \PYGZhy{} vbotka.linux\PYGZus{}postinstall
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

\begin{sphinxadmonition}{note}{Note:}
\sphinxcode{\sphinxupquote{gather\_facts: true}} (3) must be set to gather facts
needed to evaluate OS-specific options of the role. For
example to install packages the variable \sphinxcode{\sphinxupquote{ansible\_os\_family}}
is needed to select the appropriate Ansible module.
\end{sphinxadmonition}


\sphinxstrong{See also:}

\begin{itemize}
\item {} 
For details see \sphinxhref{https://docs.ansible.com/ansible/latest/plugins/connection.html}{Connection Plugins} (4-5)

\item {} 
See also \sphinxhref{https://docs.ansible.com/ansible/latest/user\_guide/become.html\#understanding-privilege-escalation}{Understanding Privilege Escalation} (6-8)

\end{itemize}




\section{Debug}
\label{\detokenize{guide:debug}}\label{\detokenize{guide:ug-debug}}
To see additional debug information enable debug output in the
configuration

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{lp\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

, or set the extra variable in the command

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZus{}postinstall.yml \PYGZhy{}e \PYG{l+s+s1}{\PYGZsq{}lp\PYGZus{}debug=true\PYGZsq{}}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

\begin{sphinxadmonition}{note}{Note:}
The debug output of this role is optimized for the \sphinxstylestrong{yaml}
callback plugin. Set this plugin for example in the environment
\sphinxcode{\sphinxupquote{shell\textgreater{} export ANSIBLE\_STDOUT\_CALLBACK=yaml}}.
\end{sphinxadmonition}


\sphinxstrong{See also:}

\begin{itemize}
\item {} 
\sphinxhref{https://docs.ansible.com/ansible/latest/user\_guide/playbooks\_debugger.html}{Playbook Debugger}

\end{itemize}




\section{Tags}
\label{\detokenize{guide:tags}}\label{\detokenize{guide:ug-tags}}
The tags provide the user with a very useful tool to run selected
tasks of the role. To see what tags are available list the tags of the
role with the command

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZhy{}postinstall.yml \PYGZhy{}\PYGZhy{}list\PYGZhy{}tags

 playbook: linux\PYGZhy{}postinstall.yml

 play \PYG{c+c1}{\PYGZsh{}1 (srv.example.com): srv.example.com TAGS: []}
 TASK TAGS: \PYG{o}{[}always, lp\PYGZus{}acpi, lp\PYGZus{}acpi\PYGZus{}actions, lp\PYGZus{}acpi\PYGZus{}events, lp\PYGZus{}aliases,
 apparmor, lp\PYGZus{}apparmor\PYGZus{}disable, lp\PYGZus{}apparmor\PYGZus{}enforce, lp\PYGZus{}apparmor\PYGZus{}packages,
 lp\PYGZus{}apparmor\PYGZus{}profiles, lp\PYGZus{}apparmor\PYGZus{}service, lp\PYGZus{}authorized\PYGZus{}keys, lp\PYGZus{}auto\PYGZus{}upgrades,
 lp\PYGZus{}autofs, lp\PYGZus{}bluetooth, lp\PYGZus{}cron, lp\PYGZus{}cron\PYGZus{}tab, lp\PYGZus{}cron\PYGZus{}var, lp\PYGZus{}debsums,
 lp\PYGZus{}debsums\PYGZus{}debug, lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}conf, lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}conf,
 lp\PYGZus{}debsums\PYGZus{}packages, lp\PYGZus{}debug, lp\PYGZus{}fstab, lp\PYGZus{}gpg, lp\PYGZus{}gpsd, lp\PYGZus{}gpsd\PYGZus{}bt\PYGZus{}rfcom,
 lp\PYGZus{}gpsd\PYGZus{}config, lp\PYGZus{}gpsd\PYGZus{}group, lp\PYGZus{}gpsd\PYGZus{}packages, lp\PYGZus{}gpsd\PYGZus{}service, lp\PYGZus{}grub,
 lp\PYGZus{}hostname, lp\PYGZus{}hosts, lp\PYGZus{}iptables, lp\PYGZus{}kvm, lp\PYGZus{}kvm\PYGZus{}packages, lp\PYGZus{}latex,
 lp\PYGZus{}latex\PYGZus{}dir, lp\PYGZus{}latex\PYGZus{}labels, lp\PYGZus{}latex\PYGZus{}macros, lp\PYGZus{}latex\PYGZus{}packages, lp\PYGZus{}libvirt,
 lp\PYGZus{}libvirt\PYGZus{}conf, lp\PYGZus{}libvirt\PYGZus{}debug, lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}service,
 lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}service, lp\PYGZus{}libvirt\PYGZus{}pkg, lp\PYGZus{}lid, lp\PYGZus{}logrotate, lp\PYGZus{}modemmanager,
 lp\PYGZus{}modules, lp\PYGZus{}netplan, lp\PYGZus{}nfsd, lp\PYGZus{}nfsd\PYGZus{}exports, lp\PYGZus{}nfsd\PYGZus{}packages, lp\PYGZus{}nfsd\PYGZus{}service,
 lp\PYGZus{}packages, lp\PYGZus{}packages\PYGZus{}auto, lp\PYGZus{}packages\PYGZus{}install, lp\PYGZus{}packages\PYGZus{}remove,
 lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}postinstall, lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}preinstall,
 lp\PYGZus{}passwords, lp\PYGZus{}pm, lp\PYGZus{}postfix, lp\PYGZus{}postfix\PYGZus{}conf, lp\PYGZus{}postfix\PYGZus{}service, lp\PYGZus{}reboot,
 lp\PYGZus{}repos, lp\PYGZus{}repos\PYGZus{}keys\PYGZus{}manage, lp\PYGZus{}repos\PYGZus{}manage, lp\PYGZus{}resolvconf,
 lp\PYGZus{}resolvconf\PYGZus{}confd\PYGZus{}head, lp\PYGZus{}resolvconf\PYGZus{}debug, lp\PYGZus{}resolvconf\PYGZus{}packages,
 lp\PYGZus{}resolvconf\PYGZus{}service, lp\PYGZus{}service, lp\PYGZus{}service\PYGZus{}auto, lp\PYGZus{}service\PYGZus{}debug,
 lp\PYGZus{}service\PYGZus{}general, lp\PYGZus{}smart, lp\PYGZus{}smart\PYGZus{}conf, lp\PYGZus{}smart\PYGZus{}packages, lp\PYGZus{}smart\PYGZus{}service,
 lp\PYGZus{}speechd, lp\PYGZus{}ssh, lp\PYGZus{}sshd, lp\PYGZus{}sshd\PYGZus{}config, lp\PYGZus{}sshd\PYGZus{}service, lp\PYGZus{}sudoers, lp\PYGZus{}swap,
 lp\PYGZus{}swap\PYGZus{}fstab, lp\PYGZus{}swap\PYGZus{}swapfile, lp\PYGZus{}sysctl, lp\PYGZus{}timesyncd, lp\PYGZus{}timesyncd\PYGZus{}conf,
 lp\PYGZus{}timesyncd\PYGZus{}debug, lp\PYGZus{}timesyncd\PYGZus{}service, lp\PYGZus{}timezone, lp\PYGZus{}tlp, lp\PYGZus{}tlp\PYGZus{}conf,
 lp\PYGZus{}tlp\PYGZus{}packages, lp\PYGZus{}tlp\PYGZus{}service, lp\PYGZus{}udev, lp\PYGZus{}udev\PYGZus{}service, lp\PYGZus{}ufw, lp\PYGZus{}ufw\PYGZus{}conf,
 lp\PYGZus{}ufw\PYGZus{}debug, lp\PYGZus{}ufw\PYGZus{}packages, lp\PYGZus{}ufw\PYGZus{}reload, lp\PYGZus{}ufw\PYGZus{}reset, lp\PYGZus{}ufw\PYGZus{}service,
 lp\PYGZus{}users, lp\PYGZus{}vars, lp\PYGZus{}virtualbox, lp\PYGZus{}virtualbox\PYGZus{}keys, lp\PYGZus{}virtualbox\PYGZus{}pkg,
 lp\PYGZus{}virtualbox\PYGZus{}repos, lp\PYGZus{}virtualbox\PYGZus{}services, lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dir,
 lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}file, lp\PYGZus{}wpagui, lp\PYGZus{}wpagui\PYGZus{}disableNM, lp\PYGZus{}wpagui\PYGZus{}mask\PYGZus{}NM,
 lp\PYGZus{}wpagui\PYGZus{}packages, lp\PYGZus{}wpasupplicant, lp\PYGZus{}wpasupplicant\PYGZus{}conf, lp\PYGZus{}wpasupplicant\PYGZus{}debug,
 lp\PYGZus{}wpasupplicant\PYGZus{}packages, lp\PYGZus{}xen, lp\PYGZus{}xen\PYGZus{}default\PYGZus{}grub, lp\PYGZus{}xen\PYGZus{}global,
 lp\PYGZus{}xen\PYGZus{}packages, lp\PYGZus{}xorg, lp\PYGZus{}xorg\PYGZus{}conf, lp\PYGZus{}zeitgeist, lp\PYGZus{}zfs, lp\PYGZus{}zfs\PYGZus{}debug,
 lp\PYGZus{}zfs\PYGZus{}manage, lp\PYGZus{}zfs\PYGZus{}mountpoints, lp\PYGZus{}zfs\PYGZus{}packages\PYG{o}{]}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

For example, display the list of the variables and their values with
the tag \sphinxcode{\sphinxupquote{lp\_debug}} (when the debug is enabled \sphinxcode{\sphinxupquote{lp\_debug: true}})

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZus{}postinstall.yml \PYGZhy{}t lp\PYGZus{}debug
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

See what packages will be installed

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZus{}postinstall \PYGZhy{}t lp\PYGZus{}packages \PYGZhy{}\PYGZhy{}check
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Install packages and exit the play

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZus{}postinstall.yml \PYGZhy{}t lp\PYGZus{}packages
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\section{Tasks}
\label{\detokenize{guide:tasks}}\label{\detokenize{guide:ug-tasks}}

\subsection{Passwords}
\label{\detokenize{guide:passwords}}\label{\detokenize{guide:ug-task-passwords}}

\subsubsection{Synopsis}
\label{\detokenize{guide:synopsis}}
Manage user’s passwords. At the moment only \sphinxhref{https://www.passwordstore.org/}{passwordstore} framework is available.

\index{password@\spxentry{password}!passwordstore@\spxentry{passwordstore}}\index{module@\spxentry{module}!\_\_main\_\_@\spxentry{\_\_main\_\_}}\index{\_\_main\_\_@\spxentry{\_\_main\_\_}!module@\spxentry{module}}\index{module@\spxentry{module}!sys@\spxentry{sys}}\index{sys@\spxentry{sys}!module@\spxentry{module}}\index{module@\spxentry{module}!search path@\spxentry{search} \spxentry{path}}\index{search@\spxentry{search}!path, module@\spxentry{path}, \spxentry{module}}\index{path@\spxentry{path}!module search@\spxentry{module} \spxentry{search}}\ignorespaces 

\paragraph{Passwordstore}
\label{\detokenize{task-passwords-passwordstore:passwordstore}}\label{\detokenize{task-passwords-passwordstore:index-0}}\label{\detokenize{task-passwords-passwordstore::doc}}
Create, or update passwords of selected users at remote hosts by the
\sphinxstyleemphasis{passwordstore.org} \sphinxstyleemphasis{pass} utility. See details of the included task \sphinxhref{https://raw.githubusercontent.com/vbotka/ansible-lib/master/tasks/al\_pws\_user\_host.yml}{al\_pws\_user\_host.yml}

\begin{sphinxadmonition}{note}{Note:}
Utility \sphinxhref{https://www.passwordstore.org/}{pass} is required at controller.
\end{sphinxadmonition}


\paragraph{Example 1: Update userpass, or create it if does not exists}
\label{\detokenize{task-passwords-passwordstore-ex1:example-1-update-userpass-or-create-it-if-does-not-exists}}\label{\detokenize{task-passwords-passwordstore-ex1::doc}}
Let’s start with no passwords stored in \index{password@\spxentry{password}!passwordstore@\spxentry{passwordstore}}passwordstore for users at host \sphinxstyleemphasis{test\_01}. The command
show no results

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{pass}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{test\PYGZus{}01}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Create a playbook

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{cat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{linux\PYGZhy{}postinstall.yml}
\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{hosts}\PYG{p+pIndicator}{:} \PYG{l+lScalar+lScalarPlain}{test\PYGZus{}01}
  \PYG{l+lScalar+lScalarPlain}{become}\PYG{p+pIndicator}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{l+lScalar+lScalarPlain}{roles}\PYG{p+pIndicator}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{vbotka.linux\PYGZus{}postinstall}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Create \sphinxstyleemphasis{host\_vars/test\_01/lp-users.yml} with two users \sphinxstyleemphasis{user1} and
\sphinxstyleemphasis{user2}

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{cat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{host\PYGZus{}vars/test\PYGZus{}01/lp\PYGZhy{}users.yml}
 \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users}\PYG{p+pIndicator}{:}
   \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nv}{user1}\PYG{p+pIndicator}{,}\PYG{n+nt}{ shell}\PYG{p}{:} \PYG{n+nv}{/bin/sh}\PYG{p+pIndicator}{\PYGZcb{}}
   \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nv}{user2}\PYG{p+pIndicator}{,}\PYG{n+nt}{ shell}\PYG{p}{:} \PYG{n+nv}{/bin/bash}\PYG{p+pIndicator}{\PYGZcb{}}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Create users. This step will create these two users and configure
their login shell. Other paramteres of the Annsible module \sphinxhref{https://docs.ansible.com/ansible/latest/modules/user\_module.html}{user}
will be ommited because the only required parameter is \sphinxstyleemphasis{name}. It’s a
good idea to create one account with the login shell \sphinxstyleemphasis{/bin/sh} and use
it as Ansible \sphinxhref{https://docs.ansible.com/ansible/2.4/become.html\#become}{remote\_user}.

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ansible\PYGZhy{}playbook}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{linux\PYGZhy{}postinstall.yml}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}t}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users}
 \PYG{l+lScalar+lScalarPlain}{...}
 \PYG{l+lScalar+lScalarPlain}{TASK}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{[vbotka.linux\PYGZus{}postinstall} \PYG{p+pIndicator}{:} \PYG{n+nt}{users}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Manage}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{user}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{accounts]}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{*********}
 \PYG{n+nt}{changed}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user1)}
 \PYG{n+nt}{changed}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user2)}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Create \sphinxstyleemphasis{host\_vars/test\_01/lp-passwords.yml}

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{cat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{host\PYGZus{}vars/test\PYGZus{}01/lp\PYGZhy{}passwords.yml}
 \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords}\PYG{p+pIndicator}{:} \PYG{l+lScalar+lScalarPlain}{true}
 \PYG{n+nt}{lp\PYGZus{}passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
 \PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
 \PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}overwrite}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Create passwords. This step will use \sphinxstyleemphasis{passwordstore} to create the passwords and configure them. New passwords will be created only if allowed by the configuration of \sphinxstyleemphasis{lp\_passwordstore\_create}. We set this variable to \sphinxstyleemphasis{True} in this command but keep it \sphinxstyleemphasis{False} in the configuration to keep the passwords once created. The value of \sphinxstyleemphasis{lp\_passwordstore\_overwrite} is \sphinxstyleemphasis{False}. New passwords will be assigned to the users if no passwords have been assigned to the users before. To change the passwords in the future set both variables \sphinxstyleemphasis{True} on the commandline.

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ansible\PYGZhy{}playbook}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{linux\PYGZhy{}postinstall.yml}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}t}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZbs{}}
                                       \PYG{l+lScalar+lScalarPlain}{\PYGZhy{}e}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZsq{}lp\PYGZus{}passwordstore\PYGZus{}create=True\PYGZsq{}}
\PYG{n+nn}{...}

\PYG{l+lScalar+lScalarPlain}{TASK}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{[vbotka.ansible\PYGZus{}lib} \PYG{p+pIndicator}{:} \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}user\PYGZus{}host}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Retrieve,}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{update}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{...]}
\PYG{n+nt}{ok}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user1)}
\PYG{n+nt}{ok}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user2)}
\PYG{n+nn}{...}
\PYG{l+lScalar+lScalarPlain}{TASK}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{[vbotka.linux\PYGZus{}postinstall} \PYG{p+pIndicator}{:} \PYG{n+nt}{users}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Manage}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{user}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{accounts]}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{**********}
\PYG{n+nt}{changed}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user1)}
\PYG{n+nt}{changed}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user2)}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

The command is idempotent

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZhy{}postinstall.yml \PYGZhy{}t lp\PYGZus{}passwords
...
PLAY RECAP *************************************************************
test\PYGZus{}01: \PYG{n+nv}{ok}\PYG{o}{=}\PYG{l+m}{18} \PYG{n+nv}{changed}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{unreachable}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{failed}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{skipped}\PYG{o}{=}\PYG{l+m}{20} \PYG{n+nv}{rescued}\PYG{o}{=}\PYG{l+m}{0} ...
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Show the passwords stored in \sphinxstyleemphasis{passwordstore} at the controller

\fvset{hllines={, 1, 6, 10,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} pass test\PYGZus{}01
test\PYGZus{}01
├── user1
└── user2

shell\PYGZgt{} pass test\PYGZus{}01/user1
1rLy0eVpJiTpzj\PYGZhy{}4
lookup\PYGZus{}pass: First generated by ansible on \PYG{l+m}{01}/07/2020 \PYG{l+m}{16}:59:00

shell\PYGZgt{} pass test\PYGZus{}01/user2
u4FLTCkKOHAyJxkg
lookup\PYGZus{}pass: First generated by ansible on \PYG{l+m}{01}/07/2020 \PYG{l+m}{16}:59:00
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Show the \sphinxstyleemphasis{passwordstore} log at the controller

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} \PYG{n+nb}{cd} \PYGZti{}/.password\PYGZhy{}store
shell\PYGZgt{} git log

commit 61bb8bcd7c2a359f53c8b3d4bacb8854b4dd9f89 \PYG{o}{(}HEAD \PYGZhy{}\PYGZgt{} master\PYG{o}{)}
Author: Vladimir Botka \PYGZlt{}vbotka@gmail.com\PYGZgt{}
Date:   Wed Jul \PYG{l+m}{1} \PYG{l+m}{16}:59:00 \PYG{l+m}{2020} +0200

    Add given password \PYG{k}{for} test\PYGZus{}01/user2 to store.

commit 97b23a5221e721fb892d739b2817923a6db8614b
Author: Vladimir Botka \PYGZlt{}vbotka@gmail.com\PYGZgt{}
Date:   Wed Jul \PYG{l+m}{1} \PYG{l+m}{16}:59:00 \PYG{l+m}{2020} +0200

    Add given password \PYG{k}{for} test\PYGZus{}01/user1 to store.
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Show the created users at the remote host

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
test\PYGZus{}01\PYGZgt{} grep user /etc/passwd
user1:x:1003:1003::/home/user1:/bin/sh
user2:x:1004:1004::/home/user2:/bin/bash
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Example 2: Update passwords submitted in the variable}
\label{\detokenize{task-passwords-passwordstore-ex2:example-2-update-passwords-submitted-in-the-variable}}\label{\detokenize{task-passwords-passwordstore-ex2::doc}}
Update passwords of users at host \sphinxstyleemphasis{test\_01}. Use the same playbook and
variables as in Example 1. Update the variable \sphinxstyleemphasis{lp\_users} with the new
passwords stored in the attribute \sphinxcode{\sphinxupquote{userpass}}

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{cat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{host\PYGZus{}vars/test\PYGZus{}01/lp\PYGZhy{}users.yml}
 \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users}\PYG{p+pIndicator}{:}
   \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nv}{user1}\PYG{p+pIndicator}{,}\PYG{n+nt}{ shell}\PYG{p}{:} \PYG{n+nv}{/bin/sh}\PYG{p+pIndicator}{,}\PYG{n+nt}{ userpass}\PYG{p}{:} \PYG{n+nv}{user1\PYGZus{}password}\PYG{p+pIndicator}{\PYGZcb{}}
   \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nv}{user2}\PYG{p+pIndicator}{,}\PYG{n+nt}{ shell}\PYG{p}{:} \PYG{n+nv}{/bin/bash}\PYG{p+pIndicator}{,}\PYG{n+nt}{ userpass}\PYG{p}{:} \PYG{n+nv}{user2\PYGZus{}password}\PYG{p+pIndicator}{\PYGZcb{}}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Update the passwords

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZhy{}postinstall.yml \PYGZhy{}t lp\PYGZus{}passwords \PYG{l+s+se}{\PYGZbs{}}
                                    \PYGZhy{}e \PYG{l+s+s1}{\PYGZsq{}lp\PYGZus{}passwordstore\PYGZus{}overwrite=True\PYGZsq{}}
...
TASK \PYG{o}{[}vbotka.linux\PYGZus{}postinstall : users: Manage user accounts\PYG{o}{]} **********
changed: \PYG{o}{[}test\PYGZus{}01\PYG{o}{]} \PYG{o}{=}\PYGZgt{} \PYG{o}{(}\PYG{n+nv}{item}\PYG{o}{=}user1\PYG{o}{)}
changed: \PYG{o}{[}test\PYGZus{}01\PYG{o}{]} \PYG{o}{=}\PYGZgt{} \PYG{o}{(}\PYG{n+nv}{item}\PYG{o}{=}user2\PYG{o}{)}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

The command is idempotent

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZhy{}postinstall.yml \PYGZhy{}t lp\PYGZus{}passwords \PYG{l+s+se}{\PYGZbs{}}
                                    \PYGZhy{}e \PYG{l+s+s1}{\PYGZsq{}lp\PYGZus{}passwordstore\PYGZus{}overwrite=True\PYGZsq{}}
...

PLAY RECAP *************************************************************
test\PYGZus{}01: \PYG{n+nv}{ok}\PYG{o}{=}\PYG{l+m}{18} \PYG{n+nv}{changed}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{unreachable}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{failed}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{skipped}\PYG{o}{=}\PYG{l+m}{20} \PYG{n+nv}{rescued}\PYG{o}{=}\PYG{l+m}{0} ...
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Show the passwords stored in \sphinxstyleemphasis{passwordstore} at the controller

\fvset{hllines={, 1, 6, 10,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} pass test\PYGZus{}01
test\PYGZus{}01
├── user1
└── user2

shell\PYGZgt{} pass test\PYGZus{}01/user1
user1\PYGZus{}password
lookup\PYGZus{}pass: First generated by ansible on \PYG{l+m}{01}/07/2020 \PYG{l+m}{16}:59:00

shell\PYGZgt{} pass test\PYGZus{}01/user2
user2\PYGZus{}password
lookup\PYGZus{}pass: First generated by ansible on \PYG{l+m}{01}/07/2020 \PYG{l+m}{16}:59:00
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

See the \sphinxstyleemphasis{passwordstore} log at the controller \sphinxcode{\sphinxupquote{git log}} and test the
new passwords at \sphinxstyleemphasis{test\_01}.
\phantomsection\label{\detokenize{guide:ug-task-passwords-passwordstore}}
\index{password@\spxentry{password}!passwordstore@\spxentry{passwordstore}}\index{module@\spxentry{module}!\_\_main\_\_@\spxentry{\_\_main\_\_}}\index{\_\_main\_\_@\spxentry{\_\_main\_\_}!module@\spxentry{module}}\index{module@\spxentry{module}!sys@\spxentry{sys}}\index{sys@\spxentry{sys}!module@\spxentry{module}}\index{module@\spxentry{module}!search path@\spxentry{search} \spxentry{path}}\index{search@\spxentry{search}!path, module@\spxentry{path}, \spxentry{module}}\index{path@\spxentry{path}!module search@\spxentry{module} \spxentry{search}}\ignorespaces 

\subsubsection{Passwordstore}
\label{\detokenize{guide:index-0}}\label{\detokenize{guide:id1}}
Create, or update passwords of selected users at remote hosts by the
\sphinxstyleemphasis{passwordstore.org} \sphinxstyleemphasis{pass} utility. See details of the included task \sphinxhref{https://raw.githubusercontent.com/vbotka/ansible-lib/master/tasks/al\_pws\_user\_host.yml}{al\_pws\_user\_host.yml}

\begin{sphinxadmonition}{note}{Note:}
Utility \sphinxhref{https://www.passwordstore.org/}{pass} is required at controller.
\end{sphinxadmonition}


\paragraph{Example 1: Update userpass, or create it if does not exists}
\label{\detokenize{guide:example-1-update-userpass-or-create-it-if-does-not-exists}}\label{\detokenize{guide:ug-task-passwords-passwordstore-ex1}}
Let’s start with no passwords stored in \index{password@\spxentry{password}!passwordstore@\spxentry{passwordstore}}passwordstore for users at host \sphinxstyleemphasis{test\_01}. The command
show no results

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{pass}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{test\PYGZus{}01}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Create a playbook

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{cat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{linux\PYGZhy{}postinstall.yml}
\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{hosts}\PYG{p+pIndicator}{:} \PYG{l+lScalar+lScalarPlain}{test\PYGZus{}01}
  \PYG{l+lScalar+lScalarPlain}{become}\PYG{p+pIndicator}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{l+lScalar+lScalarPlain}{roles}\PYG{p+pIndicator}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{vbotka.linux\PYGZus{}postinstall}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Create \sphinxstyleemphasis{host\_vars/test\_01/lp-users.yml} with two users \sphinxstyleemphasis{user1} and
\sphinxstyleemphasis{user2}

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{cat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{host\PYGZus{}vars/test\PYGZus{}01/lp\PYGZhy{}users.yml}
 \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users}\PYG{p+pIndicator}{:}
   \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nv}{user1}\PYG{p+pIndicator}{,}\PYG{n+nt}{ shell}\PYG{p}{:} \PYG{n+nv}{/bin/sh}\PYG{p+pIndicator}{\PYGZcb{}}
   \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nv}{user2}\PYG{p+pIndicator}{,}\PYG{n+nt}{ shell}\PYG{p}{:} \PYG{n+nv}{/bin/bash}\PYG{p+pIndicator}{\PYGZcb{}}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Create users. This step will create these two users and configure
their login shell. Other paramteres of the Annsible module \sphinxhref{https://docs.ansible.com/ansible/latest/modules/user\_module.html}{user}
will be ommited because the only required parameter is \sphinxstyleemphasis{name}. It’s a
good idea to create one account with the login shell \sphinxstyleemphasis{/bin/sh} and use
it as Ansible \sphinxhref{https://docs.ansible.com/ansible/2.4/become.html\#become}{remote\_user}.

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ansible\PYGZhy{}playbook}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{linux\PYGZhy{}postinstall.yml}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}t}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users}
 \PYG{l+lScalar+lScalarPlain}{...}
 \PYG{l+lScalar+lScalarPlain}{TASK}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{[vbotka.linux\PYGZus{}postinstall} \PYG{p+pIndicator}{:} \PYG{n+nt}{users}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Manage}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{user}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{accounts]}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{*********}
 \PYG{n+nt}{changed}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user1)}
 \PYG{n+nt}{changed}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user2)}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Create \sphinxstyleemphasis{host\_vars/test\_01/lp-passwords.yml}

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{cat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{host\PYGZus{}vars/test\PYGZus{}01/lp\PYGZhy{}passwords.yml}
 \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords}\PYG{p+pIndicator}{:} \PYG{l+lScalar+lScalarPlain}{true}
 \PYG{n+nt}{lp\PYGZus{}passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
 \PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
 \PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}overwrite}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Create passwords. This step will use \sphinxstyleemphasis{passwordstore} to create the passwords and configure them. New passwords will be created only if allowed by the configuration of \sphinxstyleemphasis{lp\_passwordstore\_create}. We set this variable to \sphinxstyleemphasis{True} in this command but keep it \sphinxstyleemphasis{False} in the configuration to keep the passwords once created. The value of \sphinxstyleemphasis{lp\_passwordstore\_overwrite} is \sphinxstyleemphasis{False}. New passwords will be assigned to the users if no passwords have been assigned to the users before. To change the passwords in the future set both variables \sphinxstyleemphasis{True} on the commandline.

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ansible\PYGZhy{}playbook}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{linux\PYGZhy{}postinstall.yml}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}t}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZbs{}}
                                       \PYG{l+lScalar+lScalarPlain}{\PYGZhy{}e}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZsq{}lp\PYGZus{}passwordstore\PYGZus{}create=True\PYGZsq{}}
\PYG{n+nn}{...}

\PYG{l+lScalar+lScalarPlain}{TASK}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{[vbotka.ansible\PYGZus{}lib} \PYG{p+pIndicator}{:} \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}user\PYGZus{}host}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Retrieve,}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{update}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{...]}
\PYG{n+nt}{ok}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user1)}
\PYG{n+nt}{ok}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user2)}
\PYG{n+nn}{...}
\PYG{l+lScalar+lScalarPlain}{TASK}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{[vbotka.linux\PYGZus{}postinstall} \PYG{p+pIndicator}{:} \PYG{n+nt}{users}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Manage}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{user}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{accounts]}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{**********}
\PYG{n+nt}{changed}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user1)}
\PYG{n+nt}{changed}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{test\PYGZus{}01}\PYG{p+pIndicator}{]} \PYG{l+lScalar+lScalarPlain}{=\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{(item=user2)}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

The command is idempotent

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZhy{}postinstall.yml \PYGZhy{}t lp\PYGZus{}passwords
...
PLAY RECAP *************************************************************
test\PYGZus{}01: \PYG{n+nv}{ok}\PYG{o}{=}\PYG{l+m}{18} \PYG{n+nv}{changed}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{unreachable}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{failed}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{skipped}\PYG{o}{=}\PYG{l+m}{20} \PYG{n+nv}{rescued}\PYG{o}{=}\PYG{l+m}{0} ...
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Show the passwords stored in \sphinxstyleemphasis{passwordstore} at the controller

\fvset{hllines={, 1, 6, 10,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} pass test\PYGZus{}01
test\PYGZus{}01
├── user1
└── user2

shell\PYGZgt{} pass test\PYGZus{}01/user1
1rLy0eVpJiTpzj\PYGZhy{}4
lookup\PYGZus{}pass: First generated by ansible on \PYG{l+m}{01}/07/2020 \PYG{l+m}{16}:59:00

shell\PYGZgt{} pass test\PYGZus{}01/user2
u4FLTCkKOHAyJxkg
lookup\PYGZus{}pass: First generated by ansible on \PYG{l+m}{01}/07/2020 \PYG{l+m}{16}:59:00
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Show the \sphinxstyleemphasis{passwordstore} log at the controller

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} \PYG{n+nb}{cd} \PYGZti{}/.password\PYGZhy{}store
shell\PYGZgt{} git log

commit 61bb8bcd7c2a359f53c8b3d4bacb8854b4dd9f89 \PYG{o}{(}HEAD \PYGZhy{}\PYGZgt{} master\PYG{o}{)}
Author: Vladimir Botka \PYGZlt{}vbotka@gmail.com\PYGZgt{}
Date:   Wed Jul \PYG{l+m}{1} \PYG{l+m}{16}:59:00 \PYG{l+m}{2020} +0200

    Add given password \PYG{k}{for} test\PYGZus{}01/user2 to store.

commit 97b23a5221e721fb892d739b2817923a6db8614b
Author: Vladimir Botka \PYGZlt{}vbotka@gmail.com\PYGZgt{}
Date:   Wed Jul \PYG{l+m}{1} \PYG{l+m}{16}:59:00 \PYG{l+m}{2020} +0200

    Add given password \PYG{k}{for} test\PYGZus{}01/user1 to store.
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Show the created users at the remote host

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
test\PYGZus{}01\PYGZgt{} grep user /etc/passwd
user1:x:1003:1003::/home/user1:/bin/sh
user2:x:1004:1004::/home/user2:/bin/bash
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Example 2: Update passwords submitted in the variable}
\label{\detokenize{guide:example-2-update-passwords-submitted-in-the-variable}}\label{\detokenize{guide:ug-task-passwords-passwordstore-ex2}}
Update passwords of users at host \sphinxstyleemphasis{test\_01}. Use the same playbook and
variables as in Example 1. Update the variable \sphinxstyleemphasis{lp\_users} with the new
passwords stored in the attribute \sphinxcode{\sphinxupquote{userpass}}

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 \PYG{l+lScalar+lScalarPlain}{shell\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{cat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{host\PYGZus{}vars/test\PYGZus{}01/lp\PYGZhy{}users.yml}
 \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users}\PYG{p+pIndicator}{:}
   \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nv}{user1}\PYG{p+pIndicator}{,}\PYG{n+nt}{ shell}\PYG{p}{:} \PYG{n+nv}{/bin/sh}\PYG{p+pIndicator}{,}\PYG{n+nt}{ userpass}\PYG{p}{:} \PYG{n+nv}{user1\PYGZus{}password}\PYG{p+pIndicator}{\PYGZcb{}}
   \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nv}{user2}\PYG{p+pIndicator}{,}\PYG{n+nt}{ shell}\PYG{p}{:} \PYG{n+nv}{/bin/bash}\PYG{p+pIndicator}{,}\PYG{n+nt}{ userpass}\PYG{p}{:} \PYG{n+nv}{user2\PYGZus{}password}\PYG{p+pIndicator}{\PYGZcb{}}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Update the passwords

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZhy{}postinstall.yml \PYGZhy{}t lp\PYGZus{}passwords \PYG{l+s+se}{\PYGZbs{}}
                                    \PYGZhy{}e \PYG{l+s+s1}{\PYGZsq{}lp\PYGZus{}passwordstore\PYGZus{}overwrite=True\PYGZsq{}}
...
TASK \PYG{o}{[}vbotka.linux\PYGZus{}postinstall : users: Manage user accounts\PYG{o}{]} **********
changed: \PYG{o}{[}test\PYGZus{}01\PYG{o}{]} \PYG{o}{=}\PYGZgt{} \PYG{o}{(}\PYG{n+nv}{item}\PYG{o}{=}user1\PYG{o}{)}
changed: \PYG{o}{[}test\PYGZus{}01\PYG{o}{]} \PYG{o}{=}\PYGZgt{} \PYG{o}{(}\PYG{n+nv}{item}\PYG{o}{=}user2\PYG{o}{)}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

The command is idempotent

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZhy{}postinstall.yml \PYGZhy{}t lp\PYGZus{}passwords \PYG{l+s+se}{\PYGZbs{}}
                                    \PYGZhy{}e \PYG{l+s+s1}{\PYGZsq{}lp\PYGZus{}passwordstore\PYGZus{}overwrite=True\PYGZsq{}}
...

PLAY RECAP *************************************************************
test\PYGZus{}01: \PYG{n+nv}{ok}\PYG{o}{=}\PYG{l+m}{18} \PYG{n+nv}{changed}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{unreachable}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{failed}\PYG{o}{=}\PYG{l+m}{0} \PYG{n+nv}{skipped}\PYG{o}{=}\PYG{l+m}{20} \PYG{n+nv}{rescued}\PYG{o}{=}\PYG{l+m}{0} ...
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Show the passwords stored in \sphinxstyleemphasis{passwordstore} at the controller

\fvset{hllines={, 1, 6, 10,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} pass test\PYGZus{}01
test\PYGZus{}01
├── user1
└── user2

shell\PYGZgt{} pass test\PYGZus{}01/user1
user1\PYGZus{}password
lookup\PYGZus{}pass: First generated by ansible on \PYG{l+m}{01}/07/2020 \PYG{l+m}{16}:59:00

shell\PYGZgt{} pass test\PYGZus{}01/user2
user2\PYGZus{}password
lookup\PYGZus{}pass: First generated by ansible on \PYG{l+m}{01}/07/2020 \PYG{l+m}{16}:59:00
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

See the \sphinxstyleemphasis{passwordstore} log at the controller \sphinxcode{\sphinxupquote{git log}} and test the
new passwords at \sphinxstyleemphasis{test\_01}.


\section{Variables}
\label{\detokenize{guide:variables}}\label{\detokenize{guide:ug-vars}}
In this chapter we describe role’s default variables stored in the
directory \sphinxstylestrong{defaults}.


\sphinxstrong{See also:}

\begin{itemize}
\item {} 
\sphinxhref{https://docs.ansible.com/ansible/latest/user\_guide/playbooks\_variables.html\#variable-precedence-where-should-i-put-a-variable}{Ansible variable precedence: Where should I put a variable?}

\end{itemize}




\section{Default variables}
\label{\detokenize{guide:default-variables}}\label{\detokenize{guide:ug-defaults}}\begin{quote}

\textless{}TBD\textgreater{}
\end{quote}

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/defaults/main.yml}{defaults/main.yml}{]}

\fvset{hllines={, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZus{}postinstall defaults}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} Put distro and flavor specific vars and overrides to the vars}
\PYG{c+c1}{\PYGZsh{} directory.}

\PYG{n+nt}{lp\PYGZus{}hostname}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}fqdn}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZdq{}}

\PYG{n+nt}{lp\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}

\PYG{n+nt}{lp\PYGZus{}install\PYGZus{}retries}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{5}
\PYG{n+nt}{lp\PYGZus{}install\PYGZus{}delay}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{2}

\PYG{n+nt}{lp\PYGZus{}repos\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}repos}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}repos\PYGZus{}keys}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}packages\PYGZus{}auto}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}packages\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}packages\PYGZus{}install}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}packages\PYGZus{}remove}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}preinstall}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}postinstall}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}packages\PYGZus{}autoremove}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}

\PYG{n+nt}{lp\PYGZus{}package\PYGZus{}state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{present}               \PYG{c+c1}{\PYGZsh{} apt and yum support \PYGZdq{}latest\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}package\PYGZus{}state\PYGZus{}remove}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{absent}         \PYG{c+c1}{\PYGZsh{} see \PYGZdq{}remove\PYGZdq{} vs. \PYGZdq{}purge\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}package\PYGZus{}install\PYGZus{}dryrun}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}

\PYG{n+nt}{lp\PYGZus{}modules\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}modules}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}modules\PYGZus{}blacklist}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}modules\PYGZus{}blacklist\PYGZus{}path}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/modprobe.d}
\PYG{n+nt}{lp\PYGZus{}modules\PYGZus{}options}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}modules\PYGZus{}options\PYGZus{}path}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/modprobe.d}

\PYG{n+nt}{lp\PYGZus{}sysctl\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}sysctl\PYGZus{}vars}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}udev}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/udev/rules.d}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}template}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{udev\PYGZhy{}rules.j2}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}rules}\PYG{p}{:} \PYG{p+pIndicator}{\PYGZob{}}\PYG{p+pIndicator}{\PYGZcb{}}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}template}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{persistent\PYGZhy{}net.rules.j2}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}rules\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{70\PYGZhy{}persistent\PYGZhy{}net.rules}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}rules}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}name\PYGZus{}rules\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{71\PYGZhy{}hci\PYGZhy{}name.rules}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}name\PYGZus{}rules}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}run\PYGZus{}rules\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{72\PYGZhy{}hci\PYGZhy{}run.rules}
\PYG{n+nt}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}run\PYGZus{}rules}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}wpagui}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}wpagui\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}wpagui\PYGZus{}nm\PYGZus{}override}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{manual}

\PYG{n+nt}{lp\PYGZus{}iptables}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}iptables\PYGZus{}type}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{default}
\PYG{n+nt}{lp\PYGZus{}iptables\PYGZus{}wan\PYGZus{}if}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{eth0}
\PYG{n+nt}{lp\PYGZus{}iptables\PYGZus{}lan\PYGZus{}if}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{eth1}
\PYG{n+nt}{lp\PYGZus{}iptables\PYGZus{}lan}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{10.1.0.0/24}
\PYG{n+nt}{lp\PYGZus{}iptables\PYGZus{}INPUT\PYGZus{}if}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}iptables\PYGZus{}INPUT\PYGZus{}net}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}users\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}users}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}users\PYGZus{}groups}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}passwords}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}passwords\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}passwords\PYGZus{}debug\PYGZus{}classified}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}passwords\PYGZus{}fail\PYGZus{}gracefully}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}password\PYGZus{}update\PYGZus{}password}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{always}
\PYG{n+nt}{lp\PYGZus{}passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}install}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}backup}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}length}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{16}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}nosymbols}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}overwrite}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{\PYGZti{}/.password\PYGZhy{}store}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}returnall}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}subkey}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{password}
\PYG{n+nt}{lp\PYGZus{}passwordstore\PYGZus{}idempotent\PYGZus{}password\PYGZus{}hash}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}

\PYG{n+nt}{lp\PYGZus{}aliases}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}aliases\PYGZus{}config}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}authorized\PYGZus{}key}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}hosts\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}hosts}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}grub}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}grub\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}grub\PYGZus{}default}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}kvm}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}kvm\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}

\PYG{n+nt}{lp\PYGZus{}xen}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}xen\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}xen\PYGZus{}dom0\PYGZus{}mem}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{512M}
\PYG{n+nt}{lp\PYGZus{}xen\PYGZus{}dom0\PYGZus{}mem\PYGZus{}max}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{512M}
\PYG{n+nt}{lp\PYGZus{}xen\PYGZus{}XEN\PYGZus{}OVERRIDE\PYGZus{}GRUB\PYGZus{}DEFAULT}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{0}
\PYG{n+nt}{lp\PYGZus{}xen\PYGZus{}default\PYGZus{}grub\PYGZus{}conf}\PYG{p}{:}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{key}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{GRUB\PYGZus{}CMDLINE\PYGZus{}XEN\PYGZus{}DEFAULT}
    \PYG{n+nt}{value}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZbs{}\PYGZdq{}}\PYG{l+s}{dom0\PYGZus{}mem=\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}xen\PYGZus{}dom0\PYGZus{}mem}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{},}\PYG{n+nv}{ }\PYG{l+s}{max:\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}xen\PYGZus{}dom0\PYGZus{}mem\PYGZus{}max}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZdq{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{key}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{XEN\PYGZus{}OVERRIDE\PYGZus{}GRUB\PYGZus{}DEFAULT}
    \PYG{n+nt}{value}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}xen\PYGZus{}XEN\PYGZus{}OVERRIDE\PYGZus{}GRUB\PYGZus{}DEFAULT}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}xen\PYGZus{}global}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}latex}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}latex\PYGZus{}download\PYGZus{}timeout}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{20}
\PYG{n+nt}{lp\PYGZus{}latex\PYGZus{}macros}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}latex\PYGZus{}get\PYGZus{}url\PYGZus{}ignore\PYGZus{}errors}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}

\PYG{n+nt}{lp\PYGZus{}auto\PYGZus{}upgrades}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}auto\PYGZus{}upgrades\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}

\PYG{n+nt}{lp\PYGZus{}auto\PYGZus{}upgrades\PYGZus{}Update\PYGZus{}Package\PYGZus{}Lists}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{0}
\PYG{n+nt}{lp\PYGZus{}auto\PYGZus{}upgrades\PYGZus{}Unattended\PYGZus{}Upgrade}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{0}

\PYG{n+nt}{lp\PYGZus{}pm}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}pm\PYGZus{}sleepd}\PYG{p}{:} \PYG{p+pIndicator}{\PYGZob{}}\PYG{p+pIndicator}{\PYGZcb{}}

\PYG{n+nt}{lp\PYGZus{}ssh}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}ssh\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}ssh\PYGZus{}config}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}sshd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}sshd\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}sshd\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}sshd\PYGZus{}config}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}bluetooth}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}bluetooth\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}bluetooth\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}bluetooth\PYGZus{}main\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}xorg\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}xorg\PYGZus{}conf\PYGZus{}dir}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/usr/share/X11/xorg.conf.d}
\PYG{n+nt}{lp\PYGZus{}xorg\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}cron\PYGZus{}tab}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}cron\PYGZus{}var}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}modemmanager}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}modemmanager\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}modemmanager\PYGZus{}override}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZdq{}}

\PYG{n+nt}{lp\PYGZus{}gpsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}gpsd\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}gpsd\PYGZus{}START\PYGZus{}DAEMON}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{true}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}gpsd\PYGZus{}USBAUTO}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{true}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}gpsd\PYGZus{}DEVICES}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/dev/rfcomm0}
\PYG{n+nt}{lp\PYGZus{}gpsd\PYGZus{}GPSD\PYGZus{}OPTIONS}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{\PYGZhy{}b}
\PYG{n+nt}{lp\PYGZus{}gpsd\PYGZus{}bt\PYGZus{}rfcomm}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}postfix}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}postfix\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}postfix\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}postfix\PYGZus{}main\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}smart}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}smart\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}smart\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}smart\PYGZus{}packages}\PYG{p}{:}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{smartmontools}
\PYG{n+nt}{lp\PYGZus{}smart\PYGZus{}service}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{smartmontools}
\PYG{n+nt}{lp\PYGZus{}smart\PYGZus{}devicescan}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/smartd.conf}
\PYG{n+nt}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}smart\PYGZus{}devices}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}virtualbox}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}virtualbox\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}virtualbox\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}virtualbox\PYGZus{}ignore\PYGZus{}errors}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}virtualbox\PYGZus{}version}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{5.2}
\PYG{n+nt}{lp\PYGZus{}virtualbox\PYGZus{}keys}\PYG{p}{:}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{https://www.virtualbox.org/download/oracle\PYGZus{}vbox\PYGZus{}2016.asc}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{https://www.virtualbox.org/download/oracle\PYGZus{}vbox.asc}
\PYG{n+nt}{lp\PYGZus{}virtualbox\PYGZus{}packages}\PYG{p}{:}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{virtualbox\PYGZhy{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}virtualbox\PYGZus{}version}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{n+nt}{lp\PYGZus{}zeitgeist}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}

\PYG{n+nt}{lp\PYGZus{}lid}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}lid\PYGZus{}logind\PYGZus{}conf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/systemd/logind.conf}
\PYG{n+nt}{lp\PYGZus{}lid\PYGZus{}logind\PYGZus{}conf\PYGZus{}vars}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}lid\PYGZus{}upower\PYGZus{}conf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/UPower/UPower.conf}
\PYG{n+nt}{lp\PYGZus{}lid\PYGZus{}upower\PYGZus{}conf\PYGZus{}vars}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}acpi}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}acpi\PYGZus{}dir}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/acpi}
\PYG{n+nt}{lp\PYGZus{}acpi\PYGZus{}owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}acpi\PYGZus{}group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}acpi\PYGZus{}event\PYGZus{}mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}acpi\PYGZus{}action\PYGZus{}mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0755}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}acpi\PYGZus{}events}\PYG{p}{:} \PYG{p+pIndicator}{\PYGZob{}}\PYG{p+pIndicator}{\PYGZcb{}}
\PYG{n+nt}{lp\PYGZus{}acpi\PYGZus{}actions}\PYG{p}{:} \PYG{p+pIndicator}{\PYGZob{}}\PYG{p+pIndicator}{\PYGZcb{}}

\PYG{n+nt}{lp\PYGZus{}speechd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}speechd\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}speechd\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}

\PYG{n+nt}{lp\PYGZus{}sudoers\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}sudoers\PYGZus{}owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}sudoers\PYGZus{}group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}sudoers\PYGZus{}mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0440}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}sudoers\PYGZus{}conf}\PYG{p}{:}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZsh{}includedir}\PYG{n+nv}{ }\PYG{l+s}{/etc/sudoers.d}\PYG{l+s}{\PYGZdq{}}\PYG{p+pIndicator}{,}\PYG{n+nt}{ state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{present}\PYG{l+s}{\PYGZdq{}}\PYG{p+pIndicator}{\PYGZcb{}}
\PYG{n+nt}{lp\PYGZus{}sudoers\PYGZus{}01}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}nfsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}nfsd\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}nfsd\PYGZus{}exports}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}netplan}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}netplan\PYGZus{}root}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/netplan}
\PYG{n+nt}{lp\PYGZus{}netplan\PYGZus{}owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}netplan\PYGZus{}group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}netplan\PYGZus{}version}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{2}
\PYG{n+nt}{lp\PYGZus{}netplan\PYGZus{}renderer}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{NetworkManager}
\PYG{n+nt}{lp\PYGZus{}netplan\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}apparmor\PYGZus{}disable}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}apparmor\PYGZus{}complain}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}apparmor\PYGZus{}enforce}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}swap}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}swap\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}swap\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}

\PYG{n+nt}{lp\PYGZus{}timezone}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}timezone\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}timezone\PYGZus{}zoneinfo}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{UTC}

\PYG{n+nt}{lp\PYGZus{}timesyncd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}timesyncd\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}timesyncd\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}timesyncd\PYGZus{}NTP}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}timesyncd\PYGZus{}FallbackNTP}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ntp.ubuntu.com}
\PYG{n+nt}{lp\PYGZus{}timesyncd\PYGZus{}RootDistanceMaxSec}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{5}
\PYG{n+nt}{lp\PYGZus{}timesyncd\PYGZus{}PollIntervalMinSec}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{32}
\PYG{n+nt}{lp\PYGZus{}timesyncd\PYGZus{}PollIntervalMaxSec}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{2048}

\PYG{n+nt}{lp\PYGZus{}gpg}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}gpg\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}gpg\PYGZus{}install}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}gpg\PYGZus{}packages\PYGZus{}extra}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}gpg\PYGZus{}conf\PYGZus{}default}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}gpg\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}gpg\PYGZus{}agent\PYGZus{}conf\PYGZus{}default}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}gpg\PYGZus{}agent\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}gpg\PYGZus{}dirmngr\PYGZus{}conf\PYGZus{}default}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}gpg\PYGZus{}dirmngr\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}wpasupplicant}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}wpasupplicant\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}wpasupplicant\PYGZus{}debug\PYGZus{}classified}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}only}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0600}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}dir}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/wpa\PYGZus{}supplicant}
\PYG{n+nt}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{wpa\PYGZus{}supplicant.conf}
\PYG{n+nt}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}global}\PYG{p}{:}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{key}\PYG{p}{:} \PYG{n+nv}{ctrl\PYGZus{}interface}\PYG{p+pIndicator}{,}\PYG{n+nt}{ value}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}ctrl\PYGZus{}interface}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}\PYG{p+pIndicator}{\PYGZcb{}}
\PYG{n+nt}{lp\PYGZus{}wpasupplicant\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dir}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/root/bin}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}file}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/wpa\PYGZus{}action.sh}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0770}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dhclient}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}dhclient}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}pidfile}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/var/run/dhclient.\PYGZdl{}ifname.pid}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}options\PYGZus{}connect}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZhy{}4}\PYG{n+nv}{ }\PYG{l+s}{\PYGZhy{}nw}\PYG{n+nv}{ }\PYG{l+s}{\PYGZhy{}pf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZdl{}pidfile}\PYG{n+nv}{ }\PYG{l+s}{\PYGZhy{}v}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}options\PYGZus{}disconnect}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZhy{}4}\PYG{n+nv}{ }\PYG{l+s}{\PYGZhy{}r}\PYG{n+nv}{ }\PYG{l+s}{\PYGZhy{}pf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZdl{}pidfile}\PYG{n+nv}{ }\PYG{l+s}{\PYGZhy{}v}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}logfile}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{/tmp/wpa\PYGZus{}action.\PYGZdl{}ifname}\PYG{l+s}{\PYGZdq{}}

\PYG{n+nt}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/logrotate.conf}
\PYG{n+nt}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}dir}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/logrotate.d}
\PYG{n+nt}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}lines}\PYG{p}{:}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{include}\PYG{n+nv}{ }\PYG{l+s}{/etc/logrotate.d}\PYG{l+s}{\PYGZdq{}}\PYG{p+pIndicator}{,}\PYG{n+nt}{ state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{present}\PYG{l+s}{\PYGZdq{}}\PYG{p+pIndicator}{\PYGZcb{}}
\PYG{n+nt}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}blocks}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}logrotate\PYGZus{}confd}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}tlp}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}tlp\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}tlp\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}tlp\PYGZus{}thinkpad}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}tlp\PYGZus{}config}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}autofs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}autofs\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}autofs\PYGZus{}conf\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/autofs.conf}
\PYG{n+nt}{lp\PYGZus{}autofs\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}autofs\PYGZus{}master\PYGZus{}conf\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/auto.master}
\PYG{n+nt}{lp\PYGZus{}autofs\PYGZus{}master\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}autofs\PYGZus{}misc\PYGZus{}conf\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/auto.misc}
\PYG{n+nt}{lp\PYGZus{}autofs\PYGZus{}misc\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}libvirt}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}libvirt\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}libvirt\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}zfs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}zfs\PYGZus{}install}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}zfs\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}zfs\PYGZus{}manage}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}zfs\PYGZus{}mountpoints}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}service\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}service}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
\PYG{n+nt}{lp\PYGZus{}service\PYGZus{}enable}\PYG{p}{:}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{udev}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{auto\PYGZus{}upgrades}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{sshd}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{bluetooth}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{gpsd}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{postfix}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{smart}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{speechd}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{timesyncd}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{autofs}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{libvirt\PYGZus{}libvirtd}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{libvirt\PYGZus{}guests}

\PYG{n+nt}{lp\PYGZus{}ufw}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}ufw\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}ufw\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}ufw\PYGZus{}reset}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}ufw\PYGZus{}reload}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}ufw\PYGZus{}service}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ufw}
\PYG{n+nt}{lp\PYGZus{}ufw\PYGZus{}conf}\PYG{p}{:}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{state}\PYG{p}{:} \PYG{n+nv}{enabled}\PYG{p+pIndicator}{,}\PYG{n+nt}{ policy}\PYG{p}{:} \PYG{n+nv}{allow}\PYG{p+pIndicator}{\PYGZcb{}}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{logging}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{on}\PYG{l+s}{\PYGZdq{}}\PYG{p+pIndicator}{\PYGZcb{}}

\PYG{n+nt}{lp\PYGZus{}debsums}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}debsums\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/default/debsums}
\PYG{n+nt}{lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}conf}\PYG{p}{:}
  \PYG{p+pIndicator}{\PYGZhy{}} \PYG{p+pIndicator}{\PYGZob{}}\PYG{n+nt}{key}\PYG{p}{:} \PYG{n+nv}{CRON\PYGZus{}CHECK}\PYG{p+pIndicator}{,}\PYG{n+nt}{ value}\PYG{p}{:} \PYG{n+nv}{never}\PYG{p+pIndicator}{\PYGZcb{}}
\PYG{n+nt}{lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/debsums\PYGZhy{}ignore}
\PYG{n+nt}{lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}conf}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}fstab\PYGZus{}entries}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}resolvconf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}resolvconf\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}resolvconf\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}resolvconf\PYGZus{}confd\PYGZus{}head}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}

\PYG{n+nt}{lp\PYGZus{}reboot}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}reboot\PYGZus{}debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}reboot\PYGZus{}force}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
\PYG{n+nt}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}ignore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/var/run/reboot\PYGZhy{}required}
\PYG{n+nt}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}command}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/sbin/needs\PYGZhy{}restarting}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}r}
\PYG{n+nt}{lp\PYGZus{}reboot\PYGZus{}command}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{sleep}\PYG{n+nv}{ }\PYG{l+s}{5}\PYG{n+nv}{ }\PYG{l+s}{\PYGZam{}\PYGZam{}}\PYG{n+nv}{ }\PYG{l+s}{shutdown}\PYG{n+nv}{ }\PYG{l+s}{\PYGZhy{}r}\PYG{n+nv}{ }\PYG{l+s}{now}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}connect\PYGZus{}timeout}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{20}
\PYG{n+nt}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}sleep}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{5}
\PYG{n+nt}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}delay}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{5}
\PYG{n+nt}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}timeout}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{300}

\PYG{c+c1}{\PYGZsh{} Include default vars for various flavors. For example put vars into}
\PYG{c+c1}{\PYGZsh{} one of the files below. First found will be included.}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{}     vars/flavors/armbian\PYGZhy{}\PYGZlt{}VERSION\PYGZgt{}\PYGZhy{}\PYGZlt{}BOARD\PYGZgt{}.yml}
\PYG{c+c1}{\PYGZsh{}     vars/flavors/armbian\PYGZhy{}\PYGZlt{}VERSION\PYGZgt{}.yml}
\PYG{c+c1}{\PYGZsh{}     vars/flavors/armbian.yml}
\PYG{c+c1}{\PYGZsh{}     vars/defaults.yml}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} 1) File with service tasks task/sub/vars\PYGZhy{}flavors\PYGZhy{}\PYGZlt{}flavor\PYGZgt{}.yml is}
\PYG{c+c1}{\PYGZsh{}    needed when new flavor is added to lp\PYGZus{}flavors. See}
\PYG{c+c1}{\PYGZsh{}    tasks/sub/vars\PYGZhy{}flavors\PYGZhy{}common.yml}
\PYG{c+c1}{\PYGZsh{} 2) For precedence of vars see tasks/vars.yml}

\PYG{n+nt}{lp\PYGZus{}flavors\PYGZus{}enable}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
\PYG{n+nt}{lp\PYGZus{}flavors\PYGZus{}dir}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{inventory\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZti{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}/flavors\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}flavors\PYGZus{}dir\PYGZus{}owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{admin}
\PYG{n+nt}{lp\PYGZus{}flavors\PYGZus{}dir\PYGZus{}group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{adm}
\PYG{n+nt}{lp\PYGZus{}flavors\PYGZus{}dir\PYGZus{}mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0775}\PYG{l+s}{\PYGZdq{}}
\PYG{n+nt}{lp\PYGZus{}flavors}\PYG{p}{:}
  \PYG{n+nt}{lsb}\PYG{p}{:}
    \PYG{n+nt}{release\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/lsb\PYGZhy{}release}
    \PYG{n+nt}{file\PYGZus{}labels}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{DISTRIB\PYGZus{}ID}\PYG{p+pIndicator}{,} \PYG{n+nv}{DISTRIB\PYGZus{}CODENAME}\PYG{p+pIndicator}{]}
  \PYG{n+nt}{os}\PYG{p}{:}
    \PYG{n+nt}{release\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/os\PYGZhy{}release}
    \PYG{n+nt}{file\PYGZus{}labels}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{ID}\PYG{p+pIndicator}{,} \PYG{n+nv}{UBUNTU\PYGZus{}CODENAME}\PYG{p+pIndicator}{]}
  \PYG{n+nt}{armbian}\PYG{p}{:}
    \PYG{n+nt}{release\PYGZus{}file}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/armbian\PYGZhy{}release}
    \PYG{n+nt}{file\PYGZus{}labels}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{VERSION}\PYG{p+pIndicator}{,} \PYG{n+nv}{BOARD}\PYG{p+pIndicator}{]}

\PYG{c+c1}{\PYGZsh{} userland paths}
\PYG{n+nt}{lp\PYGZus{}dhclient}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/sbin/dhclient}

\PYG{c+c1}{\PYGZsh{} TODO:}
\PYG{c+c1}{\PYGZsh{} * lp\PYGZus{}virtualbox\PYGZus{}services lp\PYGZus{}virtualbox\PYGZus{}enable}
\PYG{c+c1}{\PYGZsh{} * lp\PYGZus{}tlp\PYGZus{}services lp\PYGZus{}tlp\PYGZus{}enable}
\PYG{c+c1}{\PYGZsh{} * lp\PYGZus{}nfsd\PYGZus{}services lp\PYGZus{}nfsd\PYGZus{}enable}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

\begin{sphinxadmonition}{warning}{Warning:}
Default value of \sphinxstylestrong{lp\_passwords\_debug\_classified} and
\sphinxstylestrong{lp\_wpasupplicant\_debug\_classified} is \sphinxstylestrong{False}. Passwords will be
displayed if these variables are enabled.
\end{sphinxadmonition}


\section{Best practice}
\label{\detokenize{guide:best-practice}}\label{\detokenize{guide:ug-bp}}
Display the variables for debug if needed. Then disable this task
\sphinxcode{\sphinxupquote{lp\_debug: false}} to speedup the playbook

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZhy{}postinstall.yml \PYGZhy{}t lp\PYGZus{}debug
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

Install packages automatically. Then disable this task
\sphinxcode{\sphinxupquote{lp\_packages\_auto: false}} to speedup the playbook

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZhy{}postinstall.yml \PYGZhy{}t cl\PYGZus{}packages \PYG{l+s+se}{\PYGZbs{}}
                                              \PYGZhy{}e \PYG{l+s+s1}{\PYGZsq{}lp\PYGZus{}packages\PYGZus{}auto=true\PYGZsq{}}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

The role and the configuration data in the examples are
idempotent. Once the installation and configuration have passed there
should be no changes reported by \sphinxstyleemphasis{ansible-playbook} when running the
playbook repeatedly. Disable debug, and install to speedup the
playbook

\fvset{hllines={, 1,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\}]
 shell\PYGZgt{} ansible\PYGZhy{}playbook linux\PYGZhy{}postinstall.yml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\chapter{Annotated source code}
\label{\detokenize{annotation:annotated-source-code}}\label{\detokenize{annotation:as}}\label{\detokenize{annotation::doc}}
\begin{sphinxShadowBox}
\sphinxstyletopictitle{Table of Contents}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{annotation:id59}}{\hyperref[\detokenize{annotation:annotated-source-code}]{\sphinxcrossref{Annotated source code}}}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{annotation:id60}}{\hyperref[\detokenize{annotation:tasks}]{\sphinxcrossref{Tasks}}}
\begin{itemize}
\item {} 
\phantomsection\label{\detokenize{annotation:id61}}{\hyperref[\detokenize{annotation:main-yml}]{\sphinxcrossref{main.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id62}}{\hyperref[\detokenize{annotation:acpi-yml}]{\sphinxcrossref{acpi.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id63}}{\hyperref[\detokenize{annotation:aliases-yml}]{\sphinxcrossref{aliases.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id64}}{\hyperref[\detokenize{annotation:apparmor-yml}]{\sphinxcrossref{apparmor.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id65}}{\hyperref[\detokenize{annotation:authorized-keys-yml}]{\sphinxcrossref{authorized\_keys.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id66}}{\hyperref[\detokenize{annotation:autofs-yml}]{\sphinxcrossref{autofs.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id67}}{\hyperref[\detokenize{annotation:auto-upgrades-yml}]{\sphinxcrossref{auto\_upgrades.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id68}}{\hyperref[\detokenize{annotation:bluetooth-yml}]{\sphinxcrossref{bluetooth.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id69}}{\hyperref[\detokenize{annotation:cron-yml}]{\sphinxcrossref{cron.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id70}}{\hyperref[\detokenize{annotation:debsums-yml}]{\sphinxcrossref{debsums.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id71}}{\hyperref[\detokenize{annotation:debug-yml}]{\sphinxcrossref{debug.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id72}}{\hyperref[\detokenize{annotation:fstab-yml}]{\sphinxcrossref{fstab.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id73}}{\hyperref[\detokenize{annotation:gpg-yml}]{\sphinxcrossref{gpg.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id74}}{\hyperref[\detokenize{annotation:gpsd-yml}]{\sphinxcrossref{gpsd.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id75}}{\hyperref[\detokenize{annotation:grub-yml}]{\sphinxcrossref{grub.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id76}}{\hyperref[\detokenize{annotation:hostname-yml}]{\sphinxcrossref{hostname.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id77}}{\hyperref[\detokenize{annotation:hosts-yml}]{\sphinxcrossref{hosts.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id78}}{\hyperref[\detokenize{annotation:iptables-yml}]{\sphinxcrossref{iptables.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id79}}{\hyperref[\detokenize{annotation:kvm-yml}]{\sphinxcrossref{kvm.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id80}}{\hyperref[\detokenize{annotation:latex-yml}]{\sphinxcrossref{latex.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id81}}{\hyperref[\detokenize{annotation:libvirt-conf-yml}]{\sphinxcrossref{libvirt-conf.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id82}}{\hyperref[\detokenize{annotation:libvirt-yml}]{\sphinxcrossref{libvirt.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id83}}{\hyperref[\detokenize{annotation:lid-yml}]{\sphinxcrossref{lid.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id84}}{\hyperref[\detokenize{annotation:logrotate-yml}]{\sphinxcrossref{logrotate.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id85}}{\hyperref[\detokenize{annotation:modemmanager-yml}]{\sphinxcrossref{modemmanager.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id86}}{\hyperref[\detokenize{annotation:modules-yml}]{\sphinxcrossref{modules.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id87}}{\hyperref[\detokenize{annotation:netplan-yml}]{\sphinxcrossref{netplan.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id88}}{\hyperref[\detokenize{annotation:nfsd-yml}]{\sphinxcrossref{nfsd.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id89}}{\hyperref[\detokenize{annotation:packages-auto-yml}]{\sphinxcrossref{packages-auto.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id90}}{\hyperref[\detokenize{annotation:packages-yml}]{\sphinxcrossref{packages.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id91}}{\hyperref[\detokenize{annotation:passwords-yml}]{\sphinxcrossref{passwords.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id92}}{\hyperref[\detokenize{annotation:pm-utils-yml}]{\sphinxcrossref{pm-utils.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id93}}{\hyperref[\detokenize{annotation:postfix-yml}]{\sphinxcrossref{postfix.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id94}}{\hyperref[\detokenize{annotation:reboot-yml}]{\sphinxcrossref{reboot.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id95}}{\hyperref[\detokenize{annotation:repos-yml}]{\sphinxcrossref{repos.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id96}}{\hyperref[\detokenize{annotation:resolvconf-yml}]{\sphinxcrossref{resolvconf.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id97}}{\hyperref[\detokenize{annotation:service-yml}]{\sphinxcrossref{service.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id98}}{\hyperref[\detokenize{annotation:smart-yml}]{\sphinxcrossref{smart.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id99}}{\hyperref[\detokenize{annotation:speechd-yml}]{\sphinxcrossref{speechd.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id100}}{\hyperref[\detokenize{annotation:sshd-yml}]{\sphinxcrossref{sshd.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id101}}{\hyperref[\detokenize{annotation:ssh-yml}]{\sphinxcrossref{ssh.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id102}}{\hyperref[\detokenize{annotation:sudoers-yml}]{\sphinxcrossref{sudoers.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id103}}{\hyperref[\detokenize{annotation:swap-yml}]{\sphinxcrossref{swap.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id104}}{\hyperref[\detokenize{annotation:sysctl-yml}]{\sphinxcrossref{sysctl.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id105}}{\hyperref[\detokenize{annotation:timesyncd-yml}]{\sphinxcrossref{timesyncd.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id106}}{\hyperref[\detokenize{annotation:timezone-yml}]{\sphinxcrossref{timezone.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id107}}{\hyperref[\detokenize{annotation:tlp-yml}]{\sphinxcrossref{tlp.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id108}}{\hyperref[\detokenize{annotation:udev-yml}]{\sphinxcrossref{udev.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id109}}{\hyperref[\detokenize{annotation:ufw-yml}]{\sphinxcrossref{ufw.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id110}}{\hyperref[\detokenize{annotation:users-yml}]{\sphinxcrossref{users.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id111}}{\hyperref[\detokenize{annotation:vars-yml}]{\sphinxcrossref{vars.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id112}}{\hyperref[\detokenize{annotation:virtualbox-yml}]{\sphinxcrossref{virtualbox.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id113}}{\hyperref[\detokenize{annotation:wpagui-yml}]{\sphinxcrossref{wpagui.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id114}}{\hyperref[\detokenize{annotation:wpasupplicant-yml}]{\sphinxcrossref{wpasupplicant.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id115}}{\hyperref[\detokenize{annotation:xen-yml}]{\sphinxcrossref{xen.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id116}}{\hyperref[\detokenize{annotation:xorg-yml}]{\sphinxcrossref{xorg.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id117}}{\hyperref[\detokenize{annotation:zeitgeist-yml}]{\sphinxcrossref{zeitgeist.yml}}}

\item {} 
\phantomsection\label{\detokenize{annotation:id118}}{\hyperref[\detokenize{annotation:zfs-yml}]{\sphinxcrossref{zfs.yml}}}

\end{itemize}

\end{itemize}

\end{itemize}
\end{sphinxShadowBox}


\section{Tasks}
\label{\detokenize{annotation:tasks}}\label{\detokenize{annotation:as-tree}}

\subsection{main.yml}
\label{\detokenize{annotation:main-yml}}\label{\detokenize{annotation:as-main-yml}}
Synopsis: Tasks of the playbook.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/main.yml}{main.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} tasks linux\PYGZhy{}postinstall}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{vars.yml}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{lp\PYGZus{}vars}\PYG{p+pIndicator}{,} \PYG{n+nv}{always}\PYG{p+pIndicator}{]}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{debug.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{n+nv}{lp\PYGZus{}debug}\PYG{p+pIndicator}{,} \PYG{n+nv}{always}\PYG{p+pIndicator}{]}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{swap.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{((ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}))}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{modules.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}modules}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{udev.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{((ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}))}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fstab.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{((ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}))}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}fstab}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{netplan.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}netplan\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}netplan}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{timezone.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{((ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}))}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timezone\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timezone}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{timesyncd.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timesyncd\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timesyncd}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{repos.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}repos}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{packages.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{auto\PYGZus{}upgrades.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}auto\PYGZus{}upgrades\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}auto\PYGZus{}upgrades}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{sysctl.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sysctl}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{zfs.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zfs\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zfs}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{hostname.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}hostname}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{hosts.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}hosts}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{iptables.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}iptables\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}iptables}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{grub.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}grub\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}grub}
  \PYG{c+c1}{\PYGZsh{} https://unix.stackexchange.com/questions/152222/}
  \PYG{c+c1}{\PYGZsh{} equivalent\PYGZhy{}of\PYGZhy{}update\PYGZhy{}grub\PYGZhy{}for\PYGZhy{}rhel\PYGZhy{}fedora\PYGZhy{}centos\PYGZhy{}systems}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{users.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{gpg.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{passwords.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{sudoers.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sudoers}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{authorized\PYGZus{}keys.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}authorized\PYGZus{}keys}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{aliases.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{((ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{))}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}aliases\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}aliases}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{pm\PYGZhy{}utils.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}pm\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}pm}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ssh.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{((ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{))}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ssh\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ssh}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{sshd.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{((ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{))}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sshd\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sshd}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{bluetooth.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}bluetooth\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}bluetooth}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{xorg.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xorg}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{cron.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}cron}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{modemmanager.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}modemmanager\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}modemmanager}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{gpsd.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpsd\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpsd}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{postfix.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{((ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{))}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}postfix\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}postfix}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{smart.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{apparmor.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{meta}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{flush\PYGZus{}handlers}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{zeitgeist.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zeitgeist}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lid.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}lid\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}lid}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{acpi.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}acpi\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}acpi}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{speechd.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}speechd\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}speechd}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{nfsd.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}nfsd\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}nfsd}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{meta}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{flush\PYGZus{}handlers}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{latex.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}latex\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}latex}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{kvm.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}kvm\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}kvm}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{xen.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xen\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xen}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{virtualbox.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{wpagui.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpagui\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpagui}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{wpasupplicant.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{((ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{))}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{logrotate.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}logrotate}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{tlp.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{autofs.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}autofs\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}autofs}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{libvirt.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ufw.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{debsums.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debsums\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debsums}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{meta}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{flush\PYGZus{}handlers}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{service.yml}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{resolvconf.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{import\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reboot.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{((ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
         \PYG{l+lScalar+lScalarPlain}{(ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}))}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}reboot\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}reboot}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{acpi.yml}
\label{\detokenize{annotation:acpi-yml}}\label{\detokenize{annotation:as-acpi-yml}}
Synopsis: Configure acpi.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/acpi.yml}{acpi.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall acpi}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}acpi}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}acpi\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}/events\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value.template}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}acpi\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/events/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value.file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}acpi\PYGZus{}owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}acpi\PYGZus{}group}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}acpi\PYGZus{}event\PYGZus{}mode}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}acpi\PYGZus{}events\textbar{}dict2items}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}acpi\PYGZus{}events}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}acpi}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{actions}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}acpi\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value.template}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}acpi\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value.file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}acpi\PYGZus{}owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}acpi\PYGZus{}group}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}acpi\PYGZus{}action\PYGZus{}mode}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}acpi\PYGZus{}actions\textbar{}dict2items}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}acpi\PYGZus{}actions}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{aliases.yml}
\label{\detokenize{annotation:aliases-yml}}\label{\detokenize{annotation:as-aliases-yml}}
Synopsis: Configure aliases.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/aliases.yml}{aliases.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}aliases}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/aliases\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{aliases.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/aliases}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{newaliases}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{apparmor.yml}
\label{\detokenize{annotation:apparmor-yml}}\label{\detokenize{annotation:as-apparmor-yml}}
Synopsis: Configure apparmor.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/apparmor.yml}{apparmor.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall apparmor}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}apparmor\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{list}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{of}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{profiles\PYGZdq{}}
  \PYG{n+nt}{block}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{List}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{profiles\PYGZdq{}}
      \PYG{n+nt}{shell}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{aa\PYGZhy{}status}\PYG{n+nv}{ }\PYG{l+s}{\PYGZhy{}\PYGZhy{}json}\PYG{n+nv}{ }\PYG{l+s}{\textbar{}}\PYG{n+nv}{ }\PYG{l+s}{jq}\PYG{n+nv}{ }\PYG{l+s}{.profiles}\PYG{n+nv}{ }\PYG{l+s}{\textbar{}}\PYG{n+nv}{ }\PYG{l+s}{jq}\PYG{n+nv}{ }\PYG{l+s}{to\PYGZus{}entries}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
      \PYG{n+nt}{changed\PYGZus{}when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{list}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{of}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enforced}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{profiles\PYGZdq{}}
      \PYG{n+nt}{set\PYGZus{}fact}\PYG{p}{:}
        \PYG{n+nt}{lp\PYGZus{}apparmor\PYGZus{}profiles\PYGZus{}enforce}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}apparmor\PYGZus{}profiles\PYGZus{}enforce\textbar{}default([])}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{[}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{result.stdout\textbar{}default([])}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{item.value}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZsq{}enforce\PYGZsq{}}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{list}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{of}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{complained}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{profiles\PYGZdq{}}
      \PYG{n+nt}{set\PYGZus{}fact}\PYG{p}{:}
        \PYG{n+nt}{lp\PYGZus{}apparmor\PYGZus{}profiles\PYGZus{}complain}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}apparmor\PYGZus{}profiles\PYGZus{}complain\textbar{}default([])}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{[}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{result.stdout\textbar{}default([])}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{item.value}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZsq{}complain\PYGZsq{}}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{n+nt}{Debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{List}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enforced}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{profiles\PYGZdq{}}
      \PYG{n+nt}{debug}\PYG{p}{:}
        \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}profiles\PYGZus{}enforce}
      \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debug}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{n+nt}{Debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{List}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{complained}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{profiles\PYGZdq{}}
      \PYG{n+nt}{debug}\PYG{p}{:}
        \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}profiles\PYGZus{}complain}
      \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debug}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}profiles}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{profiles\PYGZdq{}}
  \PYG{n+nt}{command}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{aa\PYGZhy{}disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{item}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}apparmor\PYGZus{}disable}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{item}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}profiles\PYGZus{}enforce\textbar{}default([])}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{item}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}profiles\PYGZus{}complain\textbar{}default([])}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}disable}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enforce}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{profiles\PYGZdq{}}
  \PYG{n+nt}{command}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{aa\PYGZhy{}enforce}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{item}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}apparmor\PYGZus{}enforce}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{item}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}profiles\PYGZus{}enforce\textbar{}default([])}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}enforce}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Complain}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{profiles\PYGZdq{}}
  \PYG{n+nt}{command}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{aa\PYGZhy{}complain}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{item}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}apparmor\PYGZus{}complain}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{item}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}profiles\PYGZus{}complain\textbar{}default([])}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}enforce}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{apparmor\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{apparmor}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}apparmor}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{apparmor\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{apparmor}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}apparmor\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{authorized\_keys.yml}
\label{\detokenize{annotation:authorized-keys-yml}}\label{\detokenize{annotation:as-authorized-keys-yml}}
Synopsis: Configure authorized\_keys.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/authorized\_keys.yml}{authorized\_keys.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}authorized\PYGZus{}key}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{authorized\PYGZus{}keys\PYGZdq{}}
  \PYG{n+nt}{authorized\PYGZus{}key}\PYG{p}{:}
    \PYG{n+nt}{user}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.user}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{key}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{manage\PYGZus{}dir}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}authorized\PYGZus{}keys}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{autofs.yml}
\label{\detokenize{annotation:autofs-yml}}\label{\detokenize{annotation:as-autofs-yml}}
Synopsis: Configure autofs.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/autofs.yml}{autofs.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall autofs}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}autofs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{lp\PYGZus{}autofs\PYGZus{}enable}\PYG{n+nv}{ }\PYG{l+s}{[}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}autofs\PYGZus{}enable}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{]}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debug\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}autofs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}autofs\PYGZus{}conf\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}autofs\PYGZus{}conf\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{=}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}autofs\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{autofs}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}autofs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}autofs\PYGZus{}master\PYGZus{}conf\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}autofs\PYGZus{}master\PYGZus{}conf\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}autofs\PYGZus{}master\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{autofs}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}autofs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}autofs\PYGZus{}misc\PYGZus{}conf\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}autofs\PYGZus{}misc\PYGZus{}conf\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}autofs\PYGZus{}misc\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{autofs}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}autofs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{autofs\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}autofs\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}autofs\PYGZus{}enable\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}autofs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{autofs\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}autofs\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}autofs\PYGZus{}enable\textbar{}bool}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{auto\_upgrades.yml}
\label{\detokenize{annotation:auto-upgrades-yml}}\label{\detokenize{annotation:as-auto-upgrades-yml}}
Synopsis: Configure auto\_upgrades.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/auto\_upgrades.yml}{auto\_upgrades.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}auto\PYGZus{}upgrades}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/apt/apt.conf.d/20auto\PYGZhy{}upgrades\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{auto\PYGZhy{}upgrades.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/apt/apt.conf.d/20auto\PYGZhy{}upgrades}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}auto\PYGZus{}upgrades}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{unattended\PYGZhy{}upgrades\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}auto\PYGZus{}upgrades\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}auto\PYGZus{}upgrades\PYGZus{}enable\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}auto\PYGZus{}upgrades}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{unattended\PYGZhy{}upgrades\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}auto\PYGZus{}upgrades\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}auto\PYGZus{}upgrades\PYGZus{}enable\textbar{}bool}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{bluetooth.yml}
\label{\detokenize{annotation:bluetooth-yml}}\label{\detokenize{annotation:as-bluetooth-yml}}
Synopsis: Configure bluetooth.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/bluetooth.yml}{bluetooth.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall bluetooth}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}bluetooth}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{lp\PYGZus{}bluetooth\PYGZus{}enable}\PYG{n+nv}{ }\PYG{l+s}{[\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}bluetooth\PYGZus{}enable}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}]}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}bluetooth\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}bluetooth\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}bluetooth}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/bluetooth/main.conf\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/bluetooth/main.conf}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{insertbefore}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}\PYGZsh{}\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{=}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}bluetooth\PYGZus{}main\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{restart}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{bluetooth}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}bluetooth\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}bluetooth}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{bluetooth\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}bluetooth\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}bluetooth\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}bluetooth\PYGZus{}enable}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}bluetooth}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{bluetooth\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}bluetooth\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}bluetooth\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}bluetooth\PYGZus{}disable}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{cron.yml}
\label{\detokenize{annotation:cron-yml}}\label{\detokenize{annotation:as-cron-yml}}
Synopsis: Configure cron.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/cron.yml}{cron.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}cron}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{cron}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{variables\PYGZdq{}}
  \PYG{n+nt}{cronvar}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{value}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{user}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.user}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}cron\PYGZus{}var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}cron\PYGZus{}var}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}cron}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{cron\PYGZdq{}}
  \PYG{n+nt}{cron}\PYG{p}{:}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{user}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.user}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{minute}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.minute}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{hour}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.hour}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{day}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.day}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{month}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.month}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{weekday}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.weekday}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{job}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.command}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}cron\PYGZus{}tab}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}cron\PYGZus{}tab}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{debsums.yml}
\label{\detokenize{annotation:debsums-yml}}\label{\detokenize{annotation:as-debsums-yml}}
Synopsis: Configure debsums.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/debsums.yml}{debsums.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall debsums}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}debsums}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}file [\PYGZob{}\PYGZob{} lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}file \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}conf\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}file [\PYGZob{}\PYGZob{} lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}file \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}conf\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debsums\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debsums\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}debsums}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}debsums\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debsums\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}debsums}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZsq{}}\PYG{l+s}{\PYGZca{}\PYGZbs{}s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}\PYGZbs{}s*=(.*)\PYGZdl{}}\PYG{l+s}{\PYGZsq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}=\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debsums\PYGZus{}default\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}debsums}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debsums\PYGZus{}ignore\PYGZus{}conf}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{debug.yml}
\label{\detokenize{annotation:debug-yml}}\label{\detokenize{annotation:as-debug-yml}}
Synopsis: Configure debug.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/debug.yml}{debug.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} Hint: Get readable output with stdout\PYGZus{}callback = yaml}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{Debug}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{ansible\PYGZus{}architecture [\PYGZob{}\PYGZob{} ansible\PYGZus{}architecture \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{ansible\PYGZus{}os\PYGZus{}family [\PYGZob{}\PYGZob{} ansible\PYGZus{}os\PYGZus{}family \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{ansible\PYGZus{}distribution [\PYGZob{}\PYGZob{} ansible\PYGZus{}distribution \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{ansible\PYGZus{}distribution\PYGZus{}major\PYGZus{}version [\PYGZob{}\PYGZob{} ansible\PYGZus{}distribution\PYGZus{}major\PYGZus{}version \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{ansible\PYGZus{}distribution\PYGZus{}version [\PYGZob{}\PYGZob{} ansible\PYGZus{}distribution\PYGZus{}version \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{ansible\PYGZus{}distribution\PYGZus{}release [\PYGZob{}\PYGZob{} ansible\PYGZus{}distribution\PYGZus{}release \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{ansible\PYGZus{}python\PYGZus{}version [\PYGZob{}\PYGZob{} ansible\PYGZus{}python\PYGZus{}version \PYGZcb{}\PYGZcb{}]}

      \PYG{n+no}{lp\PYGZus{}flavors\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}flavors\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{\PYGZob{}\PYGZob{} my\PYGZus{}release\textbar{}default([])\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}

      \PYG{n+no}{lp\PYGZus{}backup\PYGZus{}conf [\PYGZob{}\PYGZob{} lp\PYGZus{}backup\PYGZus{}conf \PYGZcb{}\PYGZcb{}]}

      \PYG{n+no}{lp\PYGZus{}acpi [\PYGZob{}\PYGZob{} lp\PYGZus{}acpi \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}aliases [\PYGZob{}\PYGZob{} lp\PYGZus{}aliases \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}apparmor [\PYGZob{}\PYGZob{} lp\PYGZus{}apparmor \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}auto\PYGZus{}upgrades [\PYGZob{}\PYGZob{} lp\PYGZus{}auto\PYGZus{}upgrades \PYGZcb{}\PYGZcb{}] lp\PYGZus{}auto\PYGZus{}upgrades\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}auto\PYGZus{}upgrades\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}autofs [\PYGZob{}\PYGZob{} lp\PYGZus{}autofs \PYGZcb{}\PYGZcb{}] lp\PYGZus{}autofs\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}autofs\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}bluetooth [\PYGZob{}\PYGZob{} lp\PYGZus{}bluetooth \PYGZcb{}\PYGZcb{}] lp\PYGZus{}bluetooth\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}bluetooth\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}debsums [\PYGZob{}\PYGZob{} lp\PYGZus{}debsums \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}gpg [\PYGZob{}\PYGZob{} lp\PYGZus{}gpg \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}gpsd [\PYGZob{}\PYGZob{} lp\PYGZus{}gpsd \PYGZcb{}\PYGZcb{}] lp\PYGZus{}gpsd\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}gpsd\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}grub [\PYGZob{}\PYGZob{} lp\PYGZus{}grub \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}iptables [\PYGZob{}\PYGZob{} lp\PYGZus{}iptables \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}kvm [\PYGZob{}\PYGZob{} lp\PYGZus{}kvm \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}latex [\PYGZob{}\PYGZob{} lp\PYGZus{}latex \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}libvirt [\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}lid [\PYGZob{}\PYGZob{} lp\PYGZus{}lid \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}modemmanager [\PYGZob{}\PYGZob{} lp\PYGZus{}modemmanager \PYGZcb{}\PYGZcb{}] lp\PYGZus{}modemmanager\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}modemmanager\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}netplan [\PYGZob{}\PYGZob{} lp\PYGZus{}netplan \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}nfsd [\PYGZob{}\PYGZob{} lp\PYGZus{}nfsd \PYGZcb{}\PYGZcb{}] lp\PYGZus{}nfsd\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}nfsd\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}packages\PYGZus{}autoremove [\PYGZob{}\PYGZob{} lp\PYGZus{}packages\PYGZus{}autoremove \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwords [\PYGZob{}\PYGZob{} lp\PYGZus{}passwords \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}pm [\PYGZob{}\PYGZob{} lp\PYGZus{}pm \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}postfix [\PYGZob{}\PYGZob{} lp\PYGZus{}postfix \PYGZcb{}\PYGZcb{}] lp\PYGZus{}postfix\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}postfix\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}reboot [\PYGZob{}\PYGZob{} lp\PYGZus{}reboot \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}resolvconf [\PYGZob{}\PYGZob{} lp\PYGZus{}resolvconf \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}smart [\PYGZob{}\PYGZob{} lp\PYGZus{}smart \PYGZcb{}\PYGZcb{}] lp\PYGZus{}smart\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}smart\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}speechd [\PYGZob{}\PYGZob{} lp\PYGZus{}speechd \PYGZcb{}\PYGZcb{}] lp\PYGZus{}speechd\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}speechd\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}ssh [\PYGZob{}\PYGZob{} lp\PYGZus{}ssh \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}sshd [\PYGZob{}\PYGZob{} lp\PYGZus{}sshd \PYGZcb{}\PYGZcb{}] lp\PYGZus{}sshd\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}sshd\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}swap [\PYGZob{}\PYGZob{} lp\PYGZus{}swap \PYGZcb{}\PYGZcb{}] lp\PYGZus{}swap\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}swap\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}timesyncd [\PYGZob{}\PYGZob{} lp\PYGZus{}timesyncd \PYGZcb{}\PYGZcb{}] lp\PYGZus{}timesyncd\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}timesyncd\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}timezone [\PYGZob{}\PYGZob{} lp\PYGZus{}timezone \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}tlp [\PYGZob{}\PYGZob{} lp\PYGZus{}tlp \PYGZcb{}\PYGZcb{}] lp\PYGZus{}tlp\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}tlp\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}ufw [\PYGZob{}\PYGZob{} lp\PYGZus{}ufw \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}virtualbox [\PYGZob{}\PYGZob{} lp\PYGZus{}virtualbox \PYGZcb{}\PYGZcb{}] lp\PYGZus{}virtualbox\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}virtualbox\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpagui [\PYGZob{}\PYGZob{} lp\PYGZus{}wpagui \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant [\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}xen [\PYGZob{}\PYGZob{} lp\PYGZus{}xen \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}zeitgeist [\PYGZob{}\PYGZob{} lp\PYGZus{}zeitgeist \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}zfs [\PYGZob{}\PYGZob{} lp\PYGZus{}zfs \PYGZcb{}\PYGZcb{}]}

      \PYG{n+no}{lp\PYGZus{}service}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}service \textbar{} to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}package\PYGZus{}state [\PYGZob{}\PYGZob{} lp\PYGZus{}package\PYGZus{}state \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}package\PYGZus{}state\PYGZus{}remove [\PYGZob{}\PYGZob{} lp\PYGZus{}package\PYGZus{}state\PYGZus{}remove \PYGZcb{}\PYGZcb{}]}

  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{fstab.yml}
\label{\detokenize{annotation:fstab-yml}}\label{\detokenize{annotation:as-fstab-yml}}
Synopsis: Configure fstab.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/fstab.yml}{fstab.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}fstab}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{fstab}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{entries\PYGZdq{}}
  \PYG{n+nt}{mount}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(\PYGZsq{}mounted\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.src\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{fstype}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.fstype\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{opts}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.opts\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{dump}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.dump\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{passno}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.passno\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}fstab\PYGZus{}entries}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{gpg.yml}
\label{\detokenize{annotation:gpg-yml}}\label{\detokenize{annotation:as-gpg-yml}}
Synopsis: Configure gpg.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/gpg.yml}{gpg.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall gpg}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpg}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}gpg\PYGZus{}install [\PYGZob{}\PYGZob{} lp\PYGZus{}gpg\PYGZus{}install \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}gpg\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}gpg\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}gpg\PYGZus{}packages\PYGZus{}extra}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}gpg\PYGZus{}packages\PYGZus{}extra\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}

      \PYG{n+no}{lp\PYGZus{}gpg\PYGZus{}conf\PYGZus{}default}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}gpg\PYGZus{}conf\PYGZus{}default\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}gpg\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}gpg\PYGZus{}conf\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}

      \PYG{n+no}{lp\PYGZus{}gpg\PYGZus{}agent\PYGZus{}conf\PYGZus{}default}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}gpg\PYGZus{}agent\PYGZus{}conf\PYGZus{}default\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}gpg\PYGZus{}agent\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}gpg\PYGZus{}agent\PYGZus{}conf\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}

      \PYG{n+no}{lp\PYGZus{}gpg\PYGZus{}dirmngr\PYGZus{}conf\PYGZus{}default}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}gpg\PYGZus{}dirmngr\PYGZus{}conf\PYGZus{}default\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}gpg\PYGZus{}dirmngr\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}gpg\PYGZus{}dirmngr\PYGZus{}conf\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpg}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpg\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpg\PYGZus{}packages\PYGZus{}extra}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg\PYGZus{}install\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpg}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{gpg.conf\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{gpg.conf.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.dest\textbar{}default(\PYGZsq{}/home/\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZti{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZti{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}/.gnupg/gpg.conf\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0600}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpg\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop\PYGZus{}control}\PYG{p}{:}
    \PYG{n+nt}{label}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpg}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{gpg\PYGZhy{}agent.conf\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{gpg\PYGZhy{}agent.conf.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.dest\textbar{}default(\PYGZsq{}/home/\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZti{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZti{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}/.gnupg/gpg\PYGZhy{}agent.conf\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0600}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpg\PYGZus{}agent\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop\PYGZus{}control}\PYG{p}{:}
    \PYG{n+nt}{label}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg\PYGZus{}agent\PYGZus{}conf\PYGZus{}changes}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{gpgconf}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{kill}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{gpg\PYGZhy{}agent}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg\PYGZus{}agent\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpg}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{dirmngr.conf\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{gpg\PYGZhy{}dirmngr.conf.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.dest\textbar{}default(\PYGZsq{}/home/\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZti{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZti{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}/.gnupg/dirmngr.conf\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0600}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpg\PYGZus{}dirmngr\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop\PYGZus{}control}\PYG{p}{:}
    \PYG{n+nt}{label}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg\PYGZus{}dirmngr\PYGZus{}conf\PYGZus{}changes}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{gpgconf}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{kill}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{dirmngr}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpg\PYGZus{}dirmngr\PYGZus{}conf}

\PYG{c+c1}{\PYGZsh{} TODO: import keys}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{gpsd.yml}
\label{\detokenize{annotation:gpsd-yml}}\label{\detokenize{annotation:as-gpsd-yml}}
Synopsis: Configure gpsd.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/gpsd.yml}{gpsd.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall gpsd}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{for}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{gpsd\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpsd\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpsd\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Add}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{user}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{gpsd}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{to}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{group}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{dialout\PYGZdq{}}
  \PYG{n+nt}{user}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{gpsd}
    \PYG{n+nt}{groups}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{dialout}
    \PYG{n+nt}{append}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpsd\PYGZus{}group}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/bluetooth/rfcomm.conf\PYGZdq{}}
  \PYG{n+nt}{blockinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/bluetooth/rfcomm.conf}
    \PYG{n+nt}{marker}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZsh{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}mark\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{ANSIBLE}\PYG{n+nv}{ }\PYG{l+s}{MANAGED}\PYG{n+nv}{ }\PYG{l+s}{BLOCK}\PYG{n+nv}{ }\PYG{l+s}{rfcomm\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.rfcomm}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{insertafter}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{EOF}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{block}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{rfcomm\PYGZob{}\PYGZob{} item.rfcomm \PYGZcb{}\PYGZcb{} \PYGZob{}}
        \PYG{n+no}{bind \PYGZob{}\PYGZob{} item.bind \PYGZcb{}\PYGZcb{}}
        \PYG{n+no}{device \PYGZob{}\PYGZob{} item.device \PYGZcb{}\PYGZcb{}}
        \PYG{n+no}{channel \PYGZob{}\PYGZob{} item.channel \PYGZcb{}\PYGZcb{}}
        \PYG{n+no}{comment \PYGZdq{}\PYGZob{}\PYGZob{} item.comment \PYGZcb{}\PYGZcb{}\PYGZdq{}}
        \PYG{n+no}{\PYGZcb{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpsd\PYGZus{}bt\PYGZus{}rfcomm}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{restart}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{bluetooth}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpsd\PYGZus{}bt\PYGZus{}rfcom}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/default/gpsd\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{gpsd.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/default/gpsd}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{restart}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{gpsd}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpsd\PYGZus{}config}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{gpsd\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpsd\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpsd\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpsd\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}gpsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{gpsd\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpsd\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpsd\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}gpsd\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{grub.yml}
\label{\detokenize{annotation:grub-yml}}\label{\detokenize{annotation:as-grub-yml}}
Synopsis: Configure grub.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/grub.yml}{grub.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}grub}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}grub\PYGZus{}default}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}grub\PYGZus{}default\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}grub\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}grub\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}grub}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/default/grub\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/default/grub}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}=\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf\textbar{}bool}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}grub\PYGZus{}default}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{update}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{grub}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}grub\PYGZus{}conf}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{hostname.yml}
\label{\detokenize{annotation:hostname-yml}}\label{\detokenize{annotation:as-hostname-yml}}
Synopsis: Configure hostname.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/hostname.yml}{hostname.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{c+c1}{\PYGZsh{} TODO:}
\PYG{c+c1}{\PYGZsh{} 1) SET/DONT\PYGZus{}SET hostname via DHCP}
\PYG{c+c1}{\PYGZsh{} /etc/dhcp/dhclient.conf}
\PYG{c+c1}{\PYGZsh{} \PYGZsh{}send host\PYGZhy{}name = gethostname();}
\PYG{c+c1}{\PYGZsh{} request host\PYGZhy{}name = \PYGZdq{}myhostname\PYGZdq{};}
\PYG{c+c1}{\PYGZsh{} https://askubuntu.com/questions/104918/how\PYGZhy{}to\PYGZhy{}get\PYGZhy{}the\PYGZhy{}hostname\PYGZhy{}from\PYGZhy{}a\PYGZhy{}dhcp\PYGZhy{}server}
\PYG{c+c1}{\PYGZsh{} http://blog.schlomo.schapiro.org/2013/11/setting\PYGZhy{}hostname\PYGZhy{}from\PYGZhy{}dhcp\PYGZhy{}in\PYGZhy{}debian.html}
\PYG{c+c1}{\PYGZsh{} https://askubuntu.com/questions/757423/how\PYGZhy{}to\PYGZhy{}force\PYGZhy{}dhcp\PYGZhy{}client\PYGZhy{}to\PYGZhy{}allow\PYGZhy{}a\PYGZhy{}self\PYGZhy{}defined\PYGZhy{}domain\PYGZhy{}name}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}hostname}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{hostname}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/hostname\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{hostname.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/hostname}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}hostname\textbar{}length}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{0}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  notify: set hostname}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}hostname}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{hostname\PYGZdq{}}
  \PYG{n+nt}{hostname}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}hostname}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}hostname\textbar{}length}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{0}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{hosts.yml}
\label{\detokenize{annotation:hosts-yml}}\label{\detokenize{annotation:as-hosts-yml}}
Synopsis: Configure hosts.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/hosts.yml}{hosts.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}hosts}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}hosts\PYGZus{}default\PYGZus{}override}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}hosts\PYGZus{}default\PYGZus{}override\textbar{}default(\PYGZsq{}UNDEFINED\PYGZsq{})\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}hosts\PYGZus{}default}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}hosts\PYGZus{}default\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}hosts}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}hosts\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}hosts\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}hosts\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}hosts}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{hosts}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/hosts\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{hosts.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/hosts}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}hosts\PYGZus{}conf}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{iptables.yml}
\label{\detokenize{annotation:iptables-yml}}\label{\detokenize{annotation:as-iptables-yml}}
Synopsis: Configure iptables.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/iptables.yml}{iptables.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall iptables}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}iptables}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/network/if\PYGZhy{}pre\PYGZhy{}up.d/iptables\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{iptables\PYGZhy{}restore.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/network/if\PYGZhy{}pre\PYGZhy{}up.d/iptables}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0755}\PYG{l+s}{\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}iptables}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/network/iptables}
                   \PYG{l+lScalar+lScalarPlain}{using}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}iptables\PYGZus{}type}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZhy{}iptables.j2\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}iptables\PYGZus{}type}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}\PYGZhy{}iptables.j2}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/network/iptables}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{iptables}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{kvm.yml}
\label{\detokenize{annotation:kvm-yml}}\label{\detokenize{annotation:as-kvm-yml}}
Synopsis: Configure kvm.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/kvm.yml}{kvm.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall kvm}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}kvm}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}kvm\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}kvm\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}kvm\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}kvm\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}kvm}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}kvm\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}kvm\PYGZus{}packages}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{latex.yml}
\label{\detokenize{annotation:latex-yml}}\label{\detokenize{annotation:as-latex-yml}}
Synopsis: Configure latex.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/latex.yml}{latex.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall LaTeX}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}latex}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}latex\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}latex\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}latex}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{directory}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/usr/share/texmf/tex/latex\PYGZdq{}}
  \PYG{n+nt}{file}\PYG{p}{:}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{directory}
    \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/usr/share/texmf/tex/latex}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}latex\PYGZus{}dir}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}latex}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{directories}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{for}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{macros\PYGZdq{}}
  \PYG{n+nt}{file}\PYG{p}{:}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{directory}
    \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.dest}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}latex\PYGZus{}macros}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}latex\PYGZus{}macros}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}latex}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Download}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{macros\PYGZdq{}}
  \PYG{n+nt}{get\PYGZus{}url}\PYG{p}{:}
    \PYG{n+nt}{url}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.url}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.dest}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{timeout}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}latex\PYGZus{}download\PYGZus{}timeout}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}latex\PYGZus{}macros}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{ignore\PYGZus{}errors}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}latex\PYGZus{}get\PYGZus{}url\PYGZus{}ignore\PYGZus{}errors}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{changed\PYGZus{}when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}latex\PYGZus{}labels}

\PYG{c+c1}{\PYGZsh{} get\PYGZus{}url: check mode reports changes with force enabled}
\PYG{c+c1}{\PYGZsh{} https://github.com/ansible/ansible/issues/25418}

\PYG{c+c1}{\PYGZsh{} TODO:}
\PYG{c+c1}{\PYGZsh{} 1) Compile and register labels.sty}
\PYG{c+c1}{\PYGZsh{} cd /usr/share/texmf/tex/latex/labels/}
\PYG{c+c1}{\PYGZsh{} latex labels.ins}
\PYG{c+c1}{\PYGZsh{} texhash /usr/share/texmf}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{libvirt-conf.yml}
\label{\detokenize{annotation:libvirt-conf-yml}}\label{\detokenize{annotation:as-libvirt-conf-yml}}
Synopsis: Configure libvirt-conf.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/libvirt-conf.yml}{libvirt-conf.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}libvirt\PYGZhy{}conf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}debug\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}libvirt\PYGZhy{}conf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}conf\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{item.key}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}libvirt\PYGZus{}conf\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{conf[0]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}(}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s\textbar{}=)}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{conf[0]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{=}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{conf[1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{conf[2]}\PYG{n+nv}{ }\PYG{l+s}{\textbar{}}\PYG{n+nv}{ }\PYG{l+s}{default(\PYGZsq{}present\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop\PYGZus{}control}\PYG{p}{:}
    \PYG{n+nt}{loop\PYGZus{}var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{conf}
  \PYG{n+nt}{notify}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{libvirtd}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{libvirt\PYGZus{}guests}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{libvirt.yml}
\label{\detokenize{annotation:libvirt-yml}}\label{\detokenize{annotation:as-libvirt-yml}}
Synopsis: Configure libvirt.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/libvirt.yml}{libvirt.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall libvirt}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{libvirt}\PYG{n+nv}{ }\PYG{l+s}{Debug}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}backup [\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}backup \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}conf\PYGZus{}owner [\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}conf\PYGZus{}owner \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}conf\PYGZus{}group [\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}conf\PYGZus{}group \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}conf\PYGZus{}mode [\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}conf\PYGZus{}mode \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}conf\PYGZus{}dir [\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}conf\PYGZus{}dir \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}libvirt\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}libvirt\PYGZus{}conf\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}libvirt}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}libvirt\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}pkg}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}libvirt}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{libvirt\PYGZhy{}conf.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}libvirt\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\textbar{}}\PYG{n+nv}{ }\PYG{l+s}{dict2items}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}libvirt}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}service}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}libvirt}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}service}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}libvirtd\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}libvirt}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}service}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}libvirt}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}service}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}libvirt\PYGZus{}guests\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{lid.yml}
\label{\detokenize{annotation:lid-yml}}\label{\detokenize{annotation:as-lid-yml}}
Synopsis: Configure lid.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/lid.yml}{lid.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall lid}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}lid}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}lid\PYGZus{}logind\PYGZus{}conf}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}lid\PYGZus{}logind\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}=\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}lid\PYGZus{}logind\PYGZus{}conf\PYGZus{}vars}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{logind}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{message}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{reboot}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}lid}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}lid\PYGZus{}upower\PYGZus{}conf}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}lid\PYGZus{}upower\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}=\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}lid\PYGZus{}upower\PYGZus{}conf\PYGZus{}vars}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{logrotate.yml}
\label{\detokenize{annotation:logrotate-yml}}\label{\detokenize{annotation:as-logrotate-yml}}
Synopsis: Configure logrotate.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/logrotate.yml}{logrotate.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall logrotate}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}logrotate}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{for}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{logrotate\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}logrotate\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}logrotate}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{blocks}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{blockinfile}\PYG{p}{:}
    \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mark}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.mark}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{block}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.block}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}blocks}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}logrotate}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lines}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.line}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}lines}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}logrotate}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{blockinfile}\PYG{p}{:}
    \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}logrotate\PYGZus{}conf\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.path}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{block}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}logrotate\PYGZus{}confd}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{modemmanager.yml}
\label{\detokenize{annotation:modemmanager-yml}}\label{\detokenize{annotation:as-modemmanager-yml}}
Synopsis: Configure modemmanager.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/modemmanager.yml}{modemmanager.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall ModemManager}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}modem\PYGZus{}manager}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/init/modemmanager.override\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{modem\PYGZhy{}manager\PYGZhy{}override.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/init/modemmanager.override}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}modem\PYGZus{}manager}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ModemManager\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ModemManager}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}modemmanager\PYGZus{}enable\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}modem\PYGZus{}manager}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ModemManager\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ModemManager}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}modemmanager\PYGZus{}enable\textbar{}bool}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{modules.yml}
\label{\detokenize{annotation:modules-yml}}\label{\detokenize{annotation:as-modules-yml}}
Synopsis: Configure modules.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/modules.yml}{modules.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall modules}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}modules}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}modules\PYGZus{}conf [\PYGZob{}\PYGZob{} lp\PYGZus{}modules\PYGZus{}conf \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}modules}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}modules\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}modules\PYGZus{}options\PYGZus{}path [ \PYGZob{}\PYGZob{} lp\PYGZus{}modules\PYGZus{}options\PYGZus{}path \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}modules\PYGZus{}options}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}modules\PYGZus{}options\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}modules\PYGZus{}blacklist\PYGZus{}path [\PYGZob{}\PYGZob{} lp\PYGZus{}modules\PYGZus{}blacklist\PYGZus{}path \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}modules\PYGZus{}blacklist}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}modules\PYGZus{}blacklist\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}modules\PYGZus{}debug\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}modules}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{modprobe}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{modules\PYGZdq{}}
  \PYG{n+nt}{modprobe}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{params}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.params}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(\PYGZsq{}present\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}modules}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} Debian}
\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}modules}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}modules\PYGZus{}conf}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{Debian\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}modules\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.params}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}modules}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{item.state\textbar{}default(\PYGZdq{}present\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}present\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} RedHat}
\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}modules}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}modules\PYGZus{}conf}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{RedHat\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}modules\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*modprobe}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s+\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{modprobe}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.params}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}modules}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{item.state\textbar{}default(\PYGZdq{}present\PYGZdq{})}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}present\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}modules}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Blacklist}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{modules}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}modules\PYGZus{}blacklist\PYGZus{}path}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{blacklist\PYGZhy{}module.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}modules\PYGZus{}blacklist\PYGZus{}path}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/blacklist\PYGZhy{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}.conf}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}modules\PYGZus{}blacklist}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{update}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{initramfs}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}modules}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Set}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{modules}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{options}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}modules\PYGZus{}options\PYGZus{}path}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{options\PYGZhy{}module.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}modules\PYGZus{}options\PYGZus{}path}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.module}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}.conf}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}modules\PYGZus{}options}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{update}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{initramfs}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{netplan.yml}
\label{\detokenize{annotation:netplan-yml}}\label{\detokenize{annotation:as-netplan-yml}}
Synopsis: Configure netplan.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/netplan.yml}{netplan.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall netplan}

\PYG{c+c1}{\PYGZsh{} Configure 01\PYGZhy{}network\PYGZhy{}manager\PYGZhy{}all.yaml only if it already exists}
\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}netplan}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}netplan\PYGZus{}default}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{stat}\PYG{p}{:}
    \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}netplan\PYGZus{}root}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}netplan\PYGZus{}default}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}netplan}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}netplan\PYGZus{}root}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}netplan\PYGZus{}default}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{netplan\PYGZhy{}default.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}netplan\PYGZus{}root}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}netplan\PYGZus{}default}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}netplan\PYGZus{}owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}netplan\PYGZus{}group}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}netplan\PYGZus{}mode}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{netplan}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{apply}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result.stat.exists\textbar{}default(false)}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}netplan}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{files}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}netplan\PYGZus{}root}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{netplan\PYGZhy{}conf.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}netplan\PYGZus{}root}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner}\PYG{n+nv}{ }\PYG{l+s}{\textbar{}}\PYG{n+nv}{ }\PYG{l+s}{default(lp\PYGZus{}netplan\PYGZus{}owner)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.group}\PYG{n+nv}{ }\PYG{l+s}{\textbar{}}\PYG{n+nv}{ }\PYG{l+s}{default(lp\PYGZus{}netplan\PYGZus{}group)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.mode}\PYG{n+nv}{ }\PYG{l+s}{\textbar{}}\PYG{n+nv}{ }\PYG{l+s}{default(lp\PYGZus{}netplan\PYGZus{}mode)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}netplan\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{netplan}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{apply}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{nfsd.yml}
\label{\detokenize{annotation:nfsd-yml}}\label{\detokenize{annotation:as-nfsd-yml}}
Synopsis: Configure nfsd.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/nfsd.yml}{nfsd.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall nfsd}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}nfsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}nfsd\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}nfsd\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}nfsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{exports\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{exports.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/exports}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{nfsd}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}nfsd\PYGZus{}exports}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}nfsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{nfsd}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{services\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}nfsd\PYGZus{}services}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}nfsd\PYGZus{}enable\textbar{}bool}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}nfsd\PYGZus{}services\textbar{}length}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{0}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}nfsd\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}nfsd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{nfsd}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{services\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}nfsd\PYGZus{}services}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}nfsd\PYGZus{}enable\textbar{}bool}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}nfsd\PYGZus{}services\textbar{}length}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{0}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}nfsd\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{packages-auto.yml}
\label{\detokenize{annotation:packages-auto-yml}}\label{\detokenize{annotation:as-packages-auto-yml}}
Synopsis: Configure packages-auto.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/packages-auto.yml}{packages-auto.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall packages\PYGZhy{}auto}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages\PYGZhy{}auto}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Init}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{variable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{local\PYGZus{}pkg\PYGZus{}lists\PYGZdq{}}
  \PYG{n+nt}{set\PYGZus{}fact}\PYG{p}{:}
    \PYG{n+nt}{local\PYGZus{}pkg\PYGZus{}lists}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
    \PYG{n+nt}{local\PYGZus{}pkg\PYGZus{}list}\PYG{p}{:} \PYG{p+pIndicator}{[}\PYG{p+pIndicator}{]}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}auto}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages\PYGZhy{}auto}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{List}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{variables}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZca{}lp\PYGZus{}.*\PYGZus{}packages\PYGZdl{}\PYGZdq{}}
  \PYG{n+nt}{set\PYGZus{}fact}\PYG{p}{:}
    \PYG{n+nt}{local\PYGZus{}pkg\PYGZus{}lists}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{local\PYGZus{}pkg\PYGZus{}lists}\PYG{n+nv}{ }\PYG{l+s}{+}
                     \PYG{l+s}{[\PYGZob{}\PYGZsq{}install\PYGZsq{}:}\PYG{n+nv}{ }\PYG{l+s}{item.split(\PYGZsq{}\PYGZus{}\PYGZsq{})[0]}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}\PYGZus{}\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{item.split(\PYGZsq{}\PYGZus{}\PYGZsq{})[1],}
                       \PYG{l+s}{\PYGZsq{}packages\PYGZsq{}:}\PYG{n+nv}{ }\PYG{l+s}{item\PYGZcb{}]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{hostvars[inventory\PYGZus{}hostname].keys()\textbar{}}
            \PYG{l+s}{select(\PYGZsq{}match\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}\PYGZca{}lp\PYGZus{}.*\PYGZus{}packages\PYGZdl{}\PYGZsq{})\textbar{}}
            \PYG{l+s}{list}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}auto}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages\PYGZhy{}auto}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{local\PYGZus{}pkg\PYGZus{}lists\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{[\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{item.install,}\PYG{n+nv}{ }\PYG{l+s}{default=\PYGZsq{}false\PYGZsq{})\textbar{}bool}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}]}
              \PYG{l+s}{packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{item.packages)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{local\PYGZus{}pkg\PYGZus{}lists}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}auto}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages\PYGZhy{}auto}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{local\PYGZus{}pkg\PYGZus{}list\PYGZdq{}}
  \PYG{n+nt}{set\PYGZus{}fact}\PYG{p}{:}
    \PYG{n+nt}{local\PYGZus{}pkg\PYGZus{}list}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{local\PYGZus{}pkg\PYGZus{}list}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{item.packages)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{local\PYGZus{}pkg\PYGZus{}lists}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{item.install,}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{default=\PYGZsq{}False\PYGZsq{})\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}auto}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages\PYGZhy{}auto}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{local\PYGZus{}pkg\PYGZus{}list\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{local\PYGZus{}pkg\PYGZus{}list}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}auto}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages\PYGZhy{}auto}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{local\PYGZus{}pkg\PYGZus{}list}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}auto}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{packages.yml}
\label{\detokenize{annotation:packages-yml}}\label{\detokenize{annotation:as-packages-yml}}
Synopsis: Configure packages.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/packages.yml}{packages.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{ansible\PYGZus{}os\PYGZus{}family [\PYGZob{}\PYGZob{} ansible\PYGZus{}os\PYGZus{}family \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}packages\PYGZus{}auto [\PYGZob{}\PYGZob{} lp\PYGZus{}packages\PYGZus{}auto \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}packages\PYGZus{}autoremove [\PYGZob{}\PYGZob{} lp\PYGZus{}packages\PYGZus{}autoremove \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}preinstall}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}preinstall\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}packages\PYGZus{}install}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}packages\PYGZus{}install\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}packages\PYGZus{}remove}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}packages\PYGZus{}remove\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}postinstall}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}postinstall\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{package}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{selections}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{before}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{Install/Remove\PYGZdq{}}
  \PYG{n+nt}{dpkg\PYGZus{}selections}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{selection}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.selection}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}preinstall}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}preinstall}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{listed}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{variables}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}*\PYGZus{}packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{packages\PYGZhy{}auto.yml}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}auto\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}auto}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}packages\PYGZus{}install}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}install}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Remove}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/remove\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}packages\PYGZus{}remove}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}remove}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}packages}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{package}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{selections}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{after}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{Install/Remove\PYGZdq{}}
  \PYG{n+nt}{dpkg\PYGZus{}selections}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{selection}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.selection}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}postinstall}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}packages\PYGZus{}selections\PYGZus{}postinstall}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{passwords.yml}
\label{\detokenize{annotation:passwords-yml}}\label{\detokenize{annotation:as-passwords-yml}}
Synopsis: Configure passwords.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/passwords.yml}{passwords.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}passwords}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}passwords\PYGZus{}fail\PYGZus{}gracefully [\PYGZob{}\PYGZob{} lp\PYGZus{}passwords\PYGZus{}fail\PYGZus{}gracefully \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}password\PYGZus{}update\PYGZus{}password [\PYGZob{}\PYGZob{} lp\PYGZus{}password\PYGZus{}update\PYGZus{}password \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}users}
      \PYG{n+no}{\PYGZob{}\PYGZpc{} if lp\PYGZus{}passwords\PYGZus{}debug\PYGZus{}classified\textbar{}bool \PYGZpc{}\PYGZcb{}}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}users\textbar{}default([])\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{\PYGZob{}\PYGZpc{} else \PYGZpc{}\PYGZcb{}}
      \PYG{n+no}{\PYGZob{}\PYGZpc{} for user in lp\PYGZus{}users\textbar{}default([]) \PYGZpc{}\PYGZcb{}}
      \PYG{n+no}{\PYGZhy{} userpass: ************}
      \PYG{n+no}{\PYGZob{}\PYGZpc{} for k,v in user.items() \PYGZpc{}\PYGZcb{}}
      \PYG{n+no}{\PYGZob{}\PYGZpc{} if k not in [\PYGZsq{}userpass\PYGZsq{}] \PYGZpc{}\PYGZcb{}}
        \PYG{n+no}{\PYGZob{}\PYGZob{} k \PYGZcb{}\PYGZcb{}: \PYGZob{}\PYGZob{} v \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{\PYGZob{}\PYGZpc{} endif \PYGZpc{}\PYGZcb{}}
      \PYG{n+no}{\PYGZob{}\PYGZpc{} endfor \PYGZpc{}\PYGZcb{}}
      \PYG{n+no}{\PYGZob{}\PYGZpc{} endfor \PYGZpc{}\PYGZcb{}}
      \PYG{n+no}{\PYGZob{}\PYGZpc{} endif \PYGZpc{}\PYGZcb{}}

      \PYG{n+no}{lp\PYGZus{}passwordstore [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}install [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}install \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}debug [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}debug \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}backup [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}backup \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}create [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}create \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}length [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}length \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}nosymbols [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}nosymbols \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}overwrite [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}overwrite \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}passwordstore [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}passwordstore \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}returnall  [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}returnall \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}subkey [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}subkey \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}idempotent\PYGZus{}password\PYGZus{}hash [\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}idempotent\PYGZus{}password\PYGZus{}hash \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}passwordstore\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}passwordstore\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}passwords}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Passwordstore\PYGZdq{}}
  \PYG{n+nt}{block}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}passwords}\PYG{p}{:} \PYG{n+nt}{Passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
      \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
      \PYG{n+nt}{loop}\PYG{p}{:}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpg\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}gpg\PYGZus{}packages\PYGZus{}extra}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{vars}\PYG{p}{:}
        \PYG{n+nt}{my\PYGZus{}delegate\PYGZus{}to\PYGZus{}localhost}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
      \PYG{n+nt}{run\PYGZus{}once}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
      \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwordstore\PYGZus{}install\textbar{}bool}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}passwords}\PYG{p}{:} \PYG{n+nt}{Passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Retrieve,}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{create,}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{update}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{userpass\PYGZdq{}}
      \PYG{n+nt}{include\PYGZus{}role}\PYG{p}{:}
        \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{vbotka.ansible\PYGZus{}lib}
        \PYG{n+nt}{tasks\PYGZus{}from}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{al\PYGZus{}pws\PYGZus{}user\PYGZus{}host.yml}
      \PYG{n+nt}{vars}\PYG{p}{:}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}debug}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}debug}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}backup}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}create}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}create}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}length}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}length}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}nosymbols}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}nosymbols}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}overwrite}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}overwrite}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}passwordstore}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}passwordstore}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}returnall}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}returnall}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}subkey}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}subkey}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}idempotent\PYGZus{}password\PYGZus{}hash}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}passwordstore\PYGZus{}idempotent\PYGZus{}password\PYGZus{}hash}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
        \PYG{n+nt}{al\PYGZus{}pws\PYGZus{}query}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}users}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}passwords}\PYG{p}{:} \PYG{n+nt}{Passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{my\PYGZus{}passwords\PYGZdq{}}
      \PYG{n+nt}{set\PYGZus{}fact}\PYG{p}{:}
        \PYG{n+nt}{my\PYGZus{}passwords}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{my\PYGZus{}passwords\textbar{}default([])}\PYG{n+nv}{ }\PYG{l+s}{+}
                          \PYG{l+s}{[item\textbar{}dict2items\textbar{}}
                          \PYG{l+s}{rejectattr(\PYGZsq{}key\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}equalto\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}userpass\PYGZsq{})\textbar{}}
                          \PYG{l+s}{list\textbar{}items2dict\textbar{}}
                          \PYG{l+s}{combine(\PYGZob{}\PYGZsq{}update\PYGZus{}password\PYGZsq{}:}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}password\PYGZus{}update\PYGZus{}password\PYGZcb{})]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{al\PYGZus{}pws\PYGZus{}query\PYGZus{}result}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{loop\PYGZus{}control}\PYG{p}{:}
        \PYG{n+nt}{label}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}passwords}\PYG{p}{:} \PYG{n+nt}{Passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{my\PYGZus{}passwords\PYGZdq{}}
      \PYG{n+nt}{debug}\PYG{p}{:}
        \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{my\PYGZus{}passwords}
      \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords\PYGZus{}debug\textbar{}bool}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}passwords}\PYG{p}{:}  \PYG{n+nt}{Passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Include}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{users\PYGZdq{}}
      \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{users.yml}
      \PYG{n+nt}{vars}\PYG{p}{:}
        \PYG{n+nt}{lp\PYGZus{}users}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{my\PYGZus{}passwords}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{rescue}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}passwords}\PYG{p}{:} \PYG{n+nt}{Passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{fail\PYGZdq{}}
      \PYG{n+nt}{debug}\PYG{p}{:}
        \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
      \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords\PYGZus{}debug\PYGZus{}classified\textbar{}bool}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}passwords}\PYG{p}{:} \PYG{n+nt}{Passwordstore}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Fail\PYGZdq{}}
      \PYG{n+nt}{fail}\PYG{p}{:}
        \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{[ERROR]}\PYG{n+nv}{ }\PYG{l+s}{Passwordstore}\PYG{n+nv}{ }\PYG{l+s}{failed.}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords\PYGZus{}fail\PYGZus{}gracefully\textbar{}bool}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwordstore\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}passwords\PYGZus{}passwordstore}

\PYG{c+c1}{\PYGZsh{}  EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{pm-utils.yml}
\label{\detokenize{annotation:pm-utils-yml}}\label{\detokenize{annotation:as-pm-utils-yml}}
Synopsis: Configure pm-utils.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/pm-utils.yml}{pm-utils.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall pm\PYGZhy{}utils}

\PYG{c+c1}{\PYGZsh{} TODO:}
\PYG{c+c1}{\PYGZsh{} 1) add variables: lp\PYGZus{}pm\PYGZus{}powerd, lp\PYGZus{}pm\PYGZus{}configd}
\PYG{c+c1}{\PYGZsh{} 2) add templates: pm\PYGZhy{}powerd.j2, pm\PYGZhy{}configd.j2}
\PYG{c+c1}{\PYGZsh{} 3) add cases: resume, thaw, suspend, hibernate}
\PYG{c+c1}{\PYGZsh{} 4) install pm\PYGZhy{}utils}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}pm\PYGZus{}utils}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/pm/sleep.d\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{pm\PYGZhy{}sleepd.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{/etc/pm/sleep.d/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value.file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0755}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{with\PYGZus{}dict}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}pm\PYGZus{}sleepd\textbar{}default(\PYGZob{}\PYGZcb{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{item.value.file\textbar{}length}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZgt{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{0}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{postfix.yml}
\label{\detokenize{annotation:postfix-yml}}\label{\detokenize{annotation:as-postfix-yml}}
Synopsis: Configure postfix.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/postfix.yml}{postfix.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall postfix}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}postfix}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{ansible\PYGZus{}os\PYGZus{}family [\PYGZob{}\PYGZob{} ansible\PYGZus{}os\PYGZus{}family \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}postfix\PYGZus{}service [\PYGZob{}\PYGZob{} lp\PYGZus{}postfix\PYGZus{}service \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}postfix\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}postfix\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}postfix\PYGZus{}main\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}postfix\PYGZus{}main\PYGZus{}conf\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}postfix\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}postfix\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}postfix}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/postfix/main.cf\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/postfix/main.cf}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{=}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}postfix\PYGZus{}main\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{postfix}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}postfix\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}postfix}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{postfix\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}postfix\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}postfix\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}postfix\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}postfix}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{postfix\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}postfix\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}postfix\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}postfix\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{reboot.yml}
\label{\detokenize{annotation:reboot-yml}}\label{\detokenize{annotation:as-reboot-yml}}
Synopsis: Configure reboot.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/reboot.yml}{reboot.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall reboot}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{reboot}\PYG{n+nv}{ }\PYG{l+s}{Debug}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}reboot\PYGZus{}force [\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}force \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}ignore [\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}ignore \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}file [\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}file \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}reboot\PYGZus{}command [\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}command \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}connect\PYGZus{}timeout [\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}connect\PYGZus{}timeout \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}sleep [\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}sleep \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}delay [\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}delay \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}timeout [\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}timeout \PYGZcb{}\PYGZcb{}]}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}reboot\PYGZus{}debug\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}reboot}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debian}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{test}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{block}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}reboot}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
      \PYG{n+nt}{stat}\PYG{p}{:}
        \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reboot\PYGZus{}required\PYGZus{}file\PYGZus{}status}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}reboot}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Set}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{reboot\PYGZus{}required\PYGZdq{}}
      \PYG{n+nt}{set\PYGZus{}fact}\PYG{p}{:}
        \PYG{n+nt}{reboot\PYGZus{}required}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{reboot\PYGZus{}required\PYGZus{}file\PYGZus{}status.exists\textbar{}}
                             \PYG{l+s}{default(false)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}reboot}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{RedHat}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{test}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}command}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{block}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}reboot}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Run}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}command}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
      \PYG{n+nt}{command}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}command}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
      \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reboot\PYGZus{}required\PYGZus{}cmd\PYGZus{}status}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}reboot}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Set}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{reboot\PYGZus{}required\PYGZdq{}}
      \PYG{n+nt}{set\PYGZus{}fact}\PYG{p}{:}
        \PYG{n+nt}{reboot\PYGZus{}required}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{(reboot\PYGZus{}required\PYGZus{}cmd\PYGZus{}status.rc}\PYG{n+nv}{ }\PYG{l+s}{!=}\PYG{n+nv}{ }\PYG{l+s}{0)\textbar{}}
                              \PYG{l+s}{ternary(true,}\PYG{n+nv}{ }\PYG{l+s}{false)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}RedHat\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}reboot}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{reboot\PYGZus{}required\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reboot\PYGZus{}required}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}reboot\PYGZus{}debug\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}reboot}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Reboot}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{wait}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{for}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{connection\PYGZdq{}}
  \PYG{n+nt}{reboot}\PYG{p}{:}
    \PYG{n+nt}{connect\PYGZus{}timeout}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}connect\PYGZus{}timeout}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{post\PYGZus{}reboot\PYGZus{}delay}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}delay}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{reboot\PYGZus{}timeout}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}timeout}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(reboot\PYGZus{}required\textbar{}default(false)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}
        \PYG{l+lScalar+lScalarPlain}{(not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}ignore))}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}reboot\PYGZus{}force\textbar{}bool}

\PYG{c+c1}{\PYGZsh{} \PYGZhy{} name: \PYGZdq{}reboot: Reboot and wait for connection\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}   block:}
\PYG{c+c1}{\PYGZsh{}     \PYGZhy{} name: \PYGZdq{}reboot: Reboot\PYGZdq{}  \PYGZsh{} noqa 305}
\PYG{c+c1}{\PYGZsh{}       shell: \PYGZdq{}\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}command \PYGZcb{}\PYGZcb{}\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}       async: 1}
\PYG{c+c1}{\PYGZsh{}       poll: 0}
\PYG{c+c1}{\PYGZsh{}     \PYGZhy{} name: \PYGZdq{}reboot: Wait for connection\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}       wait\PYGZus{}for\PYGZus{}connection:}
\PYG{c+c1}{\PYGZsh{}         connect\PYGZus{}timeout: \PYGZdq{}\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}connect\PYGZus{}timeout \PYGZcb{}\PYGZcb{}\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}         sleep: \PYGZdq{}\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}sleep \PYGZcb{}\PYGZcb{}\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}         delay: \PYGZdq{}\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}delay \PYGZcb{}\PYGZcb{}\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}         timeout: \PYGZdq{}\PYGZob{}\PYGZob{} lp\PYGZus{}reboot\PYGZus{}wait\PYGZus{}timeout \PYGZcb{}\PYGZcb{}\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}   when: (reboot\PYGZus{}required\textbar{}default(false) and}
\PYG{c+c1}{\PYGZsh{}         (not lp\PYGZus{}reboot\PYGZus{}required\PYGZus{}ignore)) or lp\PYGZus{}reboot\PYGZus{}force}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{repos.yml}
\label{\detokenize{annotation:repos-yml}}\label{\detokenize{annotation:as-repos-yml}}
Synopsis: Configure repos.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/repos.yml}{repos.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall repos}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}repos}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}repos\PYGZus{}keys}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}repos\PYGZus{}keys\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}repos}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}repos\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}repos\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}repos\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}repos}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Manage}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{repo}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{signing}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{keys\PYGZdq{}}
  \PYG{n+nt}{apt\PYGZus{}key}\PYG{p}{:}
    \PYG{n+nt}{data}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.data\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{file}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.file\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{id}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.id\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{keyring}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.keyring\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{keyserver}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.keyserver\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{url}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.url\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{validate\PYGZus{}certs}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.validate\PYGZus{}certs\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}repos\PYGZus{}keys}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{retries}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}install\PYGZus{}retries}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{until}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{is}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{succeeded}
  \PYG{n+nt}{delay}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}install\PYGZus{}delay}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}repos\PYGZus{}keys\PYGZus{}manage}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}repos}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Manage}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{repositories\PYGZdq{}}
  \PYG{n+nt}{apt\PYGZus{}repository}\PYG{p}{:}
    \PYG{n+nt}{codename}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.codename\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{filename}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.filename\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.mode\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{repo}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.repo\textbar{}mandatory}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{update\PYGZus{}cache}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.update\PYGZus{}cache\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{validate\PYGZus{}certs}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.validate\PYGZus{}certs\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}repos}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}repos\PYGZus{}manage}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{resolvconf.yml}
\label{\detokenize{annotation:resolvconf-yml}}\label{\detokenize{annotation:as-resolvconf-yml}}
Synopsis: Configure resolvconf.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/resolvconf.yml}{resolvconf.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}resolvconf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}resolvconf\PYGZus{}service [\PYGZob{}\PYGZob{} lp\PYGZus{}resolvconf\PYGZus{}service \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}resolvconf\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}resolvconf\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}package\PYGZus{}state [\PYGZob{}\PYGZob{} lp\PYGZus{}package\PYGZus{}state \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}resolvconf\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}resolvconf\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}resolvconf\PYGZus{}confd\PYGZus{}head\PYGZus{}path [\PYGZob{}\PYGZob{} lp\PYGZus{}resolvconf\PYGZus{}confd\PYGZus{}head\PYGZus{}path \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}resolvconf\PYGZus{}conf\PYGZus{}owner [\PYGZob{}\PYGZob{} lp\PYGZus{}resolvconf\PYGZus{}conf\PYGZus{}owner \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}resolvconf\PYGZus{}conf\PYGZus{}group [\PYGZob{}\PYGZob{} lp\PYGZus{}resolvconf\PYGZus{}conf\PYGZus{}group \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}resolvconf\PYGZus{}conf\PYGZus{}mode [\PYGZob{}\PYGZob{} lp\PYGZus{}resolvconf\PYGZus{}conf\PYGZus{}mode \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}resolvconf\PYGZus{}confd\PYGZus{}head}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}resolvconf\PYGZus{}confd\PYGZus{}head\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}resolvconf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}resolvconf\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}resolvconf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf\PYGZus{}confd\PYGZus{}head\PYGZus{}path}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{resolvconf\PYGZhy{}confd\PYGZhy{}head.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}resolvconf\PYGZus{}confd\PYGZus{}head\PYGZus{}path}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}resolvconf\PYGZus{}conf\PYGZus{}owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}resolvconf\PYGZus{}conf\PYGZus{}group}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}resolvconf\PYGZus{}conf\PYGZus{}mode}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{restart}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{resolvconf}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf\PYGZus{}confd\PYGZus{}head}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}resolvconf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{resolvconf\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}resolvconf\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}resolvconf}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{resolvconf\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}resolvconf\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}resolvconf\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{service.yml}
\label{\detokenize{annotation:service-yml}}\label{\detokenize{annotation:as-service-yml}}
Synopsis: Configure service.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/service.yml}{service.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}service}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Set}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{my\PYGZus{}service\PYGZus{}name\PYGZus{}vars\PYGZdq{}}
  \PYG{n+nt}{set\PYGZus{}fact}\PYG{p}{:}
    \PYG{n+nt}{my\PYGZus{}service\PYGZus{}name\PYGZus{}vars}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{my\PYGZus{}service\PYGZus{}name\PYGZus{}vars\textbar{}default([])}\PYG{n+nv}{ }\PYG{l+s}{+}
                              \PYG{l+s}{[\PYGZob{}item:}\PYG{n+nv}{ }\PYG{l+s}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}lp\PYGZus{}\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}\PYGZus{}service\PYGZsq{})\PYGZcb{}]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}service\PYGZus{}enable}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZsq{}lp\PYGZus{}\PYGZsq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{+}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{item,}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{default=\PYGZsq{}false\PYGZsq{})}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}service\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}service}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Set}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{my\PYGZus{}service\PYGZus{}enable\PYGZus{}vars\PYGZdq{}}
  \PYG{n+nt}{set\PYGZus{}fact}\PYG{p}{:}
    \PYG{n+nt}{my\PYGZus{}service\PYGZus{}enable\PYGZus{}vars}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{my\PYGZus{}service\PYGZus{}enable\PYGZus{}vars\textbar{}default([])}\PYG{n+nv}{ }\PYG{l+s}{+}
                                \PYG{l+s}{[\PYGZob{}item:}\PYG{n+nv}{ }\PYG{l+s}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}lp\PYGZus{}\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}\PYGZus{}enable\PYGZsq{})\PYGZcb{}]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}service\PYGZus{}enable}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZsq{}lp\PYGZus{}\PYGZsq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{+}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{item,}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{default=\PYGZsq{}false\PYGZsq{})}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}service\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}service}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{my\PYGZus{}msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{my\PYGZus{}msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}service}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}service\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}service\PYGZus{}enable}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}service\PYGZus{}enable\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{my\PYGZus{}service\PYGZus{}name\PYGZus{}vars}
      \PYG{n+no}{\PYGZob{}\PYGZob{} my\PYGZus{}service\PYGZus{}name\PYGZus{}vars\textbar{}default([])\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{my\PYGZus{}service\PYGZus{}enable\PYGZus{}vars}
      \PYG{n+no}{\PYGZob{}\PYGZob{} my\PYGZus{}service\PYGZus{}enable\PYGZus{}vars\textbar{}default([])\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}service\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}service\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}service}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Automaticaly}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{services}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{managed}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{by}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{this}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{role\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}lp\PYGZus{}\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}\PYGZus{}service\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}lp\PYGZus{}\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{+}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}\PYGZus{}enable\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}service\PYGZus{}enable}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lookup(\PYGZsq{}vars\PYGZsq{},}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZsq{}lp\PYGZus{}\PYGZsq{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{+}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{item,}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{default=\PYGZsq{}false\PYGZsq{})}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}service\PYGZus{}auto}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}service}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{General}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{managent}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{of}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{services\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.enabled\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{arguments}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.arguments\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{pattern}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.pattern\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{runlevel}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.runlevel\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{sleep}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.sleep\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{use}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.use\textbar{}default(\PYGZsq{}omit\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{(item.state}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{is}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{defined)}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{or}
        \PYG{l+lScalar+lScalarPlain}{(item.enabled}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{is}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{defined)}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}service\PYGZus{}general}

\PYG{c+c1}{\PYGZsh{} TODO: Mask a service. Do not allow any servce to activate a masked}
\PYG{c+c1}{\PYGZsh{} service. See tasks/wpagui.yml}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{smart.yml}
\label{\detokenize{annotation:smart-yml}}\label{\detokenize{annotation:as-smart-yml}}
Synopsis: Configure smart.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/smart.yml}{smart.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall smart}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}smart}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}smart}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}.}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{Do}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{scan}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{for}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{devices\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{absent}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*DEVICESCAN}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}group}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}mode}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}devicescan\textbar{}bool}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{smart}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}smart}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{devices}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.regexp}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.line}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}group}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}conf\PYGZus{}mode}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}devices}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{smart}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}smart}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{smart\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}smart}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{service\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}debug\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}smart}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{smart\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}smart\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}smart}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{service\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}smart\PYGZus{}debug\textbar{}bool}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{speechd.yml}
\label{\detokenize{annotation:speechd-yml}}\label{\detokenize{annotation:as-speechd-yml}}
Synopsis: Configure speechd.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/speechd.yml}{speechd.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall speechd}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}speechd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{lp\PYGZus{}speechd\PYGZus{}enable}\PYG{n+nv}{ }\PYG{l+s}{[\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}speechd\PYGZus{}enable}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}]}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}speechd\PYGZus{}debug\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}speechd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{speech\PYGZhy{}dispatcher\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}speechd\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}speechd\PYGZus{}enable\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}speechd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{speech\PYGZhy{}dispatcher\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}speechd\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}speechd\PYGZus{}enable\textbar{}bool}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{sshd.yml}
\label{\detokenize{annotation:sshd-yml}}\label{\detokenize{annotation:as-sshd-yml}}
Synopsis: Configure sshd.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sshd.yml}{sshd.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall sshd}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}sshd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}sshd\PYGZus{}config}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}sshd\PYGZus{}config\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sshd\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sshd\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}sshd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/ssh/sshd\PYGZus{}config\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/ssh/sshd\PYGZus{}config}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{insertbefore}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZsq{}\PYGZsh{}\PYGZsq{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{validate}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}sshd\PYGZus{}path}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{\PYGZhy{}t}\PYG{n+nv}{ }\PYG{l+s}{\PYGZhy{}f}\PYG{n+nv}{ }\PYG{l+s}{\PYGZpc{}s}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}sshd\PYGZus{}config}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{sshd}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sshd\PYGZus{}config}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}sshd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{sshd\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}sshd\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sshd\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sshd\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}sshd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{sshd\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}sshd\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sshd\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sshd\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{ssh.yml}
\label{\detokenize{annotation:ssh-yml}}\label{\detokenize{annotation:as-ssh-yml}}
Synopsis: Configure ssh.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/ssh.yml}{ssh.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall ssh}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ssh}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}ssh\PYGZus{}config}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}ssh\PYGZus{}config\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ssh\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ssh\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ssh}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/ssh/ssh\PYGZus{}config\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{ssh\PYGZus{}config.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/ssh/ssh\PYGZus{}config}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ssh\PYGZus{}conf}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{sudoers.yml}
\label{\detokenize{annotation:sudoers-yml}}\label{\detokenize{annotation:as-sudoers-yml}}
Synopsis: Configure sudoers.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sudoers.yml}{sudoers.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall sudoers}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}sudoers}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}sudoers\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}sudoers\PYGZus{}conf\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sudoers\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sudoers\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}sudoers}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/sudoers\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/sudoers}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.line}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(\PYGZsq{}present\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}sudoers\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sudoers\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}sudoers}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/sudoers.d/01\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/sudoers.d/01}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}sudoers\PYGZus{}owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}sudoers\PYGZus{}group}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}sudoers\PYGZus{}mode}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}sudoers\PYGZus{}01}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sudoers\PYGZus{}dconf}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{swap.yml}
\label{\detokenize{annotation:swap-yml}}\label{\detokenize{annotation:as-swap-yml}}
Synopsis: Configure swap.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/swap.yml}{swap.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}swap}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}swap [\PYGZob{}\PYGZob{} lp\PYGZus{}swap \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}swap\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}swap\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}swap\PYGZus{}file [\PYGZob{}\PYGZob{} lp\PYGZus{}swap\PYGZus{}file\textbar{}default(\PYGZdq{}UNDEFINED\PYGZdq{}) \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}swap\PYGZus{}size [\PYGZob{}\PYGZob{} lp\PYGZus{}swap\PYGZus{}size\textbar{}default(\PYGZdq{}UNDEFINED\PYGZdq{}) \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}swap\PYGZus{}stsize [\PYGZob{}\PYGZob{} lp\PYGZus{}swap\PYGZus{}stsize\textbar{}default(\PYGZdq{}UNDEFINED\PYGZdq{}) \PYGZcb{}\PYGZcb{}]}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}swap}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{swapfile}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{shell}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{sh}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}c}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZsq{}if}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{[}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{!}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZhy{}e}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{];}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{then}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{printf}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}create\PYGZdq{};}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{fi\PYGZsq{}}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{command\PYGZus{}result}
  \PYG{n+nt}{changed\PYGZus{}when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{command\PYGZus{}result.stdout}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}create\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{mount}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{swap}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{file}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}swapfile}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}swap}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Change}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{swapfile}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{shell}\PYG{p}{:} \PYG{p+pIndicator}{\PYGZgt{}}
    \PYG{n+no}{sh \PYGZhy{}c}
    \PYG{n+no}{\PYGZsq{}if [ \PYGZhy{}e \PYGZob{}\PYGZob{} lp\PYGZus{}swap\PYGZus{}file \PYGZcb{}\PYGZcb{} ] \PYGZam{}\PYGZam{}}
    \PYG{n+no}{[ \PYGZdq{}{}`stat \PYGZhy{}\PYGZhy{}format \PYGZsq{}\PYGZpc{}s\PYGZsq{} \PYGZob{}\PYGZob{} lp\PYGZus{}swap\PYGZus{}file \PYGZcb{}\PYGZcb{}{}`\PYGZdq{} \PYGZhy{}ne \PYGZdq{}\PYGZob{}\PYGZob{} lp\PYGZus{}swap\PYGZus{}stsize \PYGZcb{}\PYGZcb{}\PYGZdq{} ];}
    \PYG{n+no}{then printf \PYGZdq{}change\PYGZdq{};}
    \PYG{n+no}{fi\PYGZsq{}}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{command\PYGZus{}result}
  \PYG{n+nt}{changed\PYGZus{}when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{command\PYGZus{}result.stdout}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}change\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{change}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{mount}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{swap}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{file}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}swapfile}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}swap}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{swap}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{entry}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/fstab\PYGZdq{}}
  \PYG{n+nt}{mount}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{none}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}swap\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{fstype}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{swap}
    \PYG{n+nt}{opts}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{sw}
    \PYG{n+nt}{passno}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{dump}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{present}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}fstab}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}swap}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Remove}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{swap}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{entry}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{from}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/fstab\PYGZdq{}}
  \PYG{n+nt}{mount}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{none}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}swap\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{fstype}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{swap}
    \PYG{n+nt}{opts}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{sw}
    \PYG{n+nt}{passno}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{0}
    \PYG{n+nt}{dump}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{0}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{absent}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{remove}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{swap}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{file}
  \PYG{n+nt}{when}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}enable\textbar{}bool}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{is}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{defined}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}swap\PYGZus{}swapfile}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{sysctl.yml}
\label{\detokenize{annotation:sysctl-yml}}\label{\detokenize{annotation:as-sysctl-yml}}
Synopsis: Configure sysctl.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/sysctl.yml}{sysctl.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall sysctl}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}sysctl}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}sysctl\PYGZus{}vars}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}sysctl\PYGZus{}vars\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sysctl\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}sysctl\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}sysctl}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/sysctl.conf\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/sysctl.conf}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{n+nv}{ }\PYG{l+s}{=}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}sysctl\PYGZus{}vars}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{load}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{sysctl}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{settings}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{timesyncd.yml}
\label{\detokenize{annotation:timesyncd-yml}}\label{\detokenize{annotation:as-timesyncd-yml}}
Synopsis: Configure timesyncd.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/timesyncd.yml}{timesyncd.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}timesyncd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}timesyncd [\PYGZob{}\PYGZob{} lp\PYGZus{}timesyncd \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}timesyncd\PYGZus{}NTP [\PYGZob{}\PYGZob{} lp\PYGZus{}timesyncd\PYGZus{}NTP \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}timesyncd\PYGZus{}FallbackNTP [\PYGZob{}\PYGZob{} lp\PYGZus{}timesyncd\PYGZus{}FallbackNTP \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}timesyncd\PYGZus{}RootDistanceMaxSec [\PYGZob{}\PYGZob{} lp\PYGZus{}timesyncd\PYGZus{}RootDistanceMaxSec \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}timesyncd\PYGZus{}PollIntervalMinSec [\PYGZob{}\PYGZob{} lp\PYGZus{}timesyncd\PYGZus{}PollIntervalMinSec \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}timesyncd\PYGZus{}PollIntervalMaxSec [\PYGZob{}\PYGZob{} lp\PYGZus{}timesyncd\PYGZus{}PollIntervalMaxSec \PYGZcb{}\PYGZcb{}]}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timesyncd\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timesyncd\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}timesyncd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/systemd/timesyncd.conf\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{timesyncd.conf.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/systemd/timesyncd.conf}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{restart}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{timesyncd}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timesyncd\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}timesyncd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{timesyncd\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}timesyncd\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timesyncd\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timesyncd\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}timesyncd}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{timesyncd\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}timesyncd\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timesyncd\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timesyncd\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} Notes on CentOS}
\PYG{c+c1}{\PYGZsh{} * systemd compiled without timesyncd service in CentOS 7 ?}
\PYG{c+c1}{\PYGZsh{} * use ntpd or chrony only ?}
\PYG{c+c1}{\PYGZsh{} https://unix.stackexchange.com/questions/286708/}
\PYG{c+c1}{\PYGZsh{} centos\PYGZhy{}7\PYGZhy{}2\PYGZhy{}minimal\PYGZhy{}time\PYGZhy{}synchronization\PYGZhy{}timedated\PYGZhy{}and\PYGZhy{}or\PYGZhy{}ntpd\PYGZhy{}chrony}
\PYG{c+c1}{\PYGZsh{} https://www.freedesktop.org/wiki/Software/systemd/timedated/}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{timezone.yml}
\label{\detokenize{annotation:timezone-yml}}\label{\detokenize{annotation:as-timezone-yml}}
Synopsis: Configure timezone.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/timezone.yml}{timezone.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}timezone}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{lp\PYGZus{}timezone\PYGZus{}zoneinfo}\PYG{n+nv}{ }\PYG{l+s}{[\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}timezone\PYGZus{}zoneinfo}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}]}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timezone\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timezone\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}timezone}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Set}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{timezone}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timezone\PYGZus{}zoneinfo}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{timezone}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}timezone\PYGZus{}zoneinfo\textbar{}default(\PYGZsq{}UTC\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}timezone\PYGZus{}set}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{tlp.yml}
\label{\detokenize{annotation:tlp-yml}}\label{\detokenize{annotation:as-tlp-yml}}
Synopsis: Configure tlp.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/tlp.yml}{tlp.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall tlp}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}tlp}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}tlp\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}tlp\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}tlp\PYGZus{}thinkpad [\PYGZob{}\PYGZob{} lp\PYGZus{}tlp\PYGZus{}thinkpad \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}tlp\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}tlp\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}tlp\PYGZus{}packages\PYGZus{}tp}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}tlp\PYGZus{}packages\PYGZus{}tp\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}tlp\PYGZus{}config\PYGZus{}file [\PYGZob{}\PYGZob{} lp\PYGZus{}tlp\PYGZus{}config\PYGZus{}file \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}tlp\PYGZus{}config}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}tlp\PYGZus{}config\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}tlp\PYGZus{}services}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}tlp\PYGZus{}services\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}tlp\PYGZus{}restart\PYGZus{}service [\PYGZob{}\PYGZob{} lp\PYGZus{}tlp\PYGZus{}restart\PYGZus{}service \PYGZcb{}\PYGZcb{}]}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}tlp}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}tlp\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}tlp}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{for}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ThinkPad\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}tlp\PYGZus{}packages\PYGZus{}tp}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}thinkpad\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}tlp}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}config\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}tlp\PYGZus{}config\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}=\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}tlp\PYGZus{}config}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{restart}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{tlp}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}tlp}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{tlp\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}tlp\PYGZus{}services}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}tlp}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{tlp\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}tlp\PYGZus{}services}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}tlp\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{udev.yml}
\label{\detokenize{annotation:udev-yml}}\label{\detokenize{annotation:as-udev-yml}}
Synopsis: Configure udev.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/udev.yml}{udev.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall udev}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}udev}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir [\PYGZob{}\PYGZob{} lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}template [\PYGZob{}\PYGZob{} lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}template \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}udev\PYGZus{}rules}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}udev\PYGZus{}rules\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}

      \PYG{n+no}{lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}template [\PYGZob{}\PYGZob{} lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}template \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}rules\PYGZus{}file [\PYGZob{}\PYGZob{} lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}rules\PYGZus{}file \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}rules}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}rules\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}

      \PYG{n+no}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}name\PYGZus{}rules\PYGZus{}file [\PYGZob{}\PYGZob{} lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}name\PYGZus{}rules\PYGZus{}file \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}name\PYGZus{}rules}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}name\PYGZus{}rules\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}

      \PYG{n+no}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}run\PYGZus{}rules\PYGZus{}file [\PYGZob{}\PYGZob{} lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}run\PYGZus{}rules\PYGZus{}file \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}run\PYGZus{}rules}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}run\PYGZus{}rules\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}debug}

\PYG{c+c1}{\PYGZsh{} udev rules}
\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}udev}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}template}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}rules\textbar{}dict2items}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{udev}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}rules}

\PYG{c+c1}{\PYGZsh{} persistent\PYGZus{}net}
\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}udev}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}/}
                         \PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}rules\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}template}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}rules\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}persistent\PYGZus{}net\PYGZus{}rules}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{udev}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}persistentnet}

\PYG{c+c1}{\PYGZsh{} hci name}
\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}udev}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}/}
                         \PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}name\PYGZus{}rules\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{hci\PYGZhy{}name.rules.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}name\PYGZus{}rules\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}name\PYGZus{}rules}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{udev}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}hciname}

\PYG{c+c1}{\PYGZsh{} hci run}
\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}udev}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}/}
                         \PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}run\PYGZus{}rules\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{hci\PYGZhy{}run.rules.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}rules\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}run\PYGZus{}rules\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}hci\PYGZus{}run\PYGZus{}rules}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{udev}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}hcirun}

\PYG{c+c1}{\PYGZsh{} Service}
\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}udev}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{udev\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}udev}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{udev\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}udev\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}udev\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{ufw.yml}
\label{\detokenize{annotation:ufw-yml}}\label{\detokenize{annotation:as-ufw-yml}}
Synopsis: Configure ufw.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/ufw.yml}{ufw.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall ufw}

\PYG{c+c1}{\PYGZsh{}   Notes}
\PYG{c+c1}{\PYGZsh{}}
\PYG{c+c1}{\PYGZsh{} * Aliases of parameters in ufw module not implemented in task}
\PYG{c+c1}{\PYGZsh{}   \PYGZdq{}Configure ufw\PYGZdq{}.}
\PYG{c+c1}{\PYGZsh{} * It\PYGZsq{}s not necessary to reload ufs after configuration has}
\PYG{c+c1}{\PYGZsh{}   changed. Module ufw automatically updates the rules.}
\PYG{c+c1}{\PYGZsh{} * Best practice: First time \PYGZsq{}lp\PYGZus{}ufw\PYGZus{}reset: true\PYGZsq{}; configure and enable}
\PYG{c+c1}{\PYGZsh{}   ufs (configuration item \PYGZob{}state: \PYGZsq{}enabled\PYGZsq{}\PYGZcb{} reloads firewall and}
\PYG{c+c1}{\PYGZsh{}   enables firewall on boot); \PYGZsq{}lp\PYGZus{}ufw\PYGZus{}enable: true\PYGZsq{} start and enable ufw}
\PYG{c+c1}{\PYGZsh{}   service.}
\PYG{c+c1}{\PYGZsh{} * Configuration on the fly: configure and enable ufs.}
\PYG{c+c1}{\PYGZsh{} * The last configuration item should be \PYGZob{}state: \PYGZsq{}enabled\PYGZsq{}\PYGZcb{}.}
\PYG{c+c1}{\PYGZsh{} * See: man ufw.}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ufw}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}ufw\PYGZus{}enable [\PYGZob{}\PYGZob{} lp\PYGZus{}ufw\PYGZus{}enable \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}ufw\PYGZus{}reset [\PYGZob{}\PYGZob{} lp\PYGZus{}ufw\PYGZus{}reset \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}ufw\PYGZus{}reload [\PYGZob{}\PYGZob{} lp\PYGZus{}ufw\PYGZus{}reload \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}ufw\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}ufw\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}ufw\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}ufw\PYGZus{}conf\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ufw}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}ufw\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ufw}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{reset}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{firewall}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{to}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{installation}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{defaults\PYGZdq{}}
  \PYG{n+nt}{ufw}\PYG{p}{:}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reset}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}reset\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}reset}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ufw}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Reload}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{firewall\PYGZdq{}}
  \PYG{n+nt}{ufw}\PYG{p}{:}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reloaded}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}reload\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}reload}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ufw}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ufw\PYGZdq{}}
  \PYG{n+nt}{ufw}\PYG{p}{:}
    \PYG{n+nt}{comment}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.comment\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{default}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.default\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{delete}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.delete\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{direction}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.direction\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{from\PYGZus{}ip}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.from\PYGZus{}ip\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{from\PYGZus{}port}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.from\PYGZus{}port\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{insert}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.insert\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{insert\PYGZus{}relative\PYGZus{}to}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.insert\PYGZus{}relative\PYGZus{}to\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{interface}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.interface\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{log}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.log\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{logging}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.logging\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{proto}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.proto\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{route}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.route\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{rule}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.rule\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{to\PYGZus{}ip}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.to\PYGZus{}ip\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{to\PYGZus{}port}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.to\PYGZus{}port\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}ufw\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ufw}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ufw\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}ufw\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ufw}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{enabled}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{service\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{when}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}enable\textbar{}bool}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ufw}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ufw\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}ufw\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}service}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}ufw}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disabled}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{service\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{when}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}enable\textbar{}bool}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}ufw\PYGZus{}service}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{users.yml}
\label{\detokenize{annotation:users-yml}}\label{\detokenize{annotation:as-users-yml}}
Synopsis: Configure users.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/users.yml}{users.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}users}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}users}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}users\textbar{}default([\PYGZsq{}UNDEFINED\PYGZsq{}])\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}users\PYGZus{}groups}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}users\PYGZus{}groups\textbar{}default([\PYGZsq{}UNDEFINED\PYGZsq{}])\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}users}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Manage}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{user}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{accounts\PYGZdq{}}
  \PYG{n+nt}{user}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{authorization}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.authorization\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{comment}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.comment\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create\PYGZus{}home}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.create\PYGZus{}home\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{expires}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.expires\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{force}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.force\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{generate\PYGZus{}ssh\PYGZus{}key}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.generate\PYGZus{}ssh\PYGZus{}key\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.group\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{hidden}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.hidden\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{home}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.home\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{local}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.local\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{login\PYGZus{}class}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.login\PYGZus{}class\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{move\PYGZus{}home}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.move\PYGZus{}home\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{non\PYGZus{}unique}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.non\PYGZus{}unique\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{password}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.password\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{password\PYGZus{}lock}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.password\PYGZus{}lock\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{profile}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.profile\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{remove}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.remove\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{role}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.role\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{seuser}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{  }\PYG{l+s}{item.seuser\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{shell}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.shell\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{skeleton}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.skeleton\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{ssh\PYGZus{}key\PYGZus{}bits}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.ssh\PYGZus{}key\PYGZus{}bits\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{ssh\PYGZus{}key\PYGZus{}comment}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.ssh\PYGZus{}key\PYGZus{}comment\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{ssh\PYGZus{}key\PYGZus{}file}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.ssh\PYGZus{}key\PYGZus{}file\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{ssh\PYGZus{}key\PYGZus{}passphrase}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.ssh\PYGZus{}key\PYGZus{}passphrase\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{ssh\PYGZus{}key\PYGZus{}type}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.ssh\PYGZus{}key\PYGZus{}type\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{system}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.system\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{uid}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.uid\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{update\PYGZus{}password}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.update\PYGZus{}password\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}users\textbar{}default([])}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop\PYGZus{}control}\PYG{p}{:}
    \PYG{n+nt}{label}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users\PYGZus{}accounts}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}users}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Add}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{users}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{to}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{additional}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{groups\PYGZdq{}}
  \PYG{n+nt}{user}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{groups}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.groups}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{append}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.append\textbar{}default(true)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}users\PYGZus{}groups\textbar{}default([])}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}users\PYGZus{}groups}

\PYG{c+c1}{\PYGZsh{}  EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{vars.yml}
\label{\detokenize{annotation:vars-yml}}\label{\detokenize{annotation:as-vars-yml}}
Synopsis: Configure vars.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/vars.yml}{vars.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}vars}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Include}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{default}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{vars}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{for}
              \PYG{l+lScalar+lScalarPlain}{[\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{},}
               \PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}distribution}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{},}
               \PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}distribution\PYGZus{}release}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}]\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}vars}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lookup(\PYGZsq{}first\PYGZus{}found\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{params)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{params}\PYG{p}{:}
      \PYG{n+nt}{files}\PYG{p}{:}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{ansible\PYGZus{}distribution}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}\PYGZhy{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{ansible\PYGZus{}distribution\PYGZus{}release}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}.yml}\PYG{l+s}{\PYGZdq{}}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{ansible\PYGZus{}distribution}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}.yml}\PYG{l+s}{\PYGZdq{}}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{ansible\PYGZus{}os\PYGZus{}family}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}.yml}\PYG{l+s}{\PYGZdq{}}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{defaults.yml}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{default.yml}
      \PYG{n+nt}{paths}\PYG{p}{:}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{role\PYGZus{}path}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/vars/defaults}\PYG{l+s}{\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}vars}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{include}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{default}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{vars}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{from\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result.ansible\PYGZus{}included\PYGZus{}var\PYGZus{}files}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debug\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}vars}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Include}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{default}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{vars}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{for}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{various}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{flavors\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}flavors\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{sub/vars\PYGZhy{}flavors.yml}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}vars}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Include}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{custom}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{vars}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{for}
              \PYG{l+lScalar+lScalarPlain}{[\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{},}
               \PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}distribution}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{},}
               \PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}distribution\PYGZus{}release}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}]\PYGZdq{}}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{include\PYGZus{}vars}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lookup(\PYGZsq{}first\PYGZus{}found\PYGZsq{},}\PYG{n+nv}{ }\PYG{l+s}{params)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{params}\PYG{p}{:}
      \PYG{n+nt}{files}\PYG{p}{:}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{ansible\PYGZus{}distribution}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}\PYGZhy{}\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{ansible\PYGZus{}distribution\PYGZus{}release}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}.yml}\PYG{l+s}{\PYGZdq{}}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{ansible\PYGZus{}distribution}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}.yml}\PYG{l+s}{\PYGZdq{}}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{ansible\PYGZus{}os\PYGZus{}family}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}.yml}\PYG{l+s}{\PYGZdq{}}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{defaults.yml}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{default.yml}
      \PYG{n+nt}{paths}\PYG{p}{:}
        \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{role\PYGZus{}path}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/vars}\PYG{l+s}{\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}vars}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{include}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{custom}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{vars}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{from\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result.ansible\PYGZus{}included\PYGZus{}var\PYGZus{}files}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}debug\textbar{}bool}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{virtualbox.yml}
\label{\detokenize{annotation:virtualbox-yml}}\label{\detokenize{annotation:as-virtualbox-yml}}
Synopsis: Configure virtualbox.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/virtualbox.yml}{virtualbox.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall virtualbox}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}virtualbox}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{ansible\PYGZus{}lsb.description [\PYGZob{}\PYGZob{} ansible\PYGZus{}lsb.codename \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}virtualbox [\PYGZob{}\PYGZob{} lp\PYGZus{}virtualbox \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}virtualbox\PYGZus{}ignore\PYGZus{}errors [\PYGZob{}\PYGZob{} lp\PYGZus{}virtualbox\PYGZus{}ignore\PYGZus{}errors \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}virtualbox\PYGZus{}keys [\PYGZob{}\PYGZob{} lp\PYGZus{}virtualbox\PYGZus{}keys \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}virtualbox\PYGZus{}repos [\PYGZob{}\PYGZob{} lp\PYGZus{}virtualbox\PYGZus{}repos \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}virtualbox\PYGZus{}install}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}virtualbox\PYGZus{}install\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}virtualbox\PYGZus{}services}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}virtualbox\PYGZus{}services\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox\PYGZus{}debug}

\PYG{c+c1}{\PYGZsh{} TODO: assert lp\PYGZus{}virtualbox\PYGZus{}modules are loaded}
\PYG{c+c1}{\PYGZsh{}       when: lp\PYGZus{}virtualbox\textbar{}bool}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}virtualbox}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Add}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{signing}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{key}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{of}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{VirtualBox\PYGZdq{}}
  \PYG{n+nt}{apt\PYGZus{}key}\PYG{p}{:}
    \PYG{n+nt}{url}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{present}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}virtualbox\PYGZus{}keys}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}
  \PYG{n+nt}{retries}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}install\PYGZus{}retries}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{until}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{result}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{is}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{succeeded}
  \PYG{n+nt}{delay}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}install\PYGZus{}delay}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{ignore\PYGZus{}errors}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}virtualbox\PYGZus{}ignore\PYGZus{}errors}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox\PYGZus{}keys}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}virtualbox}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Add}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{repository}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{of}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{VirtualBox\PYGZdq{}}
  \PYG{n+nt}{apt\PYGZus{}repository}\PYG{p}{:}
    \PYG{n+nt}{repo}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{present}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}virtualbox\PYGZus{}repos}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{ignore\PYGZus{}errors}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}virtualbox\PYGZus{}ignore\PYGZus{}errors}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox\PYGZus{}repos}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}virtualbox}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{VirtualBox}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}virtualbox\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{ignore\PYGZus{}errors}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}virtualbox\PYGZus{}ignore\PYGZus{}errors}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox\PYGZus{}pkg}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}virtualbox}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Enable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{start}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{services\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{started}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}virtualbox\PYGZus{}services}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox\PYGZus{}services}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}virtualbox}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{services\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}virtualbox\PYGZus{}services}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox\PYGZus{}enable\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}virtualbox\PYGZus{}services}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{wpagui.yml}
\label{\detokenize{annotation:wpagui-yml}}\label{\detokenize{annotation:as-wpagui-yml}}
Synopsis: Configure wpagui.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/wpagui.yml}{wpagui.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall wpa\PYGZus{}gui}
\PYG{c+c1}{\PYGZsh{} Install wpa\PYGZus{}gui and disable NetworkManager}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpagui}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}wpagui\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}wpagui\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}wpagui\PYGZus{}systemd}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}wpagui\PYGZus{}systemd\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}wpagui\PYGZus{}service}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}wpagui\PYGZus{}service\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}wpagui\PYGZus{}service\PYGZus{}mask}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}wpagui\PYGZus{}service\PYGZus{}mask\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpagui\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpagui\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpagui}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpagui\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpagui\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpagui}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{NM}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/init/network\PYGZhy{}manager.override\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{network\PYGZhy{}manager\PYGZhy{}override.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/init/network\PYGZhy{}manager.override}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{root}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{0644}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpagui\PYGZus{}disableNM}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpagui}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{managed=false}
                 \PYG{l+lScalar+lScalarPlain}{in}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/NetworkManager/NetworkManager.conf\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/NetworkManager/NetworkManager.conf}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*managed}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{managed=false}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpagui\PYGZus{}disableNM}

\PYG{c+c1}{\PYGZsh{} NetworkManager.service will be stopped and disabled in the next task}
\PYG{c+c1}{\PYGZsh{} \PYGZhy{} name: \PYGZdq{}wpagui: Stop and disable NM\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  systemd:}
\PYG{c+c1}{\PYGZsh{}    name: \PYGZdq{}\PYGZob{}\PYGZob{} item \PYGZcb{}\PYGZcb{}\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}    state: stopped}
\PYG{c+c1}{\PYGZsh{}    enabled: false}
\PYG{c+c1}{\PYGZsh{}  loop: \PYGZdq{}\PYGZob{}\PYGZob{} lp\PYGZus{}wpagui\PYGZus{}systemd \PYGZcb{}\PYGZcb{}\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  tags: lp\PYGZus{}wpagui\PYGZus{}disableNM}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpagui}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Stop}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{disable}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{all}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{NM}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{services\PYGZdq{}}
  \PYG{n+nt}{service}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{stopped}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpagui\PYGZus{}service}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpagui\PYGZus{}disableNM}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpagui}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Mask}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{NM}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{services\PYGZdq{}}
  \PYG{n+nt}{command}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{systemctl}\PYG{n+nv}{ }\PYG{l+s}{mask}\PYG{n+nv}{ }\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{args}\PYG{p}{:}
    \PYG{n+nt}{warn}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpagui\PYGZus{}service\PYGZus{}mask}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{changed\PYGZus{}when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{false}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpagui\PYGZus{}mask\PYGZus{}NM}
  \PYG{c+c1}{\PYGZsh{}}
  \PYG{c+c1}{\PYGZsh{} False Positives: Skipping Rules}
  \PYG{c+c1}{\PYGZsh{} https://github.com/ansible/ansible\PYGZhy{}lint\PYGZsh{}false\PYGZhy{}positives\PYGZhy{}skipping\PYGZhy{}rules}
  \PYG{c+c1}{\PYGZsh{} noqa 303 does not work}
  \PYG{c+c1}{\PYGZsh{}}
  \PYG{c+c1}{\PYGZsh{} ansible\PYGZhy{}lint \PYGZdq{}systemctl used in place of systemd module\PYGZdq{} No}
  \PYG{c+c1}{\PYGZsh{} systemctl / systemd module. \PYGZsh{}48848}
  \PYG{c+c1}{\PYGZsh{} https://github.com/ansible/ansible/issues/48848}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{wpasupplicant.yml}
\label{\detokenize{annotation:wpasupplicant-yml}}\label{\detokenize{annotation:as-wpasupplicant-yml}}
Synopsis: Configure wpasupplicant.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/wpasupplicant.yml}{wpasupplicant.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpasupplicant}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}package\PYGZus{}state [\PYGZob{}\PYGZob{} lp\PYGZus{}package\PYGZus{}state \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}only [\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}only \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}dir [\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}dir \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}file [\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}file \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}owner [\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}owner \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}group [\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}group \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}mode [\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}mode \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}ctrl\PYGZus{}interface}
      \PYG{n+no}{[\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}ctrl\PYGZus{}interface \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}global}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}global\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dir [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dir \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}file [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}file \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}owner [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}owner \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}group [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}group \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}mode [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}mode \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dhclient [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dhclient \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}pidfile [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}pidfile \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}options\PYGZus{}connect [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}options\PYGZus{}connect \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}options\PYGZus{}disconnect [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}options\PYGZus{}disconnect \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}logfile [\PYGZob{}\PYGZob{} lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}logfile \PYGZcb{}\PYGZcb{}]}

      \PYG{n+no}{\PYGZob{}\PYGZpc{} if lp\PYGZus{}wpasupplicant\PYGZus{}debug\PYGZus{}classified\textbar{}bool \PYGZpc{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}wpasupplicant\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{\PYGZob{}\PYGZpc{} endif \PYGZpc{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpasupplicant}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpasupplicant\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpasupplicant}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}
                                     \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}.DEV\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{wpa\PYGZus{}supplicant.conf.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}
              \PYG{l+s}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}.\PYGZob{}\PYGZob{}}
              \PYG{l+s}{item.dev}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}group}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}mode}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{register}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}changes}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{reconfigure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{wpa\PYGZus{}supplicant}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpasupplicant\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{no\PYGZus{}log}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{not}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpasupplicant\PYGZus{}debug\PYGZus{}classified}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\PYGZus{}conf}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpasupplicant}\PYG{p}{:} \PYG{n+nt}{Debug}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{registered}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}changes\PYGZdq{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{var}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}changes}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpasupplicant\PYGZus{}debug\PYGZus{}classified\textbar{}bool}

\PYG{c+c1}{\PYGZsh{} \PYGZhy{} name: \PYGZdq{}wpasupplicant: Debug: wpa\PYGZus{}cli reconfigure commands\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  debug:}
\PYG{c+c1}{\PYGZsh{}    msg: \PYGZgt{}}
\PYG{c+c1}{\PYGZsh{}      \PYGZsq{}sh \PYGZhy{}c \PYGZdq{}[ \PYGZhy{}S \PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}ctrl\PYGZus{}interface \PYGZcb{}\PYGZcb{}/\PYGZbs{}}
\PYG{c+c1}{\PYGZsh{}                   \PYGZob{}\PYGZob{} item.item.dev \PYGZcb{}\PYGZcb{} ] \PYGZam{}\PYGZam{}}
\PYG{c+c1}{\PYGZsh{}      wpa\PYGZus{}cli \PYGZhy{}p \PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}ctrl\PYGZus{}interface \PYGZcb{}\PYGZcb{} \PYGZbs{}}
\PYG{c+c1}{\PYGZsh{}              \PYGZhy{}i \PYGZob{}\PYGZob{} item.item.dev \PYGZcb{}\PYGZcb{} reconfigure\PYGZdq{}\PYGZsq{}}
\PYG{c+c1}{\PYGZsh{}  loop: \PYGZdq{}\PYGZob{}\PYGZob{} lp\PYGZus{}wpasupplicant\PYGZus{}conf\PYGZus{}changes.results \PYGZcb{}\PYGZcb{}\PYGZdq{}}
\PYG{c+c1}{\PYGZsh{}  when:}
\PYG{c+c1}{\PYGZsh{}    \PYGZhy{} item.changed}
\PYG{c+c1}{\PYGZsh{}    \PYGZhy{} lp\PYGZus{}wpasupplicant\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpasupplicant}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{file}\PYG{p}{:}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{directory}
    \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}group}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}dir}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}wpasupplicant}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Create}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{script}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}file}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{wpa\PYGZus{}action.sh.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}owner}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}group}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}mode}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}wpa\PYGZus{}action\PYGZus{}script\PYGZus{}file}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{xen.yml}
\label{\detokenize{annotation:xen-yml}}\label{\detokenize{annotation:as-xen-yml}}
Synopsis: Configure xen.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/xen.yml}{xen.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall xen}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}xen}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}xen\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}xen\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}xen\PYGZus{}dom0\PYGZus{}mem}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}xen\PYGZus{}dom0\PYGZus{}mem\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}xen\PYGZus{}default\PYGZus{}grub\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}xen\PYGZus{}default\PYGZus{}grub\PYGZus{}conf\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}xen\PYGZus{}global}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}xen\PYGZus{}global\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xen\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xen\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}xen}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}xen\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xen\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}xen}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/default/grub\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/default/grub}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.key}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}=\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}xen\PYGZus{}default\PYGZus{}grub\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{notify}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{update}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{grub}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xen\PYGZus{}default\PYGZus{}grub}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}xen}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{/etc/xen/xl.conf\PYGZdq{}}
  \PYG{n+nt}{lineinfile}\PYG{p}{:}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{/etc/xen/xl.conf}
    \PYG{n+nt}{regexp}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZca{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*=}\PYG{l+s}{\PYGZbs{}\PYGZbs{}}\PYG{l+s}{s*(.*)\PYGZdl{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{line}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.var}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}=\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.value}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{create}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}xen\PYGZus{}global}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xen\PYGZus{}global}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{xorg.yml}
\label{\detokenize{annotation:xorg-yml}}\label{\detokenize{annotation:as-xorg-yml}}
Synopsis: Configure xorg.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/xorg.yml}{xorg.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}xorg}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}xorg\PYGZus{}conf}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}xorg\PYGZus{}conf\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xorg\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xorg\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}xorg}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Configure}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZob{}\PYGZob{}}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xorg\PYGZus{}conf\PYGZus{}dir}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZcb{}\PYGZcb{}\PYGZdq{}}
  \PYG{n+nt}{template}\PYG{p}{:}
    \PYG{n+nt}{src}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{xorg.conf.j2}
    \PYG{n+nt}{dest}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}xorg\PYGZus{}conf\PYGZus{}dir}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}/\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.file}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{backup}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}backup\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}xorg\PYGZus{}conf}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}xorg\PYGZus{}conf}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{zeitgeist.yml}
\label{\detokenize{annotation:zeitgeist-yml}}\label{\detokenize{annotation:as-zeitgeist-yml}}
Synopsis: Configure zeitgeist.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/zeitgeist.yml}{zeitgeist.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}
\PYG{c+c1}{\PYGZsh{} linux\PYGZhy{}postinstall zeitgeist}

\PYG{c+c1}{\PYGZsh{} One\PYGZhy{}way atm}
\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Remove}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{zeitgeist}
  \PYG{n+nt}{apt}\PYG{p}{:}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{absent}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{zeitgeist}
    \PYG{n+nt}{purge}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{when}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zeitgeist\textbar{}bool}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Remove}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{zeitgeist\PYGZhy{}*}
  \PYG{n+nt}{apt}\PYG{p}{:}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{absent}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{zeitgeist\PYGZhy{}*}
    \PYG{n+nt}{purge}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{true}
  \PYG{n+nt}{when}\PYG{p}{:}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{not}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zeitgeist\textbar{}bool}
    \PYG{p+pIndicator}{\PYGZhy{}} \PYG{l+lScalar+lScalarPlain}{ansible\PYGZus{}os\PYGZus{}family}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{==}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{\PYGZdq{}Debian\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} \PYGZhy{} name: Disable zeitgeist}
\PYG{c+c1}{\PYGZsh{}   service:}
\PYG{c+c1}{\PYGZsh{}     name: zeitgeist}
\PYG{c+c1}{\PYGZsh{}     state: stopped}
\PYG{c+c1}{\PYGZsh{}     enabled: no}
\PYG{c+c1}{\PYGZsh{}   when: not lp\PYGZus{}zeitgeist}
\PYG{c+c1}{\PYGZsh{} \PYGZdq{}Could not find the requested service zeitgeist\PYGZdq{}}

\PYG{c+c1}{\PYGZsh{} for i in zeitgeist\PYGZhy{}fts zeitgeist; do}
\PYG{c+c1}{\PYGZsh{} systemctl \PYGZhy{}\PYGZhy{}user disable \PYGZdl{}i;}
\PYG{c+c1}{\PYGZsh{} systemctl \PYGZhy{}\PYGZhy{}user stop \PYGZdl{}i;}
\PYG{c+c1}{\PYGZsh{} systemctl \PYGZhy{}\PYGZhy{}user mask \PYGZdl{}i;}
\PYG{c+c1}{\PYGZsh{} done}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{zfs.yml}
\label{\detokenize{annotation:zfs-yml}}\label{\detokenize{annotation:as-zfs-yml}}
Synopsis: Configure zfs.

Description of the task.

{[}\sphinxhref{https://github.com/vbotka/ansible-linux-postinstall/blob/master/tasks/zfs.yml}{zfs.yml}{]}

\fvset{hllines={, 1, 2,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nn}{\PYGZhy{}\PYGZhy{}\PYGZhy{}}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}zfs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Debug\PYGZdq{}}
  \PYG{n+nt}{vars}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{p+pIndicator}{\textbar{}}
      \PYG{n+no}{lp\PYGZus{}zfs\PYGZus{}install [\PYGZob{}\PYGZob{} lp\PYGZus{}zfs\PYGZus{}install \PYGZcb{}\PYGZcb{}]}
      \PYG{n+no}{lp\PYGZus{}zfs\PYGZus{}packages}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}zfs\PYGZus{}packages\textbar{}to\PYGZus{}nice\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}zfs\PYGZus{}services}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}zfs\PYGZus{}services\textbar{}default([])\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}zfs\PYGZus{}manage}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}zfs\PYGZus{}manage\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
      \PYG{n+no}{lp\PYGZus{}zfs\PYGZus{}mountpoints}
      \PYG{n+no}{\PYGZob{}\PYGZob{} lp\PYGZus{}zfs\PYGZus{}mountpoints\textbar{}to\PYGZus{}yaml \PYGZcb{}\PYGZcb{}}
  \PYG{n+nt}{debug}\PYG{p}{:}
    \PYG{n+nt}{msg}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{msg.split(\PYGZsq{}}\PYG{l+s}{\PYGZbs{}n}\PYG{l+s}{\PYGZsq{})[:\PYGZhy{}1]}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zfs\PYGZus{}debug\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zfs\PYGZus{}debug}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}zfs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Install}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{packages\PYGZdq{}}
  \PYG{n+nt}{include\PYGZus{}tasks}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{fn/install\PYGZhy{}package.yml}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}zfs\PYGZus{}packages}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{when}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zfs\PYGZus{}install\textbar{}bool}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zfs\PYGZus{}packages}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}zfs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Manage}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{zfs}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{services\PYGZdq{}}
  \PYG{n+nt}{systemd}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{enabled}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.enabled\textbar{}default(true)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state\textbar{}default(\PYGZsq{}started\PYGZsq{})}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}zfs\PYGZus{}services\textbar{}default([])}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zfs\PYGZus{}services}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}zfs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Manage}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{zfs\PYGZdq{}}
  \PYG{n+nt}{zfs}\PYG{p}{:}
    \PYG{n+nt}{name}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.name}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.state}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{origin}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.origin\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{extra\PYGZus{}zfs\PYGZus{}properties}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.extra\PYGZus{}zfs\PYGZus{}properties\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}zfs\PYGZus{}manage}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zfs\PYGZus{}manage}

\PYG{p+pIndicator}{\PYGZhy{}} \PYG{n+nt}{name}\PYG{p}{:} \PYG{n+nt}{\PYGZdq{}zfs}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{Set}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{mode}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{and}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{ownership}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{of}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{zfs}\PYG{l+lScalar+lScalarPlain}{ }\PYG{l+lScalar+lScalarPlain}{mountpoints\PYGZdq{}}
  \PYG{n+nt}{file}\PYG{p}{:}
    \PYG{n+nt}{state}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{directory}
    \PYG{n+nt}{path}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.mountpoint}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{owner}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.owner\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{group}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.group\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
    \PYG{n+nt}{mode}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{item.mode\textbar{}default(omit)}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{loop}\PYG{p}{:} \PYG{l+s}{\PYGZdq{}}\PYG{l+s}{\PYGZob{}\PYGZob{}}\PYG{n+nv}{ }\PYG{l+s}{lp\PYGZus{}zfs\PYGZus{}mountpoints}\PYG{n+nv}{ }\PYG{l+s}{\PYGZcb{}\PYGZcb{}}\PYG{l+s}{\PYGZdq{}}
  \PYG{n+nt}{tags}\PYG{p}{:} \PYG{l+lScalar+lScalarPlain}{lp\PYGZus{}zfs\PYGZus{}mountpoints}

\PYG{c+c1}{\PYGZsh{} EOF}
\PYG{n+nn}{...}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\chapter{Copyright}
\label{\detokenize{copyright:copyright}}\label{\detokenize{copyright::doc}}
Redistribution and use in source (RST DocUtils) and ‘compiled’ forms (XML, HTML, PDF, PostScript, RTF and so forth) with or without modification, are permitted provided that the following conditions are met:

Redistributions of source code (RST Docutils) must retain the above copyright notice, this list of conditions and the following disclaimer as the first lines of this file unmodified.

Redistributions in compiled form (transformed to other DTDs, converted to PDF, PostScript, RTF and other formats) must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

Important: THIS DOCUMENTATION IS PROVIDED “AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE PROVIDER BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


\chapter{Legal Notice}
\label{\detokenize{legalnotice:legal-notice}}\label{\detokenize{legalnotice::doc}}
All product names, logos, and brands are property of their respective owners.


\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\DUrole{xref,std,std-ref}{search}

\end{itemize}



\renewcommand{\indexname}{Index}
\printindex
\end{document}