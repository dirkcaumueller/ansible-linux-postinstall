<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>User’s guide</title>
    <link rel="stylesheet" href="_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="user-s-guide">
<span id="ug"></span><h1><a class="toc-backref" href="#id2">User’s guide</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#user-s-guide" id="id2">User’s guide</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id4">Installation</a></p></li>
<li><p><a class="reference internal" href="#playbook" id="id5">Playbook</a></p></li>
<li><p><a class="reference internal" href="#debug" id="id6">Debug</a></p></li>
<li><p><a class="reference internal" href="#tags" id="id7">Tags</a></p></li>
<li><p><a class="reference internal" href="#tasks" id="id8">Tasks</a></p>
<ul>
<li><p><a class="reference internal" href="#passwords" id="id9">Passwords</a></p>
<ul>
<li><p><a class="reference internal" href="#synopsis" id="id10">Synopsis</a></p></li>
<li><p><a class="reference internal" href="#index-0" id="id11">Passwordstore</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#variables" id="id12">Variables</a></p></li>
<li><p><a class="reference internal" href="#default-variables" id="id13">Default variables</a></p></li>
<li><p><a class="reference internal" href="#best-practice" id="id14">Best practice</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<span id="ug-introduction"></span><h2><a class="toc-backref" href="#id3">Introduction</a></h2>
<ul>
<li><p>Ansible role: <a class="reference external" href="https://galaxy.ansible.com/vbotka/linux_postinstall/">linux_postinstall</a><span class="link-target"> [https://galaxy.ansible.com/vbotka/linux_postinstall/]</span></p></li>
<li><p>Supported systems: <a class="reference external" href="http://releases.ubuntu.com/">Ubuntu</a><span class="link-target"> [http://releases.ubuntu.com/]</span></p></li>
<li><p>Requirements: <a class="reference external" href="https://galaxy.ansible.com/vbotka/ansible_lib">ansible_lib</a><span class="link-target"> [https://galaxy.ansible.com/vbotka/ansible_lib]</span></p>
<p>&lt;TBD&gt;</p>
</li>
</ul>
</div>
<div class="section" id="installation">
<span id="ug-installation"></span><h2><a class="toc-backref" href="#id4">Installation</a></h2>
<p>The most convenient way how to install an Ansible role is to use
Ansible Galaxy CLI <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span></code>. The utility comes with the
standard Ansible package and provides the user with a simple interface
to the Ansible Galaxy’s services. For example, take a look at the
current status of the role</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">shell&gt; ansible-galaxy info vbotka.linux_postinstall
</span></pre></div>
</div>
<p>and install it</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll"> shell&gt; ansible-galaxy install vbotka.linux_postinstall
</span></pre></div>
</div>
<p>Install the library of tasks</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll"> shell&gt; ansible-galaxy install vbotka.ansible_lib
</span></pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>To install specific versions from various sources see <a class="reference external" href="https://galaxy.ansible.com/docs/using/installing.html">Installing content</a><span class="link-target"> [https://galaxy.ansible.com/docs/using/installing.html]</span>.</p></li>
<li><p>Take a look at other roles <code class="docutils literal notranslate"><span class="pre">shell&gt;</span> <span class="pre">ansible-galaxy</span> <span class="pre">search</span> <span class="pre">--author=vbotka</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="playbook">
<span id="ug-playbook"></span><h2><a class="toc-backref" href="#id5">Playbook</a></h2>
<p>Below is a simple playbook that calls this role at a single host
srv.example.com (2)</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll">shell&gt; cat linux-postinstall.yml
</span>- hosts: srv.example.com
  gather_facts: <span class="nb">true</span>
  connection: ssh
  remote_user: admin
  become: yes
  become_user: root
  become_method: sudo
  roles:
    - vbotka.linux_postinstall
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">gather_facts:</span> <span class="pre">true</span></code> (3) must be set to gather facts
needed to evaluate OS-specific options of the role. For
example to install packages the variable <code class="docutils literal notranslate"><span class="pre">ansible_os_family</span></code>
is needed to select the appropriate Ansible module.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>For details see <a class="reference external" href="https://docs.ansible.com/ansible/latest/plugins/connection.html">Connection Plugins</a><span class="link-target"> [https://docs.ansible.com/ansible/latest/plugins/connection.html]</span> (4-5)</p></li>
<li><p>See also <a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/become.html#understanding-privilege-escalation">Understanding Privilege Escalation</a><span class="link-target"> [https://docs.ansible.com/ansible/latest/user_guide/become.html#understanding-privilege-escalation]</span> (6-8)</p></li>
</ul>
</div>
</div>
<div class="section" id="debug">
<span id="ug-debug"></span><h2><a class="toc-backref" href="#id6">Debug</a></h2>
<p>To see additional debug information enable debug output in the
configuration</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="nt">lp_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</span></pre></div>
</div>
<p>, or set the extra variable in the command</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">shell&gt; ansible-playbook linux_postinstall.yml -e <span class="s1">&#39;lp_debug=true&#39;</span>
</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The debug output of this role is optimized for the <strong>yaml</strong>
callback plugin. Set this plugin for example in the environment
<code class="docutils literal notranslate"><span class="pre">shell&gt;</span> <span class="pre">export</span> <span class="pre">ANSIBLE_STDOUT_CALLBACK=yaml</span></code>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_debugger.html">Playbook Debugger</a><span class="link-target"> [https://docs.ansible.com/ansible/latest/user_guide/playbooks_debugger.html]</span></p></li>
</ul>
</div>
</div>
<div class="section" id="tags">
<span id="ug-tags"></span><h2><a class="toc-backref" href="#id7">Tags</a></h2>
<p>The tags provide the user with a very useful tool to run selected
tasks of the role. To see what tags are available list the tags of the
role with the command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="hll"> shell&gt; ansible-playbook linux-postinstall.yml --list-tags
</span>
 playbook: linux-postinstall.yml

 play <span class="c1">#1 (srv.example.com): srv.example.com TAGS: []</span>
 TASK TAGS: <span class="o">[</span>always, lp_acpi, lp_acpi_actions, lp_acpi_events, lp_aliases,
 apparmor, lp_apparmor_disable, lp_apparmor_enforce, lp_apparmor_packages,
 lp_apparmor_profiles, lp_apparmor_service, lp_authorized_keys, lp_auto_upgrades,
 lp_autofs, lp_bluetooth, lp_cron, lp_cron_tab, lp_cron_var, lp_debsums,
 lp_debsums_debug, lp_debsums_default_conf, lp_debsums_ignore_conf,
 lp_debsums_packages, lp_debug, lp_fstab, lp_gpg, lp_gpsd, lp_gpsd_bt_rfcom,
 lp_gpsd_config, lp_gpsd_group, lp_gpsd_packages, lp_gpsd_service, lp_grub,
 lp_hostname, lp_hosts, lp_iptables, lp_kvm, lp_kvm_packages, lp_latex,
 lp_latex_dir, lp_latex_labels, lp_latex_macros, lp_latex_packages, lp_libvirt,
 lp_libvirt_conf, lp_libvirt_debug, lp_libvirt_guests_service,
 lp_libvirt_libvirtd_service, lp_libvirt_pkg, lp_lid, lp_logrotate, lp_modemmanager,
 lp_modules, lp_netplan, lp_nfsd, lp_nfsd_exports, lp_nfsd_packages, lp_nfsd_service,
 lp_packages, lp_packages_auto, lp_packages_install, lp_packages_remove,
 lp_packages_selections_postinstall, lp_packages_selections_preinstall,
 lp_passwords, lp_pm, lp_postfix, lp_postfix_conf, lp_postfix_service, lp_reboot,
 lp_repos, lp_repos_keys_manage, lp_repos_manage, lp_resolvconf,
 lp_resolvconf_confd_head, lp_resolvconf_debug, lp_resolvconf_packages,
 lp_resolvconf_service, lp_service, lp_service_auto, lp_service_debug,
 lp_service_general, lp_smart, lp_smart_conf, lp_smart_packages, lp_smart_service,
 lp_speechd, lp_ssh, lp_sshd, lp_sshd_config, lp_sshd_service, lp_sudoers, lp_swap,
 lp_swap_fstab, lp_swap_swapfile, lp_sysctl, lp_timesyncd, lp_timesyncd_conf,
 lp_timesyncd_debug, lp_timesyncd_service, lp_timezone, lp_tlp, lp_tlp_conf,
 lp_tlp_packages, lp_tlp_service, lp_udev, lp_udev_service, lp_ufw, lp_ufw_conf,
 lp_ufw_debug, lp_ufw_packages, lp_ufw_reload, lp_ufw_reset, lp_ufw_service,
 lp_users, lp_vars, lp_virtualbox, lp_virtualbox_keys, lp_virtualbox_pkg,
 lp_virtualbox_repos, lp_virtualbox_services, lp_wpa_action_script_dir,
 lp_wpa_action_script_file, lp_wpagui, lp_wpagui_disableNM, lp_wpagui_mask_NM,
 lp_wpagui_packages, lp_wpasupplicant, lp_wpasupplicant_conf, lp_wpasupplicant_debug,
 lp_wpasupplicant_packages, lp_xen, lp_xen_default_grub, lp_xen_global,
 lp_xen_packages, lp_xorg, lp_xorg_conf, lp_zeitgeist, lp_zfs, lp_zfs_debug,
 lp_zfs_manage, lp_zfs_mountpoints, lp_zfs_packages<span class="o">]</span>
</pre></div>
</div>
<p>For example, display the list of the variables and their values with
the tag <code class="docutils literal notranslate"><span class="pre">lp_debug</span></code> (when the debug is enabled <code class="docutils literal notranslate"><span class="pre">lp_debug:</span> <span class="pre">true</span></code>)</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll"> shell&gt; ansible-playbook linux_postinstall.yml -t lp_debug
</span></pre></div>
</div>
<p>See what packages will be installed</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll"> shell&gt; ansible-playbook linux_postinstall -t lp_packages --check
</span></pre></div>
</div>
<p>Install packages and exit the play</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll"> shell&gt; ansible-playbook linux_postinstall.yml -t lp_packages
</span></pre></div>
</div>
</div>
<div class="section" id="tasks">
<span id="ug-tasks"></span><h2><a class="toc-backref" href="#id8">Tasks</a></h2>
<div class="section" id="passwords">
<span id="ug-task-passwords"></span><h3><a class="toc-backref" href="#id9">Passwords</a></h3>
<div class="section" id="synopsis">
<h4><a class="toc-backref" href="#id10">Synopsis</a></h4>
<p>Manage user’s passwords. At the moment only <a class="reference external" href="https://www.passwordstore.org/">passwordstore</a><span class="link-target"> [https://www.passwordstore.org/]</span> framework is available.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="task-passwords-passwordstore.xhtml">Passwordstore</a></li>
<li class="toctree-l1"><a class="reference internal" href="task-passwords-passwordstore-ex1.xhtml">Example 1: Update userpass, or create it if does not exists</a></li>
<li class="toctree-l1"><a class="reference internal" href="task-passwords-passwordstore-ex2.xhtml">Example 2: Update passwords submitted in the variable</a></li>
</ul>
</div>
<span class="target" id="ug-task-passwords-passwordstore"></span></div>
<div class="section" id="index-0">
<span id="id1"></span><h4><a class="toc-backref" href="#id11">Passwordstore</a></h4>
<p>Create, or update passwords of selected users at remote hosts by the
<em>passwordstore.org</em> <em>pass</em> utility. See details of the included task <a class="reference external" href="https://raw.githubusercontent.com/vbotka/ansible-lib/master/tasks/al_pws_user_host.yml">al_pws_user_host.yml</a><span class="link-target"> [https://raw.githubusercontent.com/vbotka/ansible-lib/master/tasks/al_pws_user_host.yml]</span></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Utility <a class="reference external" href="https://www.passwordstore.org/">pass</a><span class="link-target"> [https://www.passwordstore.org/]</span> is required at controller.</p>
</div>
<div class="section" id="example-1-update-userpass-or-create-it-if-does-not-exists">
<span id="ug-task-passwords-passwordstore-ex1"></span><h5>Example 1: Update userpass, or create it if does not exists</h5>
<p>Let’s start with no passwords stored in <span class="target" id="index-1"></span>passwordstore for users at host <em>test_01</em>. The command
show no results</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="l l-Scalar l-Scalar-Plain">shell&gt; pass test_01</span>
</span></pre></div>
</div>
<p>Create a playbook</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="l l-Scalar l-Scalar-Plain">shell&gt; cat linux-postinstall.yml</span>
</span><span class="l l-Scalar l-Scalar-Plain">- hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">test_01</span>
  <span class="l l-Scalar l-Scalar-Plain">become</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="l l-Scalar l-Scalar-Plain">roles</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">vbotka.linux_postinstall</span>
</pre></div>
</div>
<p>Create <em>host_vars/test_01/lp-users.yml</em> with two users <em>user1</em> and
<em>user2</em></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="hll"> <span class="l l-Scalar l-Scalar-Plain">shell&gt; cat host_vars/test_01/lp-users.yml</span>
</span> <span class="l l-Scalar l-Scalar-Plain">lp_users</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span> <span class="nv">user1</span><span class="p p-Indicator">,</span><span class="nt"> shell</span><span class="p">:</span> <span class="nv">/bin/sh</span><span class="p p-Indicator">}</span>
   <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span> <span class="nv">user2</span><span class="p p-Indicator">,</span><span class="nt"> shell</span><span class="p">:</span> <span class="nv">/bin/bash</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>Create users. This step will create these two users and configure
their login shell. Other paramteres of the Annsible module <a class="reference external" href="https://docs.ansible.com/ansible/latest/modules/user_module.html">user</a><span class="link-target"> [https://docs.ansible.com/ansible/latest/modules/user_module.html]</span>
will be ommited because the only required parameter is <em>name</em>. It’s a
good idea to create one account with the login shell <em>/bin/sh</em> and use
it as Ansible <a class="reference external" href="https://docs.ansible.com/ansible/2.4/become.html#become">remote_user</a><span class="link-target"> [https://docs.ansible.com/ansible/2.4/become.html#become]</span>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="hll"> <span class="l l-Scalar l-Scalar-Plain">shell&gt; ansible-playbook linux-postinstall.yml -t lp_users</span>
</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
 <span class="l l-Scalar l-Scalar-Plain">TASK [vbotka.linux_postinstall</span> <span class="p p-Indicator">:</span> <span class="nt">users</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Manage user accounts] *********</span>
 <span class="nt">changed</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">test_01</span><span class="p p-Indicator">]</span> <span class="l l-Scalar l-Scalar-Plain">=&gt; (item=user1)</span>
 <span class="nt">changed</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">test_01</span><span class="p p-Indicator">]</span> <span class="l l-Scalar l-Scalar-Plain">=&gt; (item=user2)</span>
</pre></div>
</div>
<p>Create <em>host_vars/test_01/lp-passwords.yml</em></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="hll"> <span class="l l-Scalar l-Scalar-Plain">shell&gt; cat host_vars/test_01/lp-passwords.yml</span>
</span> <span class="l l-Scalar l-Scalar-Plain">lp_passwords</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
 <span class="nt">lp_passwordstore</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
 <span class="nt">lp_passwordstore_create</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
 <span class="nt">lp_passwordstore_overwrite</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>
<p>Create passwords. This step will use <em>passwordstore</em> to create the passwords and configure them. New passwords will be created only if allowed by the configuration of <em>lp_passwordstore_create</em>. We set this variable to <em>True</em> in this command but keep it <em>False</em> in the configuration to keep the passwords once created. The value of <em>lp_passwordstore_overwrite</em> is <em>False</em>. New passwords will be assigned to the users if no passwords have been assigned to the users before. To change the passwords in the future set both variables <em>True</em> on the commandline.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="l l-Scalar l-Scalar-Plain">shell&gt; ansible-playbook linux-postinstall.yml -t lp_passwords \</span>
</span><span class="hll">                                       <span class="l l-Scalar l-Scalar-Plain">-e &#39;lp_passwordstore_create=True&#39;</span>
</span><span class="nn">...</span>

<span class="l l-Scalar l-Scalar-Plain">TASK [vbotka.ansible_lib</span> <span class="p p-Indicator">:</span> <span class="nt">al_pws_user_host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Retrieve, create or update ...]</span>
<span class="nt">ok</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">test_01</span><span class="p p-Indicator">]</span> <span class="l l-Scalar l-Scalar-Plain">=&gt; (item=user1)</span>
<span class="nt">ok</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">test_01</span><span class="p p-Indicator">]</span> <span class="l l-Scalar l-Scalar-Plain">=&gt; (item=user2)</span>
<span class="nn">...</span>
<span class="l l-Scalar l-Scalar-Plain">TASK [vbotka.linux_postinstall</span> <span class="p p-Indicator">:</span> <span class="nt">users</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Manage user accounts] **********</span>
<span class="nt">changed</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">test_01</span><span class="p p-Indicator">]</span> <span class="l l-Scalar l-Scalar-Plain">=&gt; (item=user1)</span>
<span class="nt">changed</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">test_01</span><span class="p p-Indicator">]</span> <span class="l l-Scalar l-Scalar-Plain">=&gt; (item=user2)</span>
</pre></div>
</div>
<p>The command is idempotent</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">shell&gt; ansible-playbook linux-postinstall.yml -t lp_passwords
</span>...
PLAY RECAP *************************************************************
test_01: <span class="nv">ok</span><span class="o">=</span><span class="m">18</span> <span class="nv">changed</span><span class="o">=</span><span class="m">0</span> <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span> <span class="nv">failed</span><span class="o">=</span><span class="m">0</span> <span class="nv">skipped</span><span class="o">=</span><span class="m">20</span> <span class="nv">rescued</span><span class="o">=</span><span class="m">0</span> ...
</pre></div>
</div>
<p>Show the passwords stored in <em>passwordstore</em> at the controller</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">shell&gt; pass test_01
</span>test_01
├── user1
└── user2

<span class="hll">shell&gt; pass test_01/user1
</span>1rLy0eVpJiTpzj-4
lookup_pass: First generated by ansible on <span class="m">01</span>/07/2020 <span class="m">16</span>:59:00

<span class="hll">shell&gt; pass test_01/user2
</span>u4FLTCkKOHAyJxkg
lookup_pass: First generated by ansible on <span class="m">01</span>/07/2020 <span class="m">16</span>:59:00
</pre></div>
</div>
<p>Show the <em>passwordstore</em> log at the controller</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">shell&gt; <span class="nb">cd</span> ~/.password-store
</span><span class="hll">shell&gt; git log
</span>
commit 61bb8bcd7c2a359f53c8b3d4bacb8854b4dd9f89 <span class="o">(</span>HEAD -&gt; master<span class="o">)</span>
Author: Vladimir Botka &lt;vbotka@gmail.com&gt;
Date:   Wed Jul <span class="m">1</span> <span class="m">16</span>:59:00 <span class="m">2020</span> +0200

    Add given password <span class="k">for</span> test_01/user2 to store.

commit 97b23a5221e721fb892d739b2817923a6db8614b
Author: Vladimir Botka &lt;vbotka@gmail.com&gt;
Date:   Wed Jul <span class="m">1</span> <span class="m">16</span>:59:00 <span class="m">2020</span> +0200

    Add given password <span class="k">for</span> test_01/user1 to store.
</pre></div>
</div>
<p>Show the created users at the remote host</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">test_01&gt; grep user /etc/passwd
</span>user1:x:1003:1003::/home/user1:/bin/sh
user2:x:1004:1004::/home/user2:/bin/bash
</pre></div>
</div>
</div>
<div class="section" id="example-2-update-passwords-submitted-in-the-variable">
<span id="ug-task-passwords-passwordstore-ex2"></span><h5>Example 2: Update passwords submitted in the variable</h5>
<p>Update passwords of users at host <em>test_01</em>. Use the same playbook and
variables as in Example 1. Update the variable <em>lp_users</em> with the new
passwords stored in the attribute <code class="docutils literal notranslate"><span class="pre">userpass</span></code></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="hll"> <span class="l l-Scalar l-Scalar-Plain">shell&gt; cat host_vars/test_01/lp-users.yml</span>
</span> <span class="l l-Scalar l-Scalar-Plain">lp_users</span><span class="p p-Indicator">:</span>
   <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span> <span class="nv">user1</span><span class="p p-Indicator">,</span><span class="nt"> shell</span><span class="p">:</span> <span class="nv">/bin/sh</span><span class="p p-Indicator">,</span><span class="nt"> userpass</span><span class="p">:</span> <span class="nv">user1_password</span><span class="p p-Indicator">}</span>
   <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span> <span class="nv">user2</span><span class="p p-Indicator">,</span><span class="nt"> shell</span><span class="p">:</span> <span class="nv">/bin/bash</span><span class="p p-Indicator">,</span><span class="nt"> userpass</span><span class="p">:</span> <span class="nv">user2_password</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>Update the passwords</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">shell&gt; ansible-playbook linux-postinstall.yml -t lp_passwords <span class="se">\</span>
</span>                                    -e <span class="s1">&#39;lp_passwordstore_overwrite=True&#39;</span>
...
TASK <span class="o">[</span>vbotka.linux_postinstall : users: Manage user accounts<span class="o">]</span> **********
changed: <span class="o">[</span>test_01<span class="o">]</span> <span class="o">=</span>&gt; <span class="o">(</span><span class="nv">item</span><span class="o">=</span>user1<span class="o">)</span>
changed: <span class="o">[</span>test_01<span class="o">]</span> <span class="o">=</span>&gt; <span class="o">(</span><span class="nv">item</span><span class="o">=</span>user2<span class="o">)</span>
</pre></div>
</div>
<p>The command is idempotent</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">shell&gt; ansible-playbook linux-postinstall.yml -t lp_passwords <span class="se">\</span>
</span>                                    -e <span class="s1">&#39;lp_passwordstore_overwrite=True&#39;</span>
...

PLAY RECAP *************************************************************
test_01: <span class="nv">ok</span><span class="o">=</span><span class="m">18</span> <span class="nv">changed</span><span class="o">=</span><span class="m">0</span> <span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span> <span class="nv">failed</span><span class="o">=</span><span class="m">0</span> <span class="nv">skipped</span><span class="o">=</span><span class="m">20</span> <span class="nv">rescued</span><span class="o">=</span><span class="m">0</span> ...
</pre></div>
</div>
<p>Show the passwords stored in <em>passwordstore</em> at the controller</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">shell&gt; pass test_01
</span>test_01
├── user1
└── user2

<span class="hll">shell&gt; pass test_01/user1
</span>user1_password
lookup_pass: First generated by ansible on <span class="m">01</span>/07/2020 <span class="m">16</span>:59:00

<span class="hll">shell&gt; pass test_01/user2
</span>user2_password
lookup_pass: First generated by ansible on <span class="m">01</span>/07/2020 <span class="m">16</span>:59:00
</pre></div>
</div>
<p>See the <em>passwordstore</em> log at the controller <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> and test the
new passwords at <em>test_01</em>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="variables">
<span id="ug-vars"></span><h2><a class="toc-backref" href="#id12">Variables</a></h2>
<p>In this chapter we describe role’s default variables stored in the
directory <strong>defaults</strong>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html#variable-precedence-where-should-i-put-a-variable">Ansible variable precedence: Where should I put a variable?</a><span class="link-target"> [https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html#variable-precedence-where-should-i-put-a-variable]</span></p></li>
</ul>
</div>
</div>
<div class="section" id="default-variables">
<span id="ug-defaults"></span><h2><a class="toc-backref" href="#id13">Default variables</a></h2>
<blockquote>
<div><p>&lt;TBD&gt;</p>
</div></blockquote>
<p>[<a class="reference external" href="https://github.com/vbotka/ansible-linux-postinstall/blob/master/defaults/main.yml">defaults/main.yml</a><span class="link-target"> [https://github.com/vbotka/ansible-linux-postinstall/blob/master/defaults/main.yml]</span>]</p>
<div class="highlight-yaml notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="hll"><span class="c1"># linux_postinstall defaults</span>
</span><span class="c1">#</span>
<span class="c1"># Put distro and flavor specific vars and overrides to the vars</span>
<span class="c1"># directory.</span>

<span class="nt">lp_hostname</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
<span class="nt">lp_fqdn</span><span class="p">:</span> <span class="s">&quot;&quot;</span>

<span class="nt">lp_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_backup_conf</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">lp_install_retries</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="nt">lp_install_delay</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="nt">lp_repos_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_repos</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_repos_keys</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_packages_auto</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_packages_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_packages_install</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_packages_remove</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_packages_selections_preinstall</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_packages_selections_postinstall</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_packages_autoremove</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">lp_package_state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">present</span>               <span class="c1"># apt and yum support &quot;latest&quot;</span>
<span class="nt">lp_package_state_remove</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">absent</span>         <span class="c1"># see &quot;remove&quot; vs. &quot;purge&quot;</span>
<span class="nt">lp_package_install_dryrun</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">lp_modules_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_modules</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_modules_blacklist</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_modules_blacklist_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/modprobe.d</span>
<span class="nt">lp_modules_options</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_modules_options_path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/modprobe.d</span>

<span class="nt">lp_sysctl_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_sysctl_vars</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_udev</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_udev_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_udev_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_udev_rules_dir</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/udev/rules.d</span>
<span class="nt">lp_udev_rules_template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">udev-rules.j2</span>
<span class="nt">lp_udev_rules</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">lp_udev_persistent_net_template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">persistent-net.rules.j2</span>
<span class="nt">lp_udev_persistent_net_rules_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">70-persistent-net.rules</span>
<span class="nt">lp_udev_persistent_net_rules</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_udev_hci_name_rules_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">71-hci-name.rules</span>
<span class="nt">lp_udev_hci_name_rules</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_udev_hci_run_rules_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">72-hci-run.rules</span>
<span class="nt">lp_udev_hci_run_rules</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_wpagui</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_wpagui_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_wpagui_nm_override</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">manual</span>

<span class="nt">lp_iptables</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_iptables_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="nt">lp_iptables_wan_if</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eth0</span>
<span class="nt">lp_iptables_lan_if</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eth1</span>
<span class="nt">lp_iptables_lan</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.1.0.0/24</span>
<span class="nt">lp_iptables_INPUT_if</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_iptables_INPUT_net</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_users_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_users</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_users_groups</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_passwords</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_passwords_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_passwords_debug_classified</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_passwords_fail_gracefully</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_password_update_password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
<span class="nt">lp_passwordstore</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_passwordstore_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_passwordstore_install</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_passwordstore_backup</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_passwordstore_create</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_passwordstore_length</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">16</span>
<span class="nt">lp_passwordstore_nosymbols</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_passwordstore_overwrite</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_passwordstore_passwordstore</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~/.password-store</span>
<span class="nt">lp_passwordstore_returnall</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_passwordstore_subkey</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="nt">lp_passwordstore_idempotent_password_hash</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">lp_aliases</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_aliases_config</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_authorized_key</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_hosts_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_hosts</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_grub</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_grub_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_grub_default</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_kvm</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_kvm_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">lp_xen</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_xen_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_xen_dom0_mem</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">512M</span>
<span class="nt">lp_xen_dom0_mem_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">512M</span>
<span class="nt">lp_xen_XEN_OVERRIDE_GRUB_DEFAULT</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">lp_xen_default_grub_conf</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GRUB_CMDLINE_XEN_DEFAULT</span>
    <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;\&quot;dom0_mem={{</span><span class="nv"> </span><span class="s">lp_xen_dom0_mem</span><span class="nv"> </span><span class="s">}},</span><span class="nv"> </span><span class="s">max:{{</span><span class="nv"> </span><span class="s">lp_xen_dom0_mem_max</span><span class="nv"> </span><span class="s">}}\&quot;&quot;</span>
  <span class="p p-Indicator">-</span> <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">XEN_OVERRIDE_GRUB_DEFAULT</span>
    <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lp_xen_XEN_OVERRIDE_GRUB_DEFAULT</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="nt">lp_xen_global</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_latex</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_latex_download_timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="nt">lp_latex_macros</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_latex_get_url_ignore_errors</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">lp_auto_upgrades</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_auto_upgrades_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">lp_auto_upgrades_Update_Package_Lists</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">lp_auto_upgrades_Unattended_Upgrade</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="nt">lp_pm</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_pm_sleepd</span><span class="p">:</span> <span class="p p-Indicator">{}</span>

<span class="nt">lp_ssh</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_ssh_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_ssh_config</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_sshd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_sshd_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_sshd_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_sshd_config</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_bluetooth</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_bluetooth_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_bluetooth_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_bluetooth_main_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_xorg_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_xorg_conf_dir</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/usr/share/X11/xorg.conf.d</span>
<span class="nt">lp_xorg_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_cron_tab</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_cron_var</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_modemmanager</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_modemmanager_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_modemmanager_override</span><span class="p">:</span> <span class="s">&quot;&quot;</span>

<span class="nt">lp_gpsd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_gpsd_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_gpsd_START_DAEMON</span><span class="p">:</span> <span class="s">&quot;true&quot;</span>
<span class="nt">lp_gpsd_USBAUTO</span><span class="p">:</span> <span class="s">&quot;true&quot;</span>
<span class="nt">lp_gpsd_DEVICES</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/dev/rfcomm0</span>
<span class="nt">lp_gpsd_GPSD_OPTIONS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-b</span>
<span class="nt">lp_gpsd_bt_rfcomm</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_postfix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_postfix_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_postfix_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_postfix_main_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_smart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_smart_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_smart_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_smart_packages</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">smartmontools</span>
<span class="nt">lp_smart_service</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">smartmontools</span>
<span class="nt">lp_smart_devicescan</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_smart_conf_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/smartd.conf</span>
<span class="nt">lp_smart_conf_owner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_smart_conf_group</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_smart_conf_mode</span><span class="p">:</span> <span class="s">&quot;0644&quot;</span>
<span class="nt">lp_smart_devices</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_virtualbox</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_virtualbox_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_virtualbox_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_virtualbox_ignore_errors</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_virtualbox_version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5.2</span>
<span class="nt">lp_virtualbox_keys</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">https://www.virtualbox.org/download/oracle_vbox_2016.asc</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">https://www.virtualbox.org/download/oracle_vbox.asc</span>
<span class="nt">lp_virtualbox_packages</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="s">&quot;virtualbox-{{</span><span class="nv"> </span><span class="s">lp_virtualbox_version</span><span class="nv"> </span><span class="s">}}&quot;</span>

<span class="nt">lp_zeitgeist</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">lp_lid</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_lid_logind_conf</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/systemd/logind.conf</span>
<span class="nt">lp_lid_logind_conf_vars</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_lid_upower_conf</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/UPower/UPower.conf</span>
<span class="nt">lp_lid_upower_conf_vars</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_acpi</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_acpi_dir</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/acpi</span>
<span class="nt">lp_acpi_owner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_acpi_group</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_acpi_event_mode</span><span class="p">:</span> <span class="s">&quot;0644&quot;</span>
<span class="nt">lp_acpi_action_mode</span><span class="p">:</span> <span class="s">&quot;0755&quot;</span>
<span class="nt">lp_acpi_events</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">lp_acpi_actions</span><span class="p">:</span> <span class="p p-Indicator">{}</span>

<span class="nt">lp_speechd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_speechd_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_speechd_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">lp_sudoers_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_sudoers_owner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_sudoers_group</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_sudoers_mode</span><span class="p">:</span> <span class="s">&quot;0440&quot;</span>
<span class="nt">lp_sudoers_conf</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">line</span><span class="p">:</span> <span class="s">&quot;#includedir</span><span class="nv"> </span><span class="s">/etc/sudoers.d&quot;</span><span class="p p-Indicator">,</span><span class="nt"> state</span><span class="p">:</span> <span class="s">&quot;present&quot;</span><span class="p p-Indicator">}</span>
<span class="nt">lp_sudoers_01</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_nfsd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_nfsd_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_nfsd_exports</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_netplan</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_netplan_root</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/netplan</span>
<span class="nt">lp_netplan_owner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_netplan_group</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_netplan_version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">lp_netplan_renderer</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">NetworkManager</span>
<span class="nt">lp_netplan_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_apparmor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_apparmor_disable</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_apparmor_complain</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_apparmor_enforce</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_swap</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_swap_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_swap_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">lp_timezone</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_timezone_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_timezone_zoneinfo</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">UTC</span>

<span class="nt">lp_timesyncd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_timesyncd_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_timesyncd_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_timesyncd_NTP</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
<span class="nt">lp_timesyncd_FallbackNTP</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ntp.ubuntu.com</span>
<span class="nt">lp_timesyncd_RootDistanceMaxSec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="nt">lp_timesyncd_PollIntervalMinSec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">32</span>
<span class="nt">lp_timesyncd_PollIntervalMaxSec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2048</span>

<span class="nt">lp_gpg</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_gpg_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_gpg_install</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_gpg_packages_extra</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_gpg_conf_default</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_gpg_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_gpg_agent_conf_default</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_gpg_agent_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_gpg_dirmngr_conf_default</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_gpg_dirmngr_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_wpasupplicant</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_wpasupplicant_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_wpasupplicant_debug_classified</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_wpasupplicant_conf_only</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_wpasupplicant_conf_owner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_wpasupplicant_conf_group</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_wpasupplicant_conf_mode</span><span class="p">:</span> <span class="s">&quot;0600&quot;</span>
<span class="nt">lp_wpasupplicant_conf_dir</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/wpa_supplicant</span>
<span class="nt">lp_wpasupplicant_conf_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">wpa_supplicant.conf</span>
<span class="nt">lp_wpasupplicant_conf_global</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">key</span><span class="p">:</span> <span class="nv">ctrl_interface</span><span class="p p-Indicator">,</span><span class="nt"> value</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lp_wpasupplicant_conf_ctrl_interface</span><span class="nv"> </span><span class="s">}}&quot;</span><span class="p p-Indicator">}</span>
<span class="nt">lp_wpasupplicant_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_wpa_action_script</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_wpa_action_script_dir</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/root/bin</span>
<span class="nt">lp_wpa_action_script_file</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lp_wpa_action_script_dir</span><span class="nv"> </span><span class="s">}}/wpa_action.sh&quot;</span>
<span class="nt">lp_wpa_action_script_owner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_wpa_action_script_group</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="nt">lp_wpa_action_script_mode</span><span class="p">:</span> <span class="s">&quot;0770&quot;</span>
<span class="nt">lp_wpa_action_script_dhclient</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lp_dhclient</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="nt">lp_wpa_action_script_pidfile</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/run/dhclient.$ifname.pid</span>
<span class="nt">lp_wpa_action_script_options_connect</span><span class="p">:</span> <span class="s">&quot;-4</span><span class="nv"> </span><span class="s">-nw</span><span class="nv"> </span><span class="s">-pf</span><span class="nv"> </span><span class="s">$pidfile</span><span class="nv"> </span><span class="s">-v&quot;</span>
<span class="nt">lp_wpa_action_script_options_disconnect</span><span class="p">:</span> <span class="s">&quot;-4</span><span class="nv"> </span><span class="s">-r</span><span class="nv"> </span><span class="s">-pf</span><span class="nv"> </span><span class="s">$pidfile</span><span class="nv"> </span><span class="s">-v&quot;</span>
<span class="nt">lp_wpa_action_script_logfile</span><span class="p">:</span> <span class="s">&quot;/tmp/wpa_action.$ifname&quot;</span>

<span class="nt">lp_logrotate_conf_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/logrotate.conf</span>
<span class="nt">lp_logrotate_conf_dir</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/logrotate.d</span>
<span class="nt">lp_logrotate_conf_lines</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">line</span><span class="p">:</span> <span class="s">&quot;include</span><span class="nv"> </span><span class="s">/etc/logrotate.d&quot;</span><span class="p p-Indicator">,</span><span class="nt"> state</span><span class="p">:</span> <span class="s">&quot;present&quot;</span><span class="p p-Indicator">}</span>
<span class="nt">lp_logrotate_conf_blocks</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_logrotate_confd</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_tlp</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_tlp_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_tlp_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_tlp_thinkpad</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_tlp_config</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_autofs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_autofs_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_autofs_conf_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/autofs.conf</span>
<span class="nt">lp_autofs_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_autofs_master_conf_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/auto.master</span>
<span class="nt">lp_autofs_master_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_autofs_misc_conf_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/auto.misc</span>
<span class="nt">lp_autofs_misc_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_libvirt</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_libvirt_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_libvirt_guests_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_libvirt_libvirtd_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_libvirt_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_zfs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_zfs_install</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_zfs_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_zfs_manage</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_zfs_mountpoints</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_service_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_service</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
<span class="nt">lp_service_enable</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">udev</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">auto_upgrades</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">sshd</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bluetooth</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">gpsd</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">postfix</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">smart</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">speechd</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">timesyncd</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">autofs</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">libvirt_libvirtd</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">libvirt_guests</span>

<span class="nt">lp_ufw</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_ufw_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_ufw_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_ufw_reset</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_ufw_reload</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_ufw_service</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ufw</span>
<span class="nt">lp_ufw_conf</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">state</span><span class="p">:</span> <span class="nv">enabled</span><span class="p p-Indicator">,</span><span class="nt"> policy</span><span class="p">:</span> <span class="nv">allow</span><span class="p p-Indicator">}</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">logging</span><span class="p">:</span> <span class="s">&quot;on&quot;</span><span class="p p-Indicator">}</span>

<span class="nt">lp_debsums</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_debsums_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_debsums_default_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/default/debsums</span>
<span class="nt">lp_debsums_default_conf</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">{</span><span class="nt">key</span><span class="p">:</span> <span class="nv">CRON_CHECK</span><span class="p p-Indicator">,</span><span class="nt"> value</span><span class="p">:</span> <span class="nv">never</span><span class="p p-Indicator">}</span>
<span class="nt">lp_debsums_ignore_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/debsums-ignore</span>
<span class="nt">lp_debsums_ignore_conf</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_fstab_entries</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_resolvconf</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_resolvconf_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_resolvconf_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_resolvconf_confd_head</span><span class="p">:</span> <span class="p p-Indicator">[]</span>

<span class="nt">lp_reboot</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_reboot_debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_reboot_force</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">lp_reboot_required_ignore</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_reboot_required_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/run/reboot-required</span>
<span class="nt">lp_reboot_required_command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/sbin/needs-restarting -r</span>
<span class="nt">lp_reboot_command</span><span class="p">:</span> <span class="s">&quot;sleep</span><span class="nv"> </span><span class="s">5</span><span class="nv"> </span><span class="s">&amp;&amp;</span><span class="nv"> </span><span class="s">shutdown</span><span class="nv"> </span><span class="s">-r</span><span class="nv"> </span><span class="s">now&quot;</span>
<span class="nt">lp_reboot_wait_connect_timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="nt">lp_reboot_wait_sleep</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="nt">lp_reboot_wait_delay</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="nt">lp_reboot_wait_timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">300</span>

<span class="c1"># Include default vars for various flavors. For example put vars into</span>
<span class="c1"># one of the files below. First found will be included.</span>
<span class="c1">#</span>
<span class="c1">#     vars/flavors/armbian-&lt;VERSION&gt;-&lt;BOARD&gt;.yml</span>
<span class="c1">#     vars/flavors/armbian-&lt;VERSION&gt;.yml</span>
<span class="c1">#     vars/flavors/armbian.yml</span>
<span class="c1">#     vars/defaults.yml</span>
<span class="c1">#</span>
<span class="c1"># 1) File with service tasks task/sub/vars-flavors-&lt;flavor&gt;.yml is</span>
<span class="c1">#    needed when new flavor is added to lp_flavors. See</span>
<span class="c1">#    tasks/sub/vars-flavors-common.yml</span>
<span class="c1"># 2) For precedence of vars see tasks/vars.yml</span>

<span class="nt">lp_flavors_enable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">lp_flavors_dir</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">inventory_dir</span><span class="nv"> </span><span class="s">~</span><span class="nv"> </span><span class="s">&#39;/flavors&#39;</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="nt">lp_flavors_dir_owner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="nt">lp_flavors_dir_group</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">adm</span>
<span class="nt">lp_flavors_dir_mode</span><span class="p">:</span> <span class="s">&quot;0775&quot;</span>
<span class="nt">lp_flavors</span><span class="p">:</span>
  <span class="nt">lsb</span><span class="p">:</span>
    <span class="nt">release_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/lsb-release</span>
    <span class="nt">file_labels</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">DISTRIB_ID</span><span class="p p-Indicator">,</span> <span class="nv">DISTRIB_CODENAME</span><span class="p p-Indicator">]</span>
  <span class="nt">os</span><span class="p">:</span>
    <span class="nt">release_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/os-release</span>
    <span class="nt">file_labels</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">ID</span><span class="p p-Indicator">,</span> <span class="nv">UBUNTU_CODENAME</span><span class="p p-Indicator">]</span>
  <span class="nt">armbian</span><span class="p">:</span>
    <span class="nt">release_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/etc/armbian-release</span>
    <span class="nt">file_labels</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">VERSION</span><span class="p p-Indicator">,</span> <span class="nv">BOARD</span><span class="p p-Indicator">]</span>

<span class="c1"># userland paths</span>
<span class="nt">lp_dhclient</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/sbin/dhclient</span>

<span class="c1"># TODO:</span>
<span class="c1"># * lp_virtualbox_services lp_virtualbox_enable</span>
<span class="c1"># * lp_tlp_services lp_tlp_enable</span>
<span class="c1"># * lp_nfsd_services lp_nfsd_enable</span>

<span class="c1"># EOF</span>
<span class="nn">...</span>
</pre></div>
</td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Default value of <strong>lp_passwords_debug_classified</strong> and
<strong>lp_wpasupplicant_debug_classified</strong> is <strong>False</strong>. Passwords will be
displayed if these variables are enabled.</p>
</div>
</div>
<div class="section" id="best-practice">
<span id="ug-bp"></span><h2><a class="toc-backref" href="#id14">Best practice</a></h2>
<p>Display the variables for debug if needed. Then disable this task
<code class="docutils literal notranslate"><span class="pre">lp_debug:</span> <span class="pre">false</span></code> to speedup the playbook</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">shell&gt; ansible-playbook linux-postinstall.yml -t lp_debug
</span></pre></div>
</div>
<p>Install packages automatically. Then disable this task
<code class="docutils literal notranslate"><span class="pre">lp_packages_auto:</span> <span class="pre">false</span></code> to speedup the playbook</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll">shell&gt; ansible-playbook linux-postinstall.yml -t cl_packages <span class="se">\</span>
</span><span class="hll">                                              -e <span class="s1">&#39;lp_packages_auto=true&#39;</span>
</span></pre></div>
</div>
<p>The role and the configuration data in the examples are
idempotent. Once the installation and configuration have passed there
should be no changes reported by <em>ansible-playbook</em> when running the
playbook repeatedly. Disable debug, and install to speedup the
playbook</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="hll"> shell&gt; ansible-playbook linux-postinstall.yml
</span></pre></div>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>